<!doctype html><html lang=en-us dir=ltr><head><script src=https://cdn.cookielaw.org/consent/7f944245-c5cd-4eed-a90e-dd955adfdd08/OtAutoBlock.js></script><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js data-domain-script=7f944245-c5cd-4eed-a90e-dd955adfdd08></script><script type=text/javascript>function OptanonWrapper(){}</script><script>const callback=(e)=>{for(const t of e)t.type==="childList"&&t.addedNodes.forEach(e=>{e.nodeName==="IMG"&&document.querySelectorAll('img:not([src^="http"]):not([data-ot-ignore])').forEach(e=>{e.setAttribute("data-ot-ignore","")})})},config={attributes:!0,childList:!0,subtree:!0,attributeFilter:["src"]},observer=new MutationObserver(callback);observer.observe(document.documentElement,config)</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","GTM-NJXWQL"),gtag("consent","default",{analytics_storage:"granted",ad_storage:"granted",functionality_storage:"granted",wait_for_update:500}),gtag("consent","default",{analytics_storage:"denied",ad_storage:"denied",functionality_storage:"denied",region:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","GB","PE","RU"],wait_for_update:500}),window.geofeed=e=>{dataLayer.push({event:"OneTrustCountryLoad",oneTrustCountryId:e.country.toString()})};const json=document.createElement("script");json.setAttribute("src","https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed"),document.head.appendChild(json)</script><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Use Sigstore for keyless signing and verification | GitLab Docs</title><link rel=icon href=/favicon.ico sizes=any><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=manifest href=/manifests/manifest.webmanifest><meta name=theme-color content="#FC6D26"><link rel=canonical href=https://docs.gitlab.com/ci/yaml/signing_examples/><meta name=description content="GitLab product documentation."><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"GitLab Docs","url":"https://docs.gitlab.com/"}</script><link rel=preload href=/gitlab_ui/fonts/GitLabSans.woff2 type=font/woff2 as=font crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabSans-Italic.woff2 crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabMono.woff2 crossorigin><link rel=stylesheet href=/gitlab_ui/ui/index.css><link rel=stylesheet href=/vite/main.css><link rel=stylesheet href=/css/syntax-dark.min.css id=syntax-dark-theme><link rel=stylesheet href=/css/syntax-light.min.css id=syntax-light-theme><script>(function(){const p="gitlab-docs-theme",g="gitlab-docs-layout",e={LIGHT:"light",DARK:"dark",AUTO:"auto"},i={FIXED:"fixed",FLUID:"fluid"},d="light",f="fixed";let r=!1;const t=localStorage?.getItem(p),m=localStorage?.getItem(g),l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.DARK:e.LIGHT;function h(){return t&&(t===e.LIGHT||t===e.DARK)?t:(t===e.AUTO&&(r=!0),l||d)}function u(){return m===i.FLUID?i.FLUID:f}const s=h(),c=u(),n=document.documentElement;n.classList.remove("gl-dark","gl-light"),n.classList.add(s===e.DARK?"gl-dark":"gl-light"),c===i.FLUID&&(n.classList.add("fluid"),n.classList.remove("fixed"));const a=document.getElementById("syntax-dark-theme"),o=document.getElementById("syntax-light-theme");a&&o&&(s===e.DARK?(a.disabled=!1,o.disabled=!0):(a.disabled=!0,o.disabled=!1)),window.__initialTheme=r?e.AUTO:s,window.__initialLayout=c})()</script><meta name=gitlab_docs_base_url content="/"><meta name=gitlab_docs_page_owner data-stage="Software Supply Chain Security" data-group="Pipeline Security"><meta class=elastic name=gitlab_docs_version content="18.6"><meta class=elastic name=gitlab_docs_section content="use_gitlab"><meta class=elastic name=gitlab_docs_breadcrumbs content="Use GitLab › Use CI/CD to build your application › Pipeline security"><script>window.pageMetadata={trail:[{path:"user/",title:"Use GitLab"},{path:"topics/build_your_application/",title:"Use CI/CD to build your application"},{path:"ci/pipeline_security/",title:"Pipeline security"},{path:"ci/yaml/signing_examples/",title:"Use Sigstore for keyless signing"}]}</script><meta name=gitlab_docs_legacy_path content="/ee/ci/yaml/signing_examples.html"><meta name=gitlab_docs_hugo_launch_version content="17.9"><script>const ELASTIC_CLOUD_ID="gitlab-docs-website:dXMtY2VudHJhbDEuZ2NwLmNsb3VkLmVzLmlvJDQwZTQyYTQzMTJiZjQyMzNiMzBiZTg0MTU5YjlkNmE1JGMxODg4Y2U5OTY0YzQzZjc5ZjQ1YTk5NDZmMjI0ODg0",ELASTIC_KEY="cDFpLWJaSUJXVHBqWWI4VGZKN3M6eENBSjl4WDRSRnlCUW94ajRQazhLQQ==",ELASTIC_INDEX="search-gitlab-docs-hugo"</script><script type=module src=/vite/elastic_search.js></script><script type=module src=/vite/history.js></script><script>const FS_IDENTIFIER="AIzaSyCLdi3jHHjkmLji9D8uj_RNPMHcdrYoIW4",RECAPTCHA_PUBLIC_KEY="6Le4R3UrAAAAALsIlK_siq0_UhPD-0rD-ImF1gfO"</script><meta name=google-site-verification content="AcGSBNaKDWnLgcYotlVibGy6STm2Y6_KJSaRxrA90xY"><meta name=google-site-verification content="6eFQOFLxYAer08ROqc3I-SAi44F9NmvH7PrUUBR3oCI"><meta name=google-site-verification content="xAUTWp3CDg-tU1LVVwsM9OrVhLR7L3SmiyKzkOuPNos"><meta name=google-site-verification content="F0zzwaMpiyWFcPQ1Lqu18qN3EnuQsqFXbySl_29yvHs"><meta name=google-site-verification content="nwo1bVaU0t9TZxZyM-aOI6-CofaH9GRL-uBPbdREWgc"><meta name=google-site-verification content="rWoHrtHEmIX0t28oOb1ZEDMYZb_EZA6rr6ZOl5otEPI"><meta name=google-site-verification content="fSxr8-uslxcuFL0N-oECp3Tm0RPNEGX97wbdayKOEL8"><meta name=google-site-verification content="ISxyLVnZqU8oY3jwrK7EO9o-2DOTvLJwPse7bZz6yhs"><meta name=google-site-verification content="x1WspIvz3ZHqS0gezfX_P-qiRDOeP2Oyrd68zrU2ErI"><meta name=google-site-verification content="DfXB2Za52GT3zs_vuLIAL4Mi3M3K4qxXcg7MAs0CUqo"><meta name=google-site-verification content="BCEBC2LC7A1NzO9Com1oBrWK88tV_QXfUL0i9mwXPL0"><meta name=google-site-verification content="a2lNcHMorfS43aoISjZt5_BBPo-H1UaTKMQdBgZO9iY"><meta name=google-site-verification content="0s16pP9MelY6wDHRf-izXb5pwLU01IogP-Uc_e8f3GU"><meta name=google-site-verification content="H474RNof35Xp8fLg02fZbg9Dzxdtfch6vtcjzpmUraU"><meta name=google-site-verification content="E0FlhpgBGeE7d1pQ6amdcIWPMDLDeu15-HLQVoDTguE"><meta name=google-site-verification content="opQd7_rXtPy-pX5CO_XZiztzeQEsXnB3j6Y1_dZAizA"><meta name=google-site-verification content="06Kq4AoXdmBOjOAkbPvnYGtSxnn4Q9QBqEO55PLlw5c"><meta name=google-site-verification content="djBBokRFSWV_VRlSE51V5TZSPzMC6hml5l-Sb22WglE"><meta name=google-site-verification content="UOW6nOsvbyMeIySuamzbws4kNC_WqehamWfoxxtKjZ8"><meta name=google-site-verification content="hXU1Gsdba74DUbvbdUHRl9o0cQeiwXIhAdIllOG6p8E"><meta name=google-site-verification content="YFeHIAPk9lE76ubVMeq4P0sQVnzo2-a4k1oU_bPY8yE"><meta name=google-site-verification content="h8ICI4eDkvXmYaGDuLTLoWuXnLn-KUkChqYB-roMRsw"><meta name=google-site-verification content="9QW7feFNlCpMLPm7vAWEU-v14vdzb0Bb3RAk-8e_a18"><meta name=google-site-verification content="26kXLBOjaYRb2UwzWTDl1I1nzA2NxMunhp7SUtxGV6E"><meta name=google-site-verification content="jr3C8t6vKGPyN9GV3esdHY_xGYyQaUNznIl-Un2RObA"><meta name=google-site-verification content="WdlBpRU0ec1ieKqrTY_772OhG23FY45VQ4Lv9DyLJ_Y"><meta name=google-site-verification content="n9i6B9q4Xjr_etK2nQGZH1msoo7vIv9SXV8SQLOUA7c"><meta name=zd-site-verification content="ony3w7hk1vs6tfyrc51mld"><meta name=zd-site-verification content="gtuq65qdzt6n31viazi6hj"></head><body data-elastic-exclude><nav data-ga-section=header data-elastic-exclude><div class="header-wrapper gl-w-full gl-fixed gl-z-4"><div class=header><div class="header-top gl-flex gl-items-center"><a href=#skipTarget class="gl-sr-only skip-link">Skip to main content</a>
<a class=navbar-logo href=/><span class=gl-sr-only>Go to GitLab Docs homepage</span></a><div class="mobile-header gl-w-full gl-text-base"><div class=mobile-header-overlay></div><div class="header-right collapse gl-z-4 gl-border-t lg:gl-border-0"><div class="search-wrapper lg:gl-ml-4 lg:gl-grow"><div class="js-elastic-search-form gl-spinner-container"><span role=status aria-label=Loading class="gl-ml-3 gl-align-text-bottom! gl-spinner gl-spinner gl-spinner-sm"></span></div></div><div class="gl-flex gl-flex-col gl-gap-3 gl-mt-5 lg:gl-mt-0 lg:gl-flex-row lg:gl-items-center gl-ml-auto"><a class="whats-new gl-button btn-default btn-default-tertiary gl-hidden lg:gl-block" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a><div data-vue-app=versions-menu></div><div data-vue-app=appearance-toggle class="gl-hidden lg:gl-block"></div><div class="gl-flex gl-justify-evenly lg:gl-justify-normal gl-items-center gl-gap-5"><a class="whats-new gl-button btn-default btn-default-tertiary gl-w-full lg:gl-hidden hover:gl-no-underline" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a>
<a class="free-trial-btn cta-button gl-button btn-confirm gl-w-full hover:gl-no-underline" href="https://gitlab.com/-/trial_registrations/new?glm_source=docs.gitlab.com&amp;amp;glm_content=navigation-cta-docs" target=_blank rel="noopener noreferrer" role=button>Get free trial</a></div></div></div></div><button class="navbar-toggle gl-button btn-default lg:gl-hidden" data-toggle=collapse data-target=.header-right>
<span class=navbar-toggle-icon></span>
<span class=gl-sr-only>Toggle menu</span></button></div><div class="header-bottom gl-border-t lg:gl-border-b"><ul class="subheader-menu gl-hidden lg:gl-flex gl-list-none gl-text-base gl-space-x-5 gl-py-4 gl-pl-0 gl-mb-0"><li><a href=/user/ class=active>Use GitLab</a></li><li><a href=/user/gitlab_duo/>GitLab Duo</a></li><li><a href=/api/>Extend</a></li><li><a href=/install/>Install</a></li><li><a href=/administration/>Administer</a></li><li><a href=/subscriptions/>Subscribe</a></li><li><a href=/development/>Contribute</a></li><li><a href=/solutions/>Solutions</a></li></ul></div></div></div></nav><main data-ga-section=content-body><div id=js-version-banner></div><div class="template-single gl-flex gl-h-full"><div class=side-nav data-ga-section=side-nav data-vue-app=sidebar-menu></div><div data-pagefind-body class=main-content><div class=docs-content><div class="gl-flex gl-h-5 gl-items-center gl-my-6"><div data-vue-app=open-sidebar></div><div data-vue-app=breadcrumb-nav></div></div><hr class="gl-border-t gl-px-5 lg:gl-hidden"><div class="gl-pt-4 gl-mt-4 lg:gl-pt-0 lg:gl-mt-0 lg:gl-border-t-0"><h1 id=skipTarget class=gl-mb-6>Use Sigstore for keyless signing and verification</h1></div><div data-elastic-include><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Free, Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab.com</li></ul></div><p>The <a href=https://www.sigstore.dev/>Sigstore</a> project provides a CLI called
<a href=https://docs.sigstore.dev/quickstart/quickstart-cosign/>Cosign</a> which can be used for keyless signing of container images built
with GitLab CI/CD. Keyless signing has many advantages, including eliminating the need to manage, safeguard, and rotate a private
key. Cosign requests a short-lived key pair to use for signing, records it on a certificate transparency log, and
then discards it. The key is generated through a token obtained from the GitLab server using the OIDC identity of the user who
ran the pipeline. This token includes unique claims that certify the token was generated by a CI/CD pipeline. To learn more,
see Cosign <a href=https://docs.sigstore.dev/quickstart/quickstart-cosign/#example-working-with-containers>documentation</a> on keyless signatures.</p><p>For details on the mapping between GitLab OIDC claims and Fulcio certificate extensions, see the GitLab column of
<a href=https://github.com/sigstore/fulcio/blob/main/docs/oid-info.md#mapping-oidc-token-claims-to-fulcio-oids>Mapping OIDC token claims to Fulcio OIDs</a>.</p><p>Prerequisites:</p><ul><li>You must be using GitLab.com.</li><li>Your project&rsquo;s CI/CD configuration must be located in the project.</li></ul><h2 id=sign-or-verify-container-images-and-build-artifacts-by-using-cosign>Sign or verify container images and build artifacts by using Cosign</h2><p>You can use Cosign to sign and verify container images and build artifacts.</p><p>Prerequisites:</p><ul><li>You must use a version of Cosign that is <code>>= 2.0.1</code>.</li></ul><p><strong>Known issues</strong></p><ul><li>The <code>id_tokens</code> portion of the CI/CD configuration file must be located in the project that is being built and signed. AutoDevOps, CI files included from another repository, and child pipelines are not supported. Work to remove this limitation is being tracked in <a href=https://gitlab.com/groups/gitlab-org/-/epics/11637>epic 11637</a>.</li></ul><p><strong>Best practices</strong>:</p><ul><li>Build and sign an image/artifact in the same job to prevent it from being tampered with before it is signed.</li><li>When signing container images, sign the digest (which is immutable) instead of the tag.</li></ul><p>GitLab <a href=/ci/secrets/id_token_authentication/>ID tokens</a> can be used by Cosign for
<a href=https://docs.sigstore.dev/quickstart/quickstart-cosign/#keyless-signing-of-a-container>keyless signing</a>. The token must have
<code>sigstore</code> set as the <a href=/ci/secrets/id_token_authentication/#token-payload><code>aud</code></a> claim. The token can be used by Cosign automatically when it is set in the
<code>SIGSTORE_ID_TOKEN</code> environment variable.</p><p>To learn more about how to install Cosign, see <a href=https://docs.sigstore.dev/cosign/system_config/installation/>Cosign Installation documentation</a>.</p><h3 id=signing>Signing</h3><h4 id=container-images>Container images</h4><p>The <a href=https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Cosign.gitlab-ci.yml><code>Cosign.gitlab-ci.yml</code></a>
template can be used to build and sign a container image in GitLab CI. The signature is automatically stored in the same
container repository as the image.</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>template</span><span class=p>:</span><span class=w> </span><span class=l>Cosign.gitlab-ci.yml</span></span></span></code></pre></div></div><p>To learn more about signing containers, see <a href=https://docs.sigstore.dev/cosign/signing/signing_with_containers/>Cosign Signing Containers documentation</a>.</p><h4 id=build-artifacts>Build artifacts</h4><p>The following example demonstrates how to sign a build artifact in GitLab CI. You should save the <code>cosign.bundle</code> file
produced by <code>cosign sign-blob</code>, which is used for signature verification.</p><p>To learn more about signing artifacts, see <a href=https://docs.sigstore.dev/cosign/signing/signing_with_blobs/>Cosign Signing Blobs documentation</a>.</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>build_and_sign_artifact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>alpine:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>COSIGN_YES</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>id_tokens</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>SIGSTORE_ID_TOKEN</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>aud</span><span class=p>:</span><span class=w> </span><span class=l>sigstore</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>before_script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>apk add --update cosign</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;This is a build artifact&#34; &gt; artifact.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cosign sign-blob artifact.txt --bundle cosign.bundle</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>paths</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>artifact.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>cosign.bundle</span></span></span></code></pre></div></div><h3 id=verification>Verification</h3><p><strong>Command-line arguments</strong></p><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td><code>--certificate-identity</code></td><td>The SAN of the signing certificate issued by Fulcio. Can be constructed with the following information from the project where the image/artifact was signed: GitLab instance URL + project path + <code>//</code> + CI config path + <code>@</code> + ref path.</td></tr><tr><td><code>--certificate-oidc-issuer</code></td><td>The GitLab instance URL where the image/artifact was signed. For example, <code>https://gitlab.com</code>.</td></tr><tr><td><code>--bundle</code></td><td>The <code>bundle</code> file produced by <code>cosign sign-blob</code>. Only used for verifying build artifacts.</td></tr></tbody></table><p>To learn more about verifying signed images/artifacts, see <a href=https://docs.sigstore.dev/cosign/verifying/verify/>Cosign Verifying documentation</a>.</p><h4 id=container-images-1>Container images</h4><p>The following example demonstrates how to verify a signed container image in GitLab CI. Use the previously described <a href=/ci/yaml/signing_examples/#verification>command-line arguments</a>.</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>verify_image</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>alpine:3.20</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>verify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>before_script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>apk add --update cosign docker</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>docker login -u &#34;$CI_REGISTRY_USER&#34; -p &#34;$CI_REGISTRY_PASSWORD&#34; $CI_REGISTRY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cosign verify &#34;$CI_REGISTRY_IMAGE:$CI_COMMIT_REF_SLUG&#34; --certificate-identity &#34;https://gitlab.com/my-group/my-project//path/to/.gitlab-ci.yml@refs/heads/main&#34; --certificate-oidc-issuer &#34;https://gitlab.com&#34;</span></span></span></code></pre></div></div><p><strong>Additional details</strong>:</p><ul><li>The double backslash between the project path and the <code>.gitlab-ci.yml</code> path is not an error and is required for verification to succeed. A typical error when a single slash is used is <code>Error: none of the expected identities matched what was in the certificate, got subjects</code> followed by the signed URL which has two slashes between the project path and the <code>.gitlab-ci.yml</code> path.</li><li>If the verification is happening in the same pipeline as the signing, then this path can be used: <code>"${CI_PROJECT_URL}//.gitlab-ci.yml@refs/heads/${CI_COMMIT_REF_NAME}"</code></li></ul><h4 id=build-artifacts-1>Build artifacts</h4><p>The following example demonstrates how to verify a signed build artifact in GitLab CI. Verifying an artifact requires both
the artifact itself and the <code>cosign.bundle</code> file produced by <code>cosign sign-blob</code>. Use the previously described <a href=/ci/yaml/signing_examples/#verification>command-line arguments</a>.</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>verify_artifact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>verify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>alpine:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>before_script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>apk add --update cosign</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cosign verify-blob artifact.txt --bundle cosign.bundle --certificate-identity &#34;https://gitlab.com/my-group/my-project//path/to/.gitlab-ci.yml@refs/heads/main&#34; --certificate-oidc-issuer &#34;https://gitlab.com&#34;</span></span></span></code></pre></div></div><p><strong>Additional details</strong>:</p><ul><li>The double backslash between the project path and the <code>.gitlab-ci.yml</code> path is not an error and is required for verification to succeed. A typical error when a single slash is used is <code>Error: none of the expected identities matched what was in the certificate, got subjects</code> followed by the signed URL which has two slashes between the project path and the <code>.gitlab-ci.yml</code> path.</li><li>If the verification is happening in the same pipeline as the signing, then this path can be used: <code>"${CI_PROJECT_URL}//.gitlab-ci.yml@refs/heads/${CI_COMMIT_REF_NAME}"</code></li></ul><h2 id=use-sigstore-and-npm-to-generate-keyless-provenance>Use Sigstore and npm to generate keyless provenance</h2><p>You can use Sigstore and npm, together with GitLab CI/CD, to digitally sign build artifacts without the overhead of key management.</p><h3 id=about-npm-provenance>About npm provenance</h3><p><a href=https://docs.npmjs.com/cli/>npm CLI</a> allows package maintainers to provide users with provenance attestations. Using npm
CLI provenance generation allows users to trust and verify that the package they are downloading and using is from you and the
build system that built it.</p><p>For more information on how to publish npm packages, see <a href=/user/packages/npm_registry/>GitLab npm package registry</a>.</p><h3 id=sigstore>Sigstore</h3><p><a href=https://www.sigstore.dev/>Sigstore</a> is a set of tools that package managers and security experts can use to secure their software
supply chains against attacks. Bringing together free-to-use open source technologies like Fulcio, Cosign, and Rekor, it
handles digital signing, verification, and checks for provenance
needed to make it safer to distribute and use open source software.</p><p><strong>Related topics</strong>:</p><ul><li><a href=https://slsa.dev/provenance/v1>SLSA Provenance definition</a></li><li><a href=https://docs.npmjs.com/generating-provenance-statements/>npm documentation</a></li><li><a href=https://github.com/npm/rfcs/blob/main/accepted/0049-link-packages-to-source-and-build.md#detailed-steps-to-publish>npm Provenance RFC</a></li></ul><h3 id=generating-provenance-in-gitlab-cicd>Generating provenance in GitLab CI/CD</h3><p>Now that Sigstore supports GitLab OIDC as previously described, you can use npm provenance together with GitLab CI/CD and Sigstore to
generate and sign provenance for your npm packages in a GitLab CI/CD pipeline.</p><h4 id=prerequisites>Prerequisites</h4><ol><li>Set your GitLab <a href=/ci/secrets/id_token_authentication/>ID token</a> <code>aud</code> to <code>sigstore</code>.</li><li>Add the <code>--provenance</code> flag to have npm publish.</li></ol><p>Example content to be added to <code>.gitlab-ci.yml</code> file:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>node:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>id_tokens</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>SIGSTORE_ID_TOKEN</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>aud</span><span class=p>:</span><span class=w> </span><span class=l>sigstore</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>npm publish --provenance --access public</span></span></span></code></pre></div></div><p>The npm GitLab template provides this functionality as well, the example is in
the <a href=https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/npm.gitlab-ci.yml>templates documentation</a>.</p><h2 id=verifying-npm-provenance>Verifying npm provenance</h2><p>npm CLI also provides functionality for end users to verify the provenance of packages.</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=plaintext class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>npm audit signatures
</span></span><span class=line><span class=cl>audited 1 package in 0s
</span></span><span class=line><span class=cl>1 package has a verified registry signature</span></span></code></pre></div></div><h3 id=inspecting-the-provenance-metadata>Inspecting the provenance metadata</h3><p>The Rekor transparency log stores certificates and attestations for every package that is published with provenance.
For example, here is the <a href="https://search.sigstore.dev/?logIndex=21076013">entry for the following example</a>.</p><p>An example provenance document generated by npm:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>_type</span><span class=p>:</span><span class=w> </span><span class=l>https://in-toto.io/Statement/v0.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>subject</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pkg:npm/%40strongjz/strongcoin@0.0.13</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>digest</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>sha512</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        924a134a0fd4fe6a7c87b4687bf0ac898b9153218ce9ad75798cc27ab2cddbeff77541f3847049bd5e3dfd74cea0a83754e7686852f34b185c3621d3932bc3c8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>predicateType</span><span class=p>:</span><span class=w> </span><span class=l>https://slsa.dev/provenance/v0.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>predicate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>buildType</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/npm/CLI/gitlab/v0alpha1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>builder</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com/strongjz/npm-provenance-example/-/runners/12270835</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>invocation</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>configSource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uri</span><span class=p>:</span><span class=w> </span><span class=l>git+https://gitlab.com/strongjz/npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>digest</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>sha1</span><span class=p>:</span><span class=w> </span><span class=l>6e02e901e936bfac3d4691984dff8c505410cbc3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>entryPoint</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>parameters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;true&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_API_GRAPHQL_URL</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com/api/graphql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_API_V4_URL</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com/api/v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_BEFORE_SHA</span><span class=p>:</span><span class=w> </span><span class=l>7d3e913e5375f68700e0c34aa90b0be7843edf6c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_BRANCH</span><span class=p>:</span><span class=w> </span><span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_REF_NAME</span><span class=p>:</span><span class=w> </span><span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_REF_PROTECTED</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;true&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_REF_SLUG</span><span class=p>:</span><span class=w> </span><span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_SHA</span><span class=p>:</span><span class=w> </span><span class=l>6e02e901e936bfac3d4691984dff8c505410cbc3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_SHORT_SHA</span><span class=p>:</span><span class=w> </span><span class=l>6e02e901</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_TIMESTAMP</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2023-05-19T10:17:12-04:00&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_COMMIT_TITLE</span><span class=p>:</span><span class=w> </span><span class=l>trying to publish to gitlab reg</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_CONFIG_PATH</span><span class=p>:</span><span class=w> </span><span class=l>.gitlab-ci.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_DEFAULT_BRANCH</span><span class=p>:</span><span class=w> </span><span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_DEPENDENCY_PROXY_DIRECT_GROUP_IMAGE_PREFIX</span><span class=p>:</span><span class=w> </span><span class=l>gitlab.com:443/strongjz/dependency_proxy/containers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_DEPENDENCY_PROXY_GROUP_IMAGE_PREFIX</span><span class=p>:</span><span class=w> </span><span class=l>gitlab.com:443/strongjz/dependency_proxy/containers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_DEPENDENCY_PROXY_SERVER</span><span class=p>:</span><span class=w> </span><span class=l>gitlab.com:443</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_DEPENDENCY_PROXY_USER</span><span class=p>:</span><span class=w> </span><span class=l>gitlab-ci-token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_JOB_ID</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;4316132595&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_JOB_NAME</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_JOB_NAME_SLUG</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_JOB_STAGE</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_JOB_STARTED_AT</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2023-05-19T14:17:23Z&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_JOB_URL</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com/strongjz/npm-provenance-example/-/jobs/4316132595</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_NODE_TOTAL</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PAGES_DOMAIN</span><span class=p>:</span><span class=w> </span><span class=l>gitlab.io</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PAGES_URL</span><span class=p>:</span><span class=w> </span><span class=l>https://strongjz.gitlab.io/npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PIPELINE_CREATED_AT</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2023-05-19T14:17:21Z&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PIPELINE_ID</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;872773336&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PIPELINE_IID</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;40&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PIPELINE_SOURCE</span><span class=p>:</span><span class=w> </span><span class=l>push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PIPELINE_URL</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com/strongjz/npm-provenance-example/-/pipelines/872773336</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_CLASSIFICATION_LABEL</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_DESCRIPTION</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_ID</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;45821955&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_NAME</span><span class=p>:</span><span class=w> </span><span class=l>npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_NAMESPACE</span><span class=p>:</span><span class=w> </span><span class=l>strongjz</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_NAMESPACE_SLUG</span><span class=p>:</span><span class=w> </span><span class=l>strongjz</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_NAMESPACE_ID</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;36018&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_PATH</span><span class=p>:</span><span class=w> </span><span class=l>strongjz/npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_PATH_SLUG</span><span class=p>:</span><span class=w> </span><span class=l>strongjz-npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_REPOSITORY_LANGUAGES</span><span class=p>:</span><span class=w> </span><span class=l>javascript,dockerfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_ROOT_NAMESPACE</span><span class=p>:</span><span class=w> </span><span class=l>strongjz</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_TITLE</span><span class=p>:</span><span class=w> </span><span class=l>npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_URL</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com/strongjz/npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_PROJECT_VISIBILITY</span><span class=p>:</span><span class=w> </span><span class=l>public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_REGISTRY</span><span class=p>:</span><span class=w> </span><span class=l>registry.gitlab.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_REGISTRY_IMAGE</span><span class=p>:</span><span class=w> </span><span class=l>registry.gitlab.com/strongjz/npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_REGISTRY_USER</span><span class=p>:</span><span class=w> </span><span class=l>gitlab-ci-token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_RUNNER_DESCRIPTION</span><span class=p>:</span><span class=w> </span><span class=m>3</span>-<span class=l>blue.shared.runners-manager.gitlab.com/default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_RUNNER_ID</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;12270835&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_RUNNER_TAGS</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        [&#34;gce&#34;, &#34;east-c&#34;, &#34;linux&#34;, &#34;ruby&#34;, &#34;mysql&#34;, &#34;postgres&#34;, &#34;mongo&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>        &#34;git-annex&#34;, &#34;shared&#34;, &#34;docker&#34;, &#34;saas-linux-small-amd64&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_HOST</span><span class=p>:</span><span class=w> </span><span class=l>gitlab.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_NAME</span><span class=p>:</span><span class=w> </span><span class=l>GitLab</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_PORT</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;443&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_PROTOCOL</span><span class=p>:</span><span class=w> </span><span class=l>https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_REVISION</span><span class=p>:</span><span class=w> </span><span class=l>9d4873fd3c5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_SHELL_SSH_HOST</span><span class=p>:</span><span class=w> </span><span class=l>gitlab.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_SHELL_SSH_PORT</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;22&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_URL</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_VERSION</span><span class=p>:</span><span class=w> </span><span class=m>16.1.0</span>-<span class=l>pre</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_VERSION_MAJOR</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;16&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_VERSION_MINOR</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_SERVER_VERSION_PATCH</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CI_TEMPLATE_REGISTRY_HOST</span><span class=p>:</span><span class=w> </span><span class=l>registry.gitlab.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>GITLAB_CI</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;true&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>GITLAB_FEATURES</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        elastic_search,ldap_group_sync,multiple_ldap_servers,seat_link,usage_quotas,zoekt_code_search,repository_size_limit,admin_audit_log,auditor_user,custom_file_templates,custom_project_templates,db_load_balancing,default_branch_protection_restriction_in_groups,extended_audit_events,external_authorization_service_api_management,geo,instance_level_scim,ldap_group_sync_filter,object_storage,pages_size_limit,project_aliases,password_complexity,enterprise_templates,git_abuse_rate_limit,required_ci_templates,runner_maintenance_note,runner_performance_insights,runner_upgrade_management,runner_jobs_statistics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>GITLAB_USER_ID</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;31705&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>GITLAB_USER_LOGIN</span><span class=p>:</span><span class=w> </span><span class=l>strongjz</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=m>3</span>-<span class=l>blue.shared.runners-manager.gitlab.com/default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>architecture</span><span class=p>:</span><span class=w> </span><span class=l>linux/amd64</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>project</span><span class=p>:</span><span class=w> </span><span class=l>strongjz/npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>job</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;4316132595&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipeline</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;872773336&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ref</span><span class=p>:</span><span class=w> </span><span class=l>.gitlab-ci.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>buildInvocationId</span><span class=p>:</span><span class=w> </span><span class=l>https://gitlab.com/strongjz/npm-provenance-example/-/jobs/4316132595</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>completeness</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>parameters</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>environment</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>materials</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reproducible</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>materials</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uri</span><span class=p>:</span><span class=w> </span><span class=l>git+https://gitlab.com/strongjz/npm-provenance-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>digest</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>sha1</span><span class=p>:</span><span class=w> </span><span class=l>6e02e901e936bfac3d4691984dff8c505410cbc3</span></span></span></code></pre></div></div></div><div data-vue-app=back-to-top-button></div></div><div class="feedback gl-min-h-8" data-ga-section=feedback data-elastic-exclude><div data-component=docs-feedback></div></div></div><aside class=sidebar-right><div data-ga-section=toc data-vue-app=toc></div></aside></div></main><footer data-ga-section=footer><section data-ga-section=footer><div id=footer class="footer-section container gl-grid gl-grid-cols-2 gl-grid-rows-3 gl-grid-rows-auto gl-gap-8 lg:gl-grid-cols-5 lg:gl-grid-rows-1 lg:gl-justify-items-center gl-px-8 gl-py-8 lg:gl-py-10"><div class="gl-col-span-2 lg:gl-col-span-1 gl-row-start-1"><div class="docs-title gl-flex gl-items-center"><a href=/><img src=/gitlab-logo-footer.svg alt="GitLab Docs logo" class=logo width=176 height=24></a></div><ul class="docs-social gl-list-none gl-flex"><li><a href=https://www.facebook.com/gitlab class=facebook><span class=gl-sr-only>Facebook</span></a></li><li><a href=https://www.linkedin.com/company/gitlab-com class=linkedin><span class=gl-sr-only>LinkedIn</span></a></li><li><a href=https://twitter.com/gitlab class=twitter><span class=gl-sr-only>Twitter</span></a></li><li><a href=https://www.youtube.com/channel/UCnMGQ8QHMAnVIsI3xJrihhg class=youtube><span class=gl-sr-only>YouTube</span></a></li></ul><a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="license noopener noreferrer" class=gl-mt-0><img src=/by-sa.svg alt="Creative Commons License" width=80 height=15></a></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Company</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/company/>About GitLab</a></li><li><a href=https://about.gitlab.com/pricing/>View pricing</a></li><li><a href=https://about.gitlab.com/free-trial/>Try GitLab for free</a></li></ul></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Feedback</div><ul class="gl-list-none gl-p-0"><li><a href=https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/ci/yaml/signing_examples.md>View page source</a></li><li><a href=https://gitlab.com/-/ide/project/gitlab-org/gitlab/edit/master/-/doc/ci/yaml/signing_examples.md>Edit in web IDE</a></li><li><a href=https://about.gitlab.com/community/contribute/>Contribute to GitLab</a></li><li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Documentation">Suggest updates</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Help & Community</div><ul class="gl-list-none gl-p-0"><li><a href=https://university.gitlab.com/pages/certifications>Get certified</a></li><li><a href=https://about.gitlab.com/support/>Get support</a></li><li><a href="https://forum.gitlab.com/new-topic?title=topic%20title&amp;body=topic%20body&amp;tags=docs-feedback">Post on the GitLab forum</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Resources</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/terms/>Terms</a></li><li><a href=https://about.gitlab.com/privacy/>Privacy statement</a></li><li><a href=/legal/use_generative_ai/>Use of generative AI</a></li><li><a href=/legal/licensing_policy/>Acceptable use of user licenses</a></li><li><button id=ot-sdk-btn class=ot-sdk-show-settings></button></li></ul></div></div></section></footer><script type=module src=/vite/main.js></script><script async>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NJXWQL")</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJXWQL" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script async>(function(){var e,t=!1;function n(){t===!1&&(t=!0,Munchkin.init("194-VVC-221",{useBeaconAPI:!0}))}e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src="https://munchkin.marketo.net/munchkin.js",e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&n()},e.onload=n,document.getElementsByTagName("head")[0].appendChild(e)})()</script><script async src=https://cdn.bizible.com/scripts/bizible.js></script><script async>_linkedin_partner_id="30694",window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[],window._linkedin_data_partner_ids.push(_linkedin_partner_id),function(){var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",t.parentNode.insertBefore(e,t)}()</script><noscript><img height=1 width=1 style=display:none alt src="https://dc.ads.linkedin.com/collect/?pid=30694&fmt=gif"></noscript></body></html>