<!doctype html><html lang=en-us dir=ltr><head><script src=https://cdn.cookielaw.org/consent/7f944245-c5cd-4eed-a90e-dd955adfdd08/OtAutoBlock.js></script><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js data-domain-script=7f944245-c5cd-4eed-a90e-dd955adfdd08></script><script type=text/javascript>function OptanonWrapper(){}</script><script>const callback=(e)=>{for(const t of e)t.type==="childList"&&t.addedNodes.forEach(e=>{e.nodeName==="IMG"&&document.querySelectorAll('img:not([src^="http"]):not([data-ot-ignore])').forEach(e=>{e.setAttribute("data-ot-ignore","")})})},config={attributes:!0,childList:!0,subtree:!0,attributeFilter:["src"]},observer=new MutationObserver(callback);observer.observe(document.documentElement,config)</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","GTM-NJXWQL"),gtag("consent","default",{analytics_storage:"granted",ad_storage:"granted",functionality_storage:"granted",wait_for_update:500}),gtag("consent","default",{analytics_storage:"denied",ad_storage:"denied",functionality_storage:"denied",region:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","GB","PE","RU"],wait_for_update:500}),window.geofeed=e=>{dataLayer.push({event:"OneTrustCountryLoad",oneTrustCountryId:e.country.toString()})};const json=document.createElement("script");json.setAttribute("src","https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed"),document.head.appendChild(json)</script><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Cobertura coverage report | GitLab Docs</title><link rel=icon href=/favicon.ico sizes=any><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=manifest href=/manifests/manifest.webmanifest><meta name=theme-color content="#FC6D26"><link rel=canonical href=https://docs.gitlab.com/ci/testing/code_coverage/cobertura/><meta name=description content="GitLab product documentation."><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"GitLab Docs","url":"https://docs.gitlab.com/"}</script><link rel=preload href=/gitlab_ui/fonts/GitLabSans.woff2 type=font/woff2 as=font crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabSans-Italic.woff2 crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabMono.woff2 crossorigin><link rel=stylesheet href=/gitlab_ui/ui/index.css><link rel=stylesheet href=/vite/main.css><link rel=stylesheet href=/css/syntax-dark.min.css id=syntax-dark-theme><link rel=stylesheet href=/css/syntax-light.min.css id=syntax-light-theme><script>(function(){const p="gitlab-docs-theme",g="gitlab-docs-layout",e={LIGHT:"light",DARK:"dark",AUTO:"auto"},i={FIXED:"fixed",FLUID:"fluid"},d="light",f="fixed";let r=!1;const t=localStorage?.getItem(p),m=localStorage?.getItem(g),l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.DARK:e.LIGHT;function h(){return t&&(t===e.LIGHT||t===e.DARK)?t:(t===e.AUTO&&(r=!0),l||d)}function u(){return m===i.FLUID?i.FLUID:f}const s=h(),c=u(),n=document.documentElement;n.classList.remove("gl-dark","gl-light"),n.classList.add(s===e.DARK?"gl-dark":"gl-light"),c===i.FLUID&&(n.classList.add("fluid"),n.classList.remove("fixed"));const a=document.getElementById("syntax-dark-theme"),o=document.getElementById("syntax-light-theme");a&&o&&(s===e.DARK?(a.disabled=!1,o.disabled=!0):(a.disabled=!0,o.disabled=!1)),window.__initialTheme=r?e.AUTO:s,window.__initialLayout=c})()</script><meta name=gitlab_docs_base_url content="/"><meta name=gitlab_docs_page_owner data-stage=Verify data-group="Pipeline Execution"><meta class=elastic name=gitlab_docs_version content="18.6"><meta class=elastic name=gitlab_docs_section content="use_gitlab"><meta class=elastic name=gitlab_docs_breadcrumbs content="Use GitLab › Use CI/CD to build your application › Testing › Code coverage"><script>window.pageMetadata={trail:[{path:"user/",title:"Use GitLab"},{path:"topics/build_your_application/",title:"Use CI/CD to build your application"},{path:"ci/testing/",title:"Testing"},{path:"ci/testing/code_coverage/",title:"Code coverage"},{path:"ci/testing/code_coverage/cobertura/",title:"Cobertura coverage report"}]}</script><meta name=gitlab_docs_legacy_path content="/ee/ci/testing/code_coverage/cobertura.html"><meta name=gitlab_docs_hugo_launch_version content="17.9"><script>const ELASTIC_CLOUD_ID="gitlab-docs-website:dXMtY2VudHJhbDEuZ2NwLmNsb3VkLmVzLmlvJDQwZTQyYTQzMTJiZjQyMzNiMzBiZTg0MTU5YjlkNmE1JGMxODg4Y2U5OTY0YzQzZjc5ZjQ1YTk5NDZmMjI0ODg0",ELASTIC_KEY="cDFpLWJaSUJXVHBqWWI4VGZKN3M6eENBSjl4WDRSRnlCUW94ajRQazhLQQ==",ELASTIC_INDEX="search-gitlab-docs-hugo"</script><script type=module src=/vite/elastic_search.js></script><script type=module src=/vite/history.js></script><script>const FS_IDENTIFIER="AIzaSyCLdi3jHHjkmLji9D8uj_RNPMHcdrYoIW4",RECAPTCHA_PUBLIC_KEY="6Le4R3UrAAAAALsIlK_siq0_UhPD-0rD-ImF1gfO"</script><meta name=google-site-verification content="AcGSBNaKDWnLgcYotlVibGy6STm2Y6_KJSaRxrA90xY"><meta name=google-site-verification content="6eFQOFLxYAer08ROqc3I-SAi44F9NmvH7PrUUBR3oCI"><meta name=google-site-verification content="xAUTWp3CDg-tU1LVVwsM9OrVhLR7L3SmiyKzkOuPNos"><meta name=google-site-verification content="F0zzwaMpiyWFcPQ1Lqu18qN3EnuQsqFXbySl_29yvHs"><meta name=google-site-verification content="nwo1bVaU0t9TZxZyM-aOI6-CofaH9GRL-uBPbdREWgc"><meta name=google-site-verification content="rWoHrtHEmIX0t28oOb1ZEDMYZb_EZA6rr6ZOl5otEPI"><meta name=google-site-verification content="fSxr8-uslxcuFL0N-oECp3Tm0RPNEGX97wbdayKOEL8"><meta name=google-site-verification content="ISxyLVnZqU8oY3jwrK7EO9o-2DOTvLJwPse7bZz6yhs"><meta name=google-site-verification content="x1WspIvz3ZHqS0gezfX_P-qiRDOeP2Oyrd68zrU2ErI"><meta name=google-site-verification content="DfXB2Za52GT3zs_vuLIAL4Mi3M3K4qxXcg7MAs0CUqo"><meta name=google-site-verification content="BCEBC2LC7A1NzO9Com1oBrWK88tV_QXfUL0i9mwXPL0"><meta name=google-site-verification content="a2lNcHMorfS43aoISjZt5_BBPo-H1UaTKMQdBgZO9iY"><meta name=google-site-verification content="0s16pP9MelY6wDHRf-izXb5pwLU01IogP-Uc_e8f3GU"><meta name=google-site-verification content="H474RNof35Xp8fLg02fZbg9Dzxdtfch6vtcjzpmUraU"><meta name=google-site-verification content="E0FlhpgBGeE7d1pQ6amdcIWPMDLDeu15-HLQVoDTguE"><meta name=google-site-verification content="opQd7_rXtPy-pX5CO_XZiztzeQEsXnB3j6Y1_dZAizA"><meta name=google-site-verification content="06Kq4AoXdmBOjOAkbPvnYGtSxnn4Q9QBqEO55PLlw5c"><meta name=google-site-verification content="djBBokRFSWV_VRlSE51V5TZSPzMC6hml5l-Sb22WglE"><meta name=google-site-verification content="UOW6nOsvbyMeIySuamzbws4kNC_WqehamWfoxxtKjZ8"><meta name=google-site-verification content="hXU1Gsdba74DUbvbdUHRl9o0cQeiwXIhAdIllOG6p8E"><meta name=google-site-verification content="YFeHIAPk9lE76ubVMeq4P0sQVnzo2-a4k1oU_bPY8yE"><meta name=google-site-verification content="h8ICI4eDkvXmYaGDuLTLoWuXnLn-KUkChqYB-roMRsw"><meta name=google-site-verification content="9QW7feFNlCpMLPm7vAWEU-v14vdzb0Bb3RAk-8e_a18"><meta name=google-site-verification content="26kXLBOjaYRb2UwzWTDl1I1nzA2NxMunhp7SUtxGV6E"><meta name=google-site-verification content="jr3C8t6vKGPyN9GV3esdHY_xGYyQaUNznIl-Un2RObA"><meta name=google-site-verification content="WdlBpRU0ec1ieKqrTY_772OhG23FY45VQ4Lv9DyLJ_Y"><meta name=google-site-verification content="n9i6B9q4Xjr_etK2nQGZH1msoo7vIv9SXV8SQLOUA7c"><meta name=zd-site-verification content="ony3w7hk1vs6tfyrc51mld"><meta name=zd-site-verification content="gtuq65qdzt6n31viazi6hj"></head><body data-elastic-exclude><nav data-ga-section=header data-elastic-exclude><div class="header-wrapper gl-w-full gl-fixed gl-z-4"><div class=header><div class="header-top gl-flex gl-items-center"><a href=#skipTarget class="gl-sr-only skip-link">Skip to main content</a>
<a class=navbar-logo href=/><span class=gl-sr-only>Go to GitLab Docs homepage</span></a><div class="mobile-header gl-w-full gl-text-base"><div class=mobile-header-overlay></div><div class="header-right collapse gl-z-4 gl-border-t lg:gl-border-0"><div class="search-wrapper lg:gl-ml-4 lg:gl-grow"><div class="js-elastic-search-form gl-spinner-container"><span role=status aria-label=Loading class="gl-ml-3 gl-align-text-bottom! gl-spinner gl-spinner gl-spinner-sm"></span></div></div><div class="gl-flex gl-flex-col gl-gap-3 gl-mt-5 lg:gl-mt-0 lg:gl-flex-row lg:gl-items-center gl-ml-auto"><a class="whats-new gl-button btn-default btn-default-tertiary gl-hidden lg:gl-block" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a><div data-vue-app=versions-menu></div><div data-vue-app=appearance-toggle class="gl-hidden lg:gl-block"></div><div class="gl-flex gl-justify-evenly lg:gl-justify-normal gl-items-center gl-gap-5"><a class="whats-new gl-button btn-default btn-default-tertiary gl-w-full lg:gl-hidden hover:gl-no-underline" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a>
<a class="free-trial-btn cta-button gl-button btn-confirm gl-w-full hover:gl-no-underline" href="https://gitlab.com/-/trial_registrations/new?glm_source=docs.gitlab.com&amp;amp;glm_content=navigation-cta-docs" target=_blank rel="noopener noreferrer" role=button>Get free trial</a></div></div></div></div><button class="navbar-toggle gl-button btn-default lg:gl-hidden" data-toggle=collapse data-target=.header-right>
<span class=navbar-toggle-icon></span>
<span class=gl-sr-only>Toggle menu</span></button></div><div class="header-bottom gl-border-t lg:gl-border-b"><ul class="subheader-menu gl-hidden lg:gl-flex gl-list-none gl-text-base gl-space-x-5 gl-py-4 gl-pl-0 gl-mb-0"><li><a href=/user/ class=active>Use GitLab</a></li><li><a href=/user/gitlab_duo/>GitLab Duo</a></li><li><a href=/api/>Extend</a></li><li><a href=/install/>Install</a></li><li><a href=/administration/>Administer</a></li><li><a href=/subscriptions/>Subscribe</a></li><li><a href=/development/>Contribute</a></li><li><a href=/solutions/>Solutions</a></li></ul></div></div></div></nav><main data-ga-section=content-body><div id=js-version-banner></div><div class="template-single gl-flex gl-h-full"><div class=side-nav data-ga-section=side-nav data-vue-app=sidebar-menu></div><div data-pagefind-body class=main-content><div class=docs-content><div class="gl-flex gl-h-5 gl-items-center gl-my-6"><div data-vue-app=open-sidebar></div><div data-vue-app=breadcrumb-nav></div></div><hr class="gl-border-t gl-px-5 lg:gl-hidden"><div class="gl-pt-4 gl-mt-4 lg:gl-pt-0 lg:gl-mt-0 lg:gl-border-t-0"><h1 id=skipTarget class=gl-mb-6>Cobertura coverage report</h1></div><div data-elastic-include><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Free, Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li></ul></div><p>For the coverage analysis to work, you have to provide a properly formatted
<a href=https://cobertura.github.io/cobertura/>Cobertura XML</a> report to
<a href=/ci/yaml/artifacts_reports/#artifactsreportscoverage_report><code>artifacts:reports:coverage_report</code></a>.
This format was originally developed for Java, but most coverage analysis frameworks
for other languages and platforms have plugins to add support for it, like:</p><ul><li><a href=https://rubygems.org/gems/simplecov-cobertura>simplecov-cobertura</a> (Ruby)</li><li><a href=https://github.com/boumenot/gocover-cobertura>gocover-cobertura</a> (Go)</li><li><a href=https://www.npmjs.com/package/cobertura>cobertura</a> (Node.js)</li></ul><p>Other coverage analysis frameworks support the format out of the box, for example:</p><ul><li><a href=https://istanbul.js.org/docs/advanced/alternative-reporters/#cobertura>Istanbul</a> (JavaScript)</li><li><a href=https://coverage.readthedocs.io/en/coverage-5.0.4/cmd.html#xml-reporting>Coverage.py</a> (Python)</li><li><a href=https://github.com/sebastianbergmann/phpunit-documentation-english/blob/master/src/textui.rst#command-line-options>PHPUnit</a> (PHP)</li></ul><p>After configuration, if your merge request triggers a pipeline that collects coverage reports, the coverage information is displayed in the diff view. This includes reports
from any job in any stage in the pipeline. The coverage displays for each line:</p><ul><li><code>covered</code> (green): lines which have been checked at least once by tests</li><li><code>no test coverage</code> (orange): lines which are loaded but never executed</li><li>no coverage information: lines which are non-instrumented or not loaded</li></ul><p>Hovering over the coverage bar provides further information, such as the number
of times the line was checked by tests.</p><p>Uploading a test coverage report does not enable:</p><ul><li><a href=/ci/testing/code_coverage/#view-coverage-results>Test coverage results</a> in the merge request widget.</li><li><a href=/ci/testing/code_coverage/#view-coverage-history>Code coverage history</a>.</li></ul><p>You must configure these separately.</p><h2 id=limits>Limits</h2><p>A limit of 100 <code>&lt;source></code> nodes for Cobertura format XML files applies. If your Cobertura report exceeds
100 nodes, there can be mismatches or no matches in the merge request diff view.</p><p>A single Cobertura XML file can be no more than 10 MiB. For large projects, split the Cobertura XML into
smaller files. See <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/328772>this issue</a> for more details.
When submitting many files, it can take a few minutes for coverage to show on a merge request.</p><p>The visualization only displays after the pipeline is complete. If the pipeline has
a <a href=/ci/jobs/job_control/#types-of-manual-jobs>blocking manual job</a>, the
pipeline waits for the manual job before continuing and is not considered complete.
The visualization cannot be displayed if the blocking manual job did not run.</p><p>If the job generates multiple reports, <a href=/ci/testing/code_coverage/#configure-coverage-visualization>use a wildcard in the artifact path</a>.</p><h3 id=automatic-class-path-correction>Automatic class path correction</h3><p>The coverage report properly matches changed files only if the <code>filename</code> of a <code>class</code> element
contains the full path relative to the project root. However, in some coverage analysis frameworks,
the generated Cobertura XML has the <code>filename</code> path relative to the class package directory instead.</p><p>To make an intelligent guess on the project root relative <code>class</code> path, the Cobertura XML parser
attempts to build the full path by:</p><ul><li>Extracting a portion of the <code>source</code> paths from the <code>sources</code> element and combining them with the
class <code>filename</code> path.</li><li>Checking if the candidate path exists in the project.</li><li>Using the first candidate that matches as the class full path.</li></ul><h4 id=path-correction-example>Path correction example</h4><p>As an example, a C# project with:</p><ul><li><p>A full path of <code>test-org/test-cs-project</code>.</p></li><li><p>The following files relative to the project root:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=shell class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>Auth/User.cs
</span></span><span class=line><span class=cl>Lib/Utils/User.cs</span></span></code></pre></div></div></li><li><p><code>sources</code> from Cobertura XML, the following paths in the format
<code>&lt;CI_BUILDS_DIR>/&lt;PROJECT_FULL_PATH>/...</code>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=xml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;sources&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;source&gt;</span>/builds/test-org/test-cs-project/Auth<span class=nt>&lt;/source&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;source&gt;</span>/builds/test-org/test-cs-project/Lib/Utils<span class=nt>&lt;/source&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/sources&gt;</span></span></span></code></pre></div></div></li></ul><p>The parser:</p><ul><li>Extracts <code>Auth</code> and <code>Lib/Utils</code> from the <code>sources</code> and uses these to determine the <code>class</code> path
relative to the project root.</li><li>Combines these extracted <code>sources</code> and the class filename. For example, if there is a <code>class</code>
element with the <code>filename</code> value of <code>User.cs</code>, the parser takes the first candidate path that
matches, which is <code>Auth/User.cs</code>.</li><li>For each <code>class</code> element, attempts to look for a match for each extracted <code>source</code> path up to
100 iterations. If it reaches this limit without finding a matching path in the file tree, the
class is not included in the final coverage report.</li></ul><p>Automatic class path correction also works for a Java project with:</p><ul><li><p>A full path of <code>test-org/test-java-project</code>.</p></li><li><p>The following files relative to the project root:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=shell class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>src/main/java/com/gitlab/security_products/tests/App.java</span></span></code></pre></div></div></li><li><p><code>sources</code> from Cobertura XML:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=xml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;sources&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;source&gt;</span>/builds/test-org/test-java-project/src/main/java/<span class=nt>&lt;/source&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/sources&gt;</span></span></span></code></pre></div></div></li><li><p><code>class</code> element with the <code>filename</code> value of <code>com/gitlab/security_products/tests/App.java</code>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=xml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;class</span> <span class=na>name=</span><span class=s>&#34;com.gitlab.security_products.tests.App&#34;</span> <span class=na>filename=</span><span class=s>&#34;com/gitlab/security_products/tests/App.java&#34;</span> <span class=na>line-rate=</span><span class=s>&#34;0.0&#34;</span> <span class=na>branch-rate=</span><span class=s>&#34;0.0&#34;</span> <span class=na>complexity=</span><span class=s>&#34;6.0&#34;</span><span class=nt>&gt;</span></span></span></code></pre></div></div></li></ul><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>Automatic class path correction only works on <code>source</code> paths in the format <code>&lt;CI_BUILDS_DIR>/&lt;PROJECT_FULL_PATH>/...</code>.
The <code>source</code> is ignored if the path does not follow this pattern. The parser assumes that the
<code>filename</code> of a <code>class</code> element contains the full path relative to the project root.</p></div></div><h2 id=example-test-coverage-configurations>Example test coverage configurations</h2><p>This section provides test coverage configuration examples for different programming languages. You can also see a working example in
the <a href=https://gitlab.com/gitlab-org/ci-sample-projects/coverage-report/><code>coverage-report</code></a> demonstration project.</p><h3 id=javascript-example>JavaScript example</h3><p>The following <code>.gitlab-ci.yml</code> example uses <a href=https://mochajs.org/>Mocha</a>
JavaScript testing and <a href=https://github.com/istanbuljs/nyc>nyc</a> coverage-tooling to
generate the coverage artifact:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>npm install</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>npx nyc --reporter cobertura mocha</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>coverage/cobertura-coverage.xml</span></span></span></code></pre></div></div><h3 id=java-and-kotlin-examples>Java and Kotlin examples</h3><p>The Maven and Gradle examples convert JaCoCo reports into Cobertura format.
Alternatively, <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/227345>issue 227345</a>
tracks the work to enable <a href=/ci/testing/code_coverage/jacoco/>native JaCoCo report support</a>.</p><h4 id=maven-example>Maven example</h4><p>The following <code>.gitlab-ci.yml</code> example for Java or Kotlin uses <a href=https://maven.apache.org/>Maven</a>
to build the project and <a href=https://www.eclemma.org/jacoco/>JaCoCo</a> coverage-tooling to
generate the coverage artifact.
You can check the <a href=https://gitlab.com/haynes/jacoco2cobertura>Docker image configuration and scripts</a> if you want to build your own image.</p><p>GitLab expects the artifact in the Cobertura format, so you have to execute a few
scripts before uploading it. The <code>test-jdk11</code> job tests the code and generates an
XML artifact. The <code>coverage-jdk-11</code> job converts the artifact into a Cobertura report:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>test-jdk11</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>maven:3.6.3-jdk-11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mvn $MAVEN_CLI_OPTS clean org.jacoco:jacoco-maven-plugin:prepare-agent test jacoco:report</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>paths</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>target/site/jacoco/jacoco.xml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>coverage-jdk11</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Must be in a stage later than test-jdk11&#39;s stage.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The `visualize` stage does not exist by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Please define it first, or choose an existing stage like `deploy`.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>visualize</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>registry.gitlab.com/haynes/jacoco2cobertura:1.0.9</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># convert report from jacoco to cobertura, using relative project path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>python /opt/cover2cover.py target/site/jacoco/jacoco.xml $CI_PROJECT_DIR/src/main/java/ &gt; target/site/cobertura.xml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;test-jdk11&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>target/site/cobertura.xml</span></span></span></code></pre></div></div><h4 id=gradle-example>Gradle example</h4><p>The following <code>.gitlab-ci.yml</code> example for Java or Kotlin uses <a href=https://gradle.org/>Gradle</a>
to build the project and <a href=https://www.eclemma.org/jacoco/>JaCoCo</a> coverage-tooling to
generate the coverage artifact.
You can check the <a href=https://gitlab.com/haynes/jacoco2cobertura>Docker image configuration and scripts</a> if you want to build your own image.</p><p>GitLab expects the artifact in the Cobertura format, so you have to execute a few
scripts before uploading it. The <code>test-jdk11</code> job tests the code and generates an
XML artifact. The <code>coverage-jdk-11</code> job converts the artifact into a Cobertura report:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>test-jdk11</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>gradle:6.6.1-jdk11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=s1>&#39;gradle test jacocoTestReport&#39;</span><span class=w> </span><span class=c># jacoco must be configured to create an xml report</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>paths</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>build/jacoco/jacoco.xml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>coverage-jdk11</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Must be in a stage later than test-jdk11&#39;s stage.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The `visualize` stage does not exist by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Please define it first, or chose an existing stage like `deploy`.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>visualize</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>registry.gitlab.com/haynes/jacoco2cobertura:1.0.7</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># convert report from jacoco to cobertura, using relative project path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>python /opt/cover2cover.py build/jacoco/jacoco.xml $CI_PROJECT_DIR/src/main/java/ &gt; build/cobertura.xml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;test-jdk11&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>build/cobertura.xml</span></span></span></code></pre></div></div><h3 id=python-example>Python example</h3><p>The following <code>.gitlab-ci.yml</code> example uses <a href=https://pytest-cov.readthedocs.io/>pytest-cov</a> to collect test coverage data:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>run tests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>python:3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pip install pytest pytest-cov</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pytest --cov --cov-report term --cov-report xml:coverage.xml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>coverage.xml</span></span></span></code></pre></div></div><h3 id=php-example>PHP example</h3><p>The following <code>.gitlab-ci.yml</code> example for PHP uses <a href=https://phpunit.readthedocs.io/>PHPUnit</a>
to collect test coverage data and generate the report.</p><p>With a minimal <a href=https://docs.phpunit.de/en/11.0/configuration.html><code>phpunit.xml</code></a> file (you may reference
<a href=https://gitlab.com/yookoala/code-coverage-visualization-with-php/>this example repository</a>), you can run the test and
generate the <code>coverage.xml</code>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>run tests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>php:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>XDEBUG_MODE</span><span class=p>:</span><span class=w> </span><span class=l>coverage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>before_script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>apt-get update &amp;&amp; apt-get -yq install git unzip zip libzip-dev zlib1g-dev</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>docker-php-ext-install zip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pecl install xdebug &amp;&amp; docker-php-ext-enable xdebug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>php -r &#34;copy(&#39;https://getcomposer.org/installer&#39;, &#39;composer-setup.php&#39;);&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>php composer-setup.php --install-dir=/usr/local/bin --filename=composer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>composer install</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>composer require --dev phpunit/phpunit phpunit/php-code-coverage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>php ./vendor/bin/phpunit --coverage-text --coverage-cobertura=coverage.cobertura.xml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>coverage.cobertura.xml</span></span></span></code></pre></div></div><p><a href=https://codeception.com/>Codeception</a>, through PHPUnit, also supports generating Cobertura report with
<a href=https://codeception.com/docs/reference/Commands#run><code>run</code></a>. The path for the generated file
depends on the <code>--coverage-cobertura</code> option and <a href=https://codeception.com/docs/reference/Configuration#paths><code>paths</code></a>
configuration for the <a href=https://codeception.com/docs/05-UnitTests>unit test suite</a>. Configure <code>.gitlab-ci.yml</code>
to find Cobertura in the appropriate path.</p><h3 id=cc-example>C/C++ example</h3><p>The following <code>.gitlab-ci.yml</code> example for C/C++ with
<code>gcc</code> or <code>g++</code> as the compiler uses <a href=https://gcovr.com/en/stable/><code>gcovr</code></a> to generate the coverage
output file in Cobertura XML format.</p><p>This example assumes:</p><ul><li>That the <code>Makefile</code> is created by <code>cmake</code> in the <code>build</code> directory,
in another job in a previous stage.
(If you use <code>automake</code> to generate the <code>Makefile</code>,
then you need to call <code>make check</code> instead of <code>make test</code>.)</li><li><code>cmake</code> (or <code>automake</code>) has set the compiler option <code>--coverage</code>.</li></ul><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>run tests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cd build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>make test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>gcovr --xml-pretty --exclude-unreachable-branches --print-summary -o coverage.xml --root ${CI_PROJECT_DIR}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>${CI_JOB_NAME}-${CI_COMMIT_REF_NAME}-${CI_COMMIT_SHA}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>expire_in</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w> </span><span class=l>days</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>build/coverage.xml</span></span></span></code></pre></div></div><h3 id=go-example>Go example</h3><p>The following <code>.gitlab-ci.yml</code> example for Go uses:</p><ul><li><a href=https://go.dev/doc/tutorial/add-a-test><code>go test</code></a> to run tests.</li><li><a href=https://github.com/boumenot/gocover-cobertura><code>gocover-cobertura</code></a> to convert Go&rsquo;s coverage profile into the Cobertura XML format.</li></ul><p>This example assumes that <a href=https://go.dev/ref/mod>Go modules</a>
are being used. The <code>-covermode count</code> option does not work with the <code>-race</code> flag.
If you want to generate code coverage while also using the <code>-race</code> flag, you must switch to
<code>-covermode atomic</code> which is slower than <code>-covermode count</code>. See <a href=https://go.dev/blog/cover>this blog post</a>
for more details.</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>run tests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>golang:1.17</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>go install</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>go test ./... -coverprofile=coverage.txt -covermode count</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>go get github.com/boumenot/gocover-cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>go run github.com/boumenot/gocover-cobertura &lt; coverage.txt &gt; coverage.xml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>coverage.xml</span></span></span></code></pre></div></div><h3 id=ruby-example>Ruby example</h3><p>The following <code>.gitlab-ci.yml</code> example for Ruby uses</p><ul><li><a href=https://rspec.info/><code>rspec</code></a> to run tests.</li><li><a href=https://github.com/simplecov-ruby/simplecov><code>simplecov</code></a> and <a href=https://github.com/dashingrocket/simplecov-cobertura><code>simplecov-cobertura</code></a>
to record the coverage profile and create a report in the Cobertura XML format.</li></ul><p>This example assumes:</p><ul><li>That <a href=https://bundler.io/><code>bundler</code></a> is being used for dependency management.
The <code>rspec</code>, <code>simplecov</code> and <code>simplecov-cobertura</code> gems have been added to your <code>Gemfile</code>.</li><li>The <code>CoberturaFormatter</code> has been added to your <code>SimpleCov.formatters</code>
configuration in the <code>spec_helper.rb</code> file.</li></ul><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>run tests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ruby:3.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>bundle install</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>bundle exec rspec</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>coverage/coverage.xml</span></span></span></code></pre></div></div><h2 id=troubleshooting>Troubleshooting</h2><h3 id=test-coverage-visualization-not-displayed>Test coverage visualization not displayed</h3><p>If the test coverage visualization is not displayed in the diff view, you can check
the coverage report itself and verify that:</p><ul><li>The file you are viewing in the diff view is mentioned in the coverage report.</li><li>The <code>source</code> and <code>filename</code> nodes in the report follows the <a href=/ci/testing/code_coverage/cobertura/#automatic-class-path-correction>expected structure</a>
to match the files in your repository.</li><li>The pipeline has completed. If the pipeline is <a href=/ci/jobs/job_control/#types-of-manual-jobs>blocked on a manual job</a>,
the pipeline is not considered complete.</li><li>The coverage report file does not exceed the <a href=/ci/testing/code_coverage/cobertura/#limits>limits</a>.</li></ul><p>Report artifacts are not downloadable by default. If you want the report to be downloadable
from the job details page, add your coverage report to the artifact <code>paths</code>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>paths</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>coverage/cobertura-coverage.xml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>coverage_report</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>coverage_format</span><span class=p>:</span><span class=w> </span><span class=l>cobertura</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>coverage/cobertura-coverage.xml</span></span></span></code></pre></div></div></div><div data-vue-app=back-to-top-button></div></div><div class="feedback gl-min-h-8" data-ga-section=feedback data-elastic-exclude><div data-component=docs-feedback></div></div></div><aside class=sidebar-right><div data-ga-section=toc data-vue-app=toc></div></aside></div></main><footer data-ga-section=footer><section data-ga-section=footer><div id=footer class="footer-section container gl-grid gl-grid-cols-2 gl-grid-rows-3 gl-grid-rows-auto gl-gap-8 lg:gl-grid-cols-5 lg:gl-grid-rows-1 lg:gl-justify-items-center gl-px-8 gl-py-8 lg:gl-py-10"><div class="gl-col-span-2 lg:gl-col-span-1 gl-row-start-1"><div class="docs-title gl-flex gl-items-center"><a href=/><img src=/gitlab-logo-footer.svg alt="GitLab Docs logo" class=logo width=176 height=24></a></div><ul class="docs-social gl-list-none gl-flex"><li><a href=https://www.facebook.com/gitlab class=facebook><span class=gl-sr-only>Facebook</span></a></li><li><a href=https://www.linkedin.com/company/gitlab-com class=linkedin><span class=gl-sr-only>LinkedIn</span></a></li><li><a href=https://twitter.com/gitlab class=twitter><span class=gl-sr-only>Twitter</span></a></li><li><a href=https://www.youtube.com/channel/UCnMGQ8QHMAnVIsI3xJrihhg class=youtube><span class=gl-sr-only>YouTube</span></a></li></ul><a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="license noopener noreferrer" class=gl-mt-0><img src=/by-sa.svg alt="Creative Commons License" width=80 height=15></a></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Company</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/company/>About GitLab</a></li><li><a href=https://about.gitlab.com/pricing/>View pricing</a></li><li><a href=https://about.gitlab.com/free-trial/>Try GitLab for free</a></li></ul></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Feedback</div><ul class="gl-list-none gl-p-0"><li><a href=https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/ci/testing/code_coverage/cobertura.md>View page source</a></li><li><a href=https://gitlab.com/-/ide/project/gitlab-org/gitlab/edit/master/-/doc/ci/testing/code_coverage/cobertura.md>Edit in web IDE</a></li><li><a href=https://about.gitlab.com/community/contribute/>Contribute to GitLab</a></li><li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Documentation">Suggest updates</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Help & Community</div><ul class="gl-list-none gl-p-0"><li><a href=https://university.gitlab.com/pages/certifications>Get certified</a></li><li><a href=https://about.gitlab.com/support/>Get support</a></li><li><a href="https://forum.gitlab.com/new-topic?title=topic%20title&amp;body=topic%20body&amp;tags=docs-feedback">Post on the GitLab forum</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Resources</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/terms/>Terms</a></li><li><a href=https://about.gitlab.com/privacy/>Privacy statement</a></li><li><a href=/legal/use_generative_ai/>Use of generative AI</a></li><li><a href=/legal/licensing_policy/>Acceptable use of user licenses</a></li><li><button id=ot-sdk-btn class=ot-sdk-show-settings></button></li></ul></div></div></section></footer><script type=module src=/vite/main.js></script><script async>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NJXWQL")</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJXWQL" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script async>(function(){var e,t=!1;function n(){t===!1&&(t=!0,Munchkin.init("194-VVC-221",{useBeaconAPI:!0}))}e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src="https://munchkin.marketo.net/munchkin.js",e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&n()},e.onload=n,document.getElementsByTagName("head")[0].appendChild(e)})()</script><script async src=https://cdn.bizible.com/scripts/bizible.js></script><script async>_linkedin_partner_id="30694",window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[],window._linkedin_data_partner_ids.push(_linkedin_partner_id),function(){var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",t.parentNode.insertBefore(e,t)}()</script><noscript><img height=1 width=1 style=display:none alt src="https://dc.ads.linkedin.com/collect/?pid=30694&fmt=gif"></noscript></body></html>