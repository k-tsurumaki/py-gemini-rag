<!doctype html><html lang=en-us dir=ltr><head><script src=https://cdn.cookielaw.org/consent/7f944245-c5cd-4eed-a90e-dd955adfdd08/OtAutoBlock.js></script><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js data-domain-script=7f944245-c5cd-4eed-a90e-dd955adfdd08></script><script type=text/javascript>function OptanonWrapper(){}</script><script>const callback=(e)=>{for(const t of e)t.type==="childList"&&t.addedNodes.forEach(e=>{e.nodeName==="IMG"&&document.querySelectorAll('img:not([src^="http"]):not([data-ot-ignore])').forEach(e=>{e.setAttribute("data-ot-ignore","")})})},config={attributes:!0,childList:!0,subtree:!0,attributeFilter:["src"]},observer=new MutationObserver(callback);observer.observe(document.documentElement,config)</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","GTM-NJXWQL"),gtag("consent","default",{analytics_storage:"granted",ad_storage:"granted",functionality_storage:"granted",wait_for_update:500}),gtag("consent","default",{analytics_storage:"denied",ad_storage:"denied",functionality_storage:"denied",region:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","GB","PE","RU"],wait_for_update:500}),window.geofeed=e=>{dataLayer.push({event:"OneTrustCountryLoad",oneTrustCountryId:e.country.toString()})};const json=document.createElement("script");json.setAttribute("src","https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed"),document.head.appendChild(json)</script><meta charset=utf-8><meta name=viewport content="width=device-width"><title>CI/CD components | GitLab Docs</title><link rel=icon href=/favicon.ico sizes=any><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=manifest href=/manifests/manifest.webmanifest><meta name=theme-color content="#FC6D26"><link rel=canonical href=https://docs.gitlab.com/ci/components/><meta name=description content="Reusable, versioned CI/CD components for pipelines."><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"GitLab Docs","url":"https://docs.gitlab.com/"}</script><link rel=preload href=/gitlab_ui/fonts/GitLabSans.woff2 type=font/woff2 as=font crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabSans-Italic.woff2 crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabMono.woff2 crossorigin><link rel=stylesheet href=/gitlab_ui/ui/index.css><link rel=stylesheet href=/vite/main.css><link rel=stylesheet href=/css/syntax-dark.min.css id=syntax-dark-theme><link rel=stylesheet href=/css/syntax-light.min.css id=syntax-light-theme><script>(function(){const p="gitlab-docs-theme",g="gitlab-docs-layout",e={LIGHT:"light",DARK:"dark",AUTO:"auto"},i={FIXED:"fixed",FLUID:"fluid"},d="light",f="fixed";let r=!1;const t=localStorage?.getItem(p),m=localStorage?.getItem(g),l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.DARK:e.LIGHT;function h(){return t&&(t===e.LIGHT||t===e.DARK)?t:(t===e.AUTO&&(r=!0),l||d)}function u(){return m===i.FLUID?i.FLUID:f}const s=h(),c=u(),n=document.documentElement;n.classList.remove("gl-dark","gl-light"),n.classList.add(s===e.DARK?"gl-dark":"gl-light"),c===i.FLUID&&(n.classList.add("fluid"),n.classList.remove("fixed"));const a=document.getElementById("syntax-dark-theme"),o=document.getElementById("syntax-light-theme");a&&o&&(s===e.DARK?(a.disabled=!1,o.disabled=!0):(a.disabled=!0,o.disabled=!1)),window.__initialTheme=r?e.AUTO:s,window.__initialLayout=c})()</script><meta name=gitlab_docs_base_url content="/"><meta name=gitlab_docs_page_owner data-stage=Verify data-group="Pipeline Authoring"><meta class=elastic name=gitlab_docs_version content="18.6"><meta class=elastic name=gitlab_docs_section content="use_gitlab"><meta class=elastic name=gitlab_docs_breadcrumbs content="Use GitLab › Use CI/CD to build your application"><script>window.pageMetadata={trail:[{path:"user/",title:"Use GitLab"},{path:"topics/build_your_application/",title:"Use CI/CD to build your application"},{path:"ci/components/",title:"CI/CD components"}]}</script><meta name=gitlab_docs_legacy_path content="/ee/ci/components/index.html"><meta name=gitlab_docs_hugo_launch_version content="17.9"><script>const ELASTIC_CLOUD_ID="gitlab-docs-website:dXMtY2VudHJhbDEuZ2NwLmNsb3VkLmVzLmlvJDQwZTQyYTQzMTJiZjQyMzNiMzBiZTg0MTU5YjlkNmE1JGMxODg4Y2U5OTY0YzQzZjc5ZjQ1YTk5NDZmMjI0ODg0",ELASTIC_KEY="cDFpLWJaSUJXVHBqWWI4VGZKN3M6eENBSjl4WDRSRnlCUW94ajRQazhLQQ==",ELASTIC_INDEX="search-gitlab-docs-hugo"</script><script type=module src=/vite/elastic_search.js></script><script type=module src=/vite/history.js></script><script>const FS_IDENTIFIER="AIzaSyCLdi3jHHjkmLji9D8uj_RNPMHcdrYoIW4",RECAPTCHA_PUBLIC_KEY="6Le4R3UrAAAAALsIlK_siq0_UhPD-0rD-ImF1gfO"</script><meta name=google-site-verification content="AcGSBNaKDWnLgcYotlVibGy6STm2Y6_KJSaRxrA90xY"><meta name=google-site-verification content="6eFQOFLxYAer08ROqc3I-SAi44F9NmvH7PrUUBR3oCI"><meta name=google-site-verification content="xAUTWp3CDg-tU1LVVwsM9OrVhLR7L3SmiyKzkOuPNos"><meta name=google-site-verification content="F0zzwaMpiyWFcPQ1Lqu18qN3EnuQsqFXbySl_29yvHs"><meta name=google-site-verification content="nwo1bVaU0t9TZxZyM-aOI6-CofaH9GRL-uBPbdREWgc"><meta name=google-site-verification content="rWoHrtHEmIX0t28oOb1ZEDMYZb_EZA6rr6ZOl5otEPI"><meta name=google-site-verification content="fSxr8-uslxcuFL0N-oECp3Tm0RPNEGX97wbdayKOEL8"><meta name=google-site-verification content="ISxyLVnZqU8oY3jwrK7EO9o-2DOTvLJwPse7bZz6yhs"><meta name=google-site-verification content="x1WspIvz3ZHqS0gezfX_P-qiRDOeP2Oyrd68zrU2ErI"><meta name=google-site-verification content="DfXB2Za52GT3zs_vuLIAL4Mi3M3K4qxXcg7MAs0CUqo"><meta name=google-site-verification content="BCEBC2LC7A1NzO9Com1oBrWK88tV_QXfUL0i9mwXPL0"><meta name=google-site-verification content="a2lNcHMorfS43aoISjZt5_BBPo-H1UaTKMQdBgZO9iY"><meta name=google-site-verification content="0s16pP9MelY6wDHRf-izXb5pwLU01IogP-Uc_e8f3GU"><meta name=google-site-verification content="H474RNof35Xp8fLg02fZbg9Dzxdtfch6vtcjzpmUraU"><meta name=google-site-verification content="E0FlhpgBGeE7d1pQ6amdcIWPMDLDeu15-HLQVoDTguE"><meta name=google-site-verification content="opQd7_rXtPy-pX5CO_XZiztzeQEsXnB3j6Y1_dZAizA"><meta name=google-site-verification content="06Kq4AoXdmBOjOAkbPvnYGtSxnn4Q9QBqEO55PLlw5c"><meta name=google-site-verification content="djBBokRFSWV_VRlSE51V5TZSPzMC6hml5l-Sb22WglE"><meta name=google-site-verification content="UOW6nOsvbyMeIySuamzbws4kNC_WqehamWfoxxtKjZ8"><meta name=google-site-verification content="hXU1Gsdba74DUbvbdUHRl9o0cQeiwXIhAdIllOG6p8E"><meta name=google-site-verification content="YFeHIAPk9lE76ubVMeq4P0sQVnzo2-a4k1oU_bPY8yE"><meta name=google-site-verification content="h8ICI4eDkvXmYaGDuLTLoWuXnLn-KUkChqYB-roMRsw"><meta name=google-site-verification content="9QW7feFNlCpMLPm7vAWEU-v14vdzb0Bb3RAk-8e_a18"><meta name=google-site-verification content="26kXLBOjaYRb2UwzWTDl1I1nzA2NxMunhp7SUtxGV6E"><meta name=google-site-verification content="jr3C8t6vKGPyN9GV3esdHY_xGYyQaUNznIl-Un2RObA"><meta name=google-site-verification content="WdlBpRU0ec1ieKqrTY_772OhG23FY45VQ4Lv9DyLJ_Y"><meta name=google-site-verification content="n9i6B9q4Xjr_etK2nQGZH1msoo7vIv9SXV8SQLOUA7c"><meta name=zd-site-verification content="ony3w7hk1vs6tfyrc51mld"><meta name=zd-site-verification content="gtuq65qdzt6n31viazi6hj"></head><body data-elastic-exclude><nav data-ga-section=header data-elastic-exclude><div class="header-wrapper gl-w-full gl-fixed gl-z-4"><div class=header><div class="header-top gl-flex gl-items-center"><a href=#skipTarget class="gl-sr-only skip-link">Skip to main content</a>
<a class=navbar-logo href=/><span class=gl-sr-only>Go to GitLab Docs homepage</span></a><div class="mobile-header gl-w-full gl-text-base"><div class=mobile-header-overlay></div><div class="header-right collapse gl-z-4 gl-border-t lg:gl-border-0"><div class="search-wrapper lg:gl-ml-4 lg:gl-grow"><div class="js-elastic-search-form gl-spinner-container"><span role=status aria-label=Loading class="gl-ml-3 gl-align-text-bottom! gl-spinner gl-spinner gl-spinner-sm"></span></div></div><div class="gl-flex gl-flex-col gl-gap-3 gl-mt-5 lg:gl-mt-0 lg:gl-flex-row lg:gl-items-center gl-ml-auto"><a class="whats-new gl-button btn-default btn-default-tertiary gl-hidden lg:gl-block" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a><div data-vue-app=versions-menu></div><div data-vue-app=appearance-toggle class="gl-hidden lg:gl-block"></div><div class="gl-flex gl-justify-evenly lg:gl-justify-normal gl-items-center gl-gap-5"><a class="whats-new gl-button btn-default btn-default-tertiary gl-w-full lg:gl-hidden hover:gl-no-underline" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a>
<a class="free-trial-btn cta-button gl-button btn-confirm gl-w-full hover:gl-no-underline" href="https://gitlab.com/-/trial_registrations/new?glm_source=docs.gitlab.com&amp;amp;glm_content=navigation-cta-docs" target=_blank rel="noopener noreferrer" role=button>Get free trial</a></div></div></div></div><button class="navbar-toggle gl-button btn-default lg:gl-hidden" data-toggle=collapse data-target=.header-right>
<span class=navbar-toggle-icon></span>
<span class=gl-sr-only>Toggle menu</span></button></div><div class="header-bottom gl-border-t lg:gl-border-b"><ul class="subheader-menu gl-hidden lg:gl-flex gl-list-none gl-text-base gl-space-x-5 gl-py-4 gl-pl-0 gl-mb-0"><li><a href=/user/ class=active>Use GitLab</a></li><li><a href=/user/gitlab_duo/>GitLab Duo</a></li><li><a href=/api/>Extend</a></li><li><a href=/install/>Install</a></li><li><a href=/administration/>Administer</a></li><li><a href=/subscriptions/>Subscribe</a></li><li><a href=/development/>Contribute</a></li><li><a href=/solutions/>Solutions</a></li></ul></div></div></div></nav><main data-ga-section=content-body><div id=js-version-banner></div><div class="template-single gl-flex gl-h-full"><div class=side-nav data-ga-section=side-nav data-vue-app=sidebar-menu></div><div data-pagefind-body class=main-content><div class=docs-content><div class="gl-flex gl-h-5 gl-items-center gl-my-6"><div data-vue-app=open-sidebar></div><div data-vue-app=breadcrumb-nav></div></div><hr class="gl-border-t gl-px-5 lg:gl-hidden"><div class="gl-pt-4 gl-mt-4 lg:gl-pt-0 lg:gl-mt-0 lg:gl-border-t-0"><h1 id=skipTarget class=gl-mb-6>CI/CD components</h1></div><div data-elastic-include><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Free, Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li></ul></div><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-1 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-1>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-1 class="collapsible-list collapse" aria-hidden=true><ul><li>Introduced as an <a href=/policy/development_stages_support/#experiment>experimental feature</a> in GitLab 16.0, <a href=/administration/feature_flags/>with a flag</a> named <code>ci_namespace_catalog_experimental</code>. Disabled by default.</li><li><a href=https://gitlab.com/groups/gitlab-org/-/epics/9897>Enabled on GitLab.com and GitLab Self-Managed</a> in GitLab 16.2.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/394772>Feature flag <code>ci_namespace_catalog_experimental</code> removed</a> in GitLab 16.3.</li><li><a href=https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/130824>Moved</a> to <a href=/policy/development_stages_support/#beta>beta</a> in GitLab 16.6.</li><li><a href=https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/134062>Made generally available</a> in GitLab 17.0.</li></ul></div></div><p>A CI/CD component is a reusable single pipeline configuration unit. Use components
to create a small part of a larger pipeline, or even to compose a complete pipeline configuration.</p><p>A component can be configured with <a href=/ci/inputs/>input parameters</a> for more
dynamic behavior.</p><p>CI/CD components are similar to the other kinds of <a href=/ci/yaml/includes/>configuration added with the <code>include</code> keyword</a>,
but have several advantages:</p><ul><li>Components can be listed in the <a href=/ci/components/#cicd-catalog>CI/CD Catalog</a>.</li><li>Components can be released and used with a specific version.</li><li>Multiple components can be defined in the same project and versioned together.</li></ul><p>Instead of creating your own components, you can also search for published components
that have the functionality you need in the <a href=/ci/components/#cicd-catalog>CI/CD Catalog</a>.</p><p><i class="fa fa-youtube-play youtube" aria-hidden=true></i>
For an introduction and hands-on examples, see <a href="https://www.youtube.com/watch?v=-yvfSFKAgbA">Efficient DevSecOps workflows with reusable CI/CD components</a>.</p><p>For common questions and additional support, see the <a href=https://about.gitlab.com/blog/2024/08/01/faq-gitlab-ci-cd-catalog/>FAQ: GitLab CI/CD Catalog</a>
blog post.</p><h2 id=component-project>Component project</h2><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-2 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-2>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-2 class="collapsible-list collapse" aria-hidden=true><ul><li>The maximum number of components per project <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/436565>changed</a> from 10 to 30 in GitLab 16.9.</li><li>The maximum number of components per project <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/569158>changed</a> from 30 to 100 in GitLab 18.5.</li></ul></div></div><p>A component project is a GitLab project with a repository that hosts one or more components.
All components in the project are versioned together, with a maximum of 30 components per project.</p><p>If a component requires different versioning from other components, the component should be moved
to a dedicated component project.</p><h3 id=create-a-component-project>Create a component project</h3><p>To create a component project, you must:</p><ol><li><p><a href=/user/project/#create-a-blank-project>Create a new project</a> with a <code>README.md</code> file:</p><ul><li>Ensure the description gives a clear introduction to the component.</li><li>Optional. After the project is created, you can <a href=/user/project/working_with_projects/#add-a-project-avatar>add a project avatar</a>.</li></ul><p>Components published to the <a href=/ci/components/#cicd-catalog>CI/CD catalog</a> use both the description and avatar when displaying the component project&rsquo;s summary.</p></li><li><p>Add a YAML configuration file for each component, following the <a href=/ci/components/#directory-structure>required directory structure</a>.
For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>stage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>component-job</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo job 1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>$[[ inputs.stage ]]</span></span></span></code></pre></div></div></li></ol><p>You can <a href=/ci/components/#use-a-component>use the component</a> immediately, but you might want to consider
publishing the component to the <a href=/ci/components/#cicd-catalog>CI/CD catalog</a>.</p><h3 id=directory-structure>Directory structure</h3><p>The repository must contain:</p><ul><li>A <code>README.md</code> Markdown file documenting the details of all the components in the repository.</li><li>A top level <code>templates/</code> directory that contains all the component configurations.
In this directory, you can:<ul><li>Use single files ending in <code>.yml</code> for each component, like <code>templates/secret-detection.yml</code>.</li><li>Create subdirectories with a <code>template.yml</code> for each component,
like <code>templates/secret-detection/template.yml</code>. Only the <code>template.yml</code> file is used by other projects
using the component. Other files in these directories are not released with the component,
but can be used for things like tests or building container images.</li></ul></li></ul><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>Optionally, each component can also have its own <code>README.md</code> file that provides more detailed information, and can be linked from the top-level <code>README.md</code> file. This helps to provide a better overview of your component project and how to use it.</p></div></div><p>You should also:</p><ul><li>Configure the project&rsquo;s <code>.gitlab-ci.yml</code> to <a href=/ci/components/#test-the-component>test the components</a>
and <a href=/ci/components/#publish-a-new-release>release new versions</a>.</li><li>Add a <code>LICENSE.md</code> file with a license of your choice that covers the usage of your component.
For example the <a href=https://opensource.org/license/mit>MIT</a> or <a href=https://www.apache.org/licenses/LICENSE-2.0#apply>Apache 2.0</a>
open source licenses.</li></ul><p>For example:</p><ul><li><p>If the project contains a single component, the directory structure should be similar to:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=plaintext class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>├── templates/
</span></span><span class=line><span class=cl>│   └── my-component.yml
</span></span><span class=line><span class=cl>├── LICENSE.md
</span></span><span class=line><span class=cl>├── README.md
</span></span><span class=line><span class=cl>└── .gitlab-ci.yml</span></span></code></pre></div></div></li><li><p>If the project contains multiple components, then the directory structure should be similar to:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=plaintext class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>├── templates/
</span></span><span class=line><span class=cl>│   ├── my-component.yml
</span></span><span class=line><span class=cl>│   └── my-other-component/
</span></span><span class=line><span class=cl>│       ├── template.yml
</span></span><span class=line><span class=cl>│       ├── Dockerfile
</span></span><span class=line><span class=cl>│       └── test.sh
</span></span><span class=line><span class=cl>├── LICENSE.md
</span></span><span class=line><span class=cl>├── README.md
</span></span><span class=line><span class=cl>└── .gitlab-ci.yml</span></span></code></pre></div></div><p>In this example:</p><ul><li>The <code>my-component</code> component&rsquo;s configuration is defined in a single file.</li><li>The <code>my-other-component</code> component&rsquo;s configuration contains multiple files in a directory.
Only the <code>template.yml</code> file can be used by other projects using the component.</li></ul></li></ul><h2 id=use-a-component>Use a component</h2><p>Prerequisites:</p><p>If you are a member of a parent group that contains the current group or project:</p><ul><li>You must have the minimum role set by the visibility level of the project&rsquo;s parent group. For example, you must have at least the Reporter role if a parent project is set to <strong>Private</strong>.</li></ul><p>To add a component to a project&rsquo;s CI/CD configuration, use the <a href=/ci/yaml/#includecomponent><code>include: component</code></a>
keyword. The component reference is formatted as <code>&lt;fully-qualified-domain-name>/&lt;project-path>/&lt;component-name>@&lt;specific-version></code>,
for example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>component</span><span class=p>:</span><span class=w> </span><span class=l>$CI_SERVER_FQDN/my-org/security-components/secret-detection@1.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>build</span></span></span></code></pre></div></div><p>In this example:</p><ul><li><code>$CI_SERVER_FQDN</code> is a <a href=/ci/variables/predefined_variables/>predefined variable</a>
for the fully qualified domain name (FQDN) matching the GitLab host.
You can only reference components in the same GitLab instance as your project.</li><li><code>my-org/security-components</code> is the full path of the project containing the component.</li><li><code>secret-detection</code> is the component name that is defined as either a single file <code>templates/secret-detection.yml</code>
or as a directory <code>templates/secret-detection/</code> containing a <code>template.yml</code>.</li><li><code>1.0.0</code> is the <a href=/ci/components/#component-versions>version</a> of the component.</li></ul><p>Pipeline configuration and component configuration are not processed independently.
When a pipeline starts, any included component configuration <a href=/ci/yaml/includes/#merge-method-for-include>merges</a>
into the pipeline&rsquo;s configuration. If your pipeline and the component both contain configuration with the same name,
they can interact in unexpected ways.</p><p>For example, two jobs with the same name would merge together into a single job.
Similarly, a component using <code>extends</code> for configuration with the same name as a job in your pipeline
could extend the wrong configuration. Make sure your pipeline and the component do not share
any configuration with the same name, unless you intend to <a href=/ci/yaml/includes/#override-included-configuration-values>override</a>
the component&rsquo;s configuration.</p><p>To use GitLab.com components on a GitLab Self-Managed instance, you must
<a href=/ci/components/#use-a-gitlabcom-component-on-gitlab-self-managed>mirror the component project</a>.</p><div class="alert alert-type-warning gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>If a component requires the use of tokens, passwords, or other sensitive data to function,
be sure to audit the component&rsquo;s source code to verify that the data is only used to
perform actions that you expect and authorize. You should also use tokens and secrets
with the minimum permissions, access, or scope required to complete the action.</p></div></div><h3 id=component-versions>Component versions</h3><p>In order of highest priority first, the component version can be:</p><ul><li>A commit SHA, for example <code>e3262fdd0914fa823210cdb79a8c421e2cef79d8</code>.</li><li>A tag, for example: <code>1.0.0</code>. If a tag and commit SHA exist with the same name,
the commit SHA takes precedence over the tag. Components released to the CI/CD Catalog
must be tagged with a <a href=/ci/components/#semantic-versioning>semantic version</a>.</li><li>A branch name, for example <code>main</code>. If a branch and tag exist with the same name,
the tag takes precedence over the branch.</li><li><code>~latest</code> or a partial semantic version, which selects the latest version within the specified pattern
published in the CI/CD Catalog. Use <code>~latest</code> only if you want to use the absolute
latest version at all times, which could include breaking changes. <code>~latest</code>
does not include pre-releases, for example <code>1.0.1-rc</code>, which are not considered
production-ready.</li></ul><p>You can use any version supported by the component, but using a version published
to the CI/CD catalog is recommended. The version referenced with a commit SHA or branch name
might not be published in the CI/CD catalog, but could be used for testing.</p><h4 id=partial-semantic-versions>Partial semantic versions</h4><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-5 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-5>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-5 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/450835>Introduced</a> in GitLab 16.11</li></ul></div></div><p>You can use partial semantic version numbers and the keyword <code>~latest</code> when referencing
a CI/CD catalog component to select the latest published version that matches your specification.</p><p>These formats only work with published CI/CD catalog components, not with regular project components.
This ensures that when you use formats like <code>1.2</code> or <code>~latest</code>, you only pull components that have been validated and published to the catalog, rather than potentially untested code from any repository.</p><p>This approach offers significant benefits for both consumers and authors of components:</p><ul><li>For users, using partial versions is an excellent way to automatically receive
minor or patch updates without risking breaking changes from major releases. This ensures
your pipelines stay up-to-date with the latest bug fixes and security patches
while maintaining stability.</li><li>For component authors, partial version support allows major version releases
without risk of immediately breaking existing pipelines. Users who have
specified partial versions continue to use the latest compatible minor or patch version,
giving them time to update their pipelines at their own pace.</li></ul><p>Use:</p><ul><li><code>1.2</code> to select the latest <code>1.2.*</code> version</li><li><code>1</code> to select the latest <code>1.*.*</code> version</li><li><code>~latest</code> to select the latest released version</li></ul><p>For example, a component has versions: <code>1.0.0</code>, <code>1.1.0</code>, <code>1.1.1</code>, <code>1.2.0</code>, <code>2.0.0</code>, <code>2.0.1</code>, <code>2.1.0</code></p><p>When referencing the component:</p><ul><li><code>1</code> selects <code>1.2.0</code></li><li><code>1.1</code> selects <code>1.1.1</code></li><li><code>~latest</code> selects <code>2.1.0</code></li></ul><p>Pre-release versions are never fetched when using partial version selection. To fetch
a pre-release version, specify the full version, for example <code>1.0.1-rc</code>.</p><h3 id=use-component-context-in-components>Use component context in components</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-6 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-6>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-6 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/438275>Introduced</a> in GitLab 18.6 as a <a href=/policy/development_stages_support/#beta>beta</a> <a href=/administration/feature_flags/>with a flag</a> named <code>ci_component_context_interpolation</code>. Enabled by default.</li></ul></div></div><p>Components can access metadata about themselves with a component context <a href=/ci/yaml/expressions/>CI/CD expression</a>.
Use this expression in component templates to reference the version, commit SHA, and other
metadata dynamically.</p><p>To use component context in a component, you must:</p><ol><li>Declare which component context fields the component needs in the <a href=/ci/yaml/#speccomponent><code>spec:component</code></a> header.
<code>spec:component</code> supports <code>name</code>, <code>sha</code>, <code>version</code>, and <code>reference</code> fields.</li><li>Reference the context fields using the CI/CD expression <code>$[[ component.field-name ]]</code> in the component template.</li></ol><p>For example, a component that references a Docker image built with the same version:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>component</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>name, version, reference]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image_tag</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=l>latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>build-image</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>registry.example.com/$[[ component.name ]]:$[[ component.version ]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Building with component version $[[ component.version ]]&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Component reference: $[[ component.reference ]]&#34;</span></span></span></code></pre></div></div><p>You can also use component context to <a href=/ci/components/examples/#use-component-context-to-reference-versioned-resources>reference versioned resources</a>.</p><h2 id=write-a-component>Write a component</h2><p>This section describes some best practices for creating high quality component projects.</p><h3 id=manage-dependencies>Manage dependencies</h3><p>While it&rsquo;s possible for a component to use other components in turn, make sure to carefully select the dependencies. To manage dependencies, you should:</p><ul><li>Keep dependencies to a minimum. A small amount of duplication is usually better than having dependencies.</li><li>Rely on local dependencies whenever possible. For example, using <a href=/ci/yaml/#includelocal><code>include:local</code></a> is a good way
to ensure the same Git SHA is used across multiple files.</li><li>When depending on components from other projects, pin their version to a release from the catalog rather than using moving target
versions such as <code>~latest</code> or a Git reference. Using a release or Git SHA guarantees that you are fetching the same revision
all the time and that consumers of your component get consistent behavior.</li><li>Update your dependencies regularly by pinning them to newer releases. Then publish a new release of your components with updated
dependencies.</li><li>Evaluate the permissions of dependencies, and use dependencies that require the least amount of permissions.
For example, if you need to build an image, consider using <a href=https://buildah.io/>Buildah</a> instead of Docker, so that you don&rsquo;t
require a Runner with a privileged Docker daemon.</li></ul><h3 id=write-a-clear-readmemd>Write a clear <code>README.md</code></h3><p>Each component project should have clear and comprehensive documentation. To
write a good <code>README.md</code> file:</p><ul><li>Start with a summary of the capabilities that the components provide.</li><li>If the project contains multiple components, use a <a href=/user/markdown/#table-of-contents>table of contents</a>
to help users quickly jump to a specific component&rsquo;s details.</li><li>Add a <code>## Components</code> section with sub-sections like <code>### Component A</code> for each component.</li><li>In each component section:<ul><li>Describe what the component does.</li><li>Add at least one YAML example showing how to use it.</li><li>Use <a href=/ci/yaml/#specinputsdescription><code>spec:inputs:description</code></a> to
document any variables or secrets the component uses.</li><li>Do not duplicate input documentation in the <code>README</code>. Inputs appear automatically on the component page.
Instead, link to the published component.</li></ul></li><li>Add a <code>## Contribute</code> section if contributions are welcome.</li></ul><p>If a component needs more instructions, add additional documentation in a Markdown file
in the component directory and link to it from the main <code>README.md</code> file. For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=plaintext class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>README.md    # with links to the specific docs.md
</span></span><span class=line><span class=cl>templates/
</span></span><span class=line><span class=cl>├── component-1/
</span></span><span class=line><span class=cl>│   ├── template.yml
</span></span><span class=line><span class=cl>│   └── docs.md
</span></span><span class=line><span class=cl>└── component-2/
</span></span><span class=line><span class=cl>    ├── template.yml
</span></span><span class=line><span class=cl>    └── docs.md</span></span></code></pre></div></div><p>For an example, see the <a href=https://gitlab.com/components/aws/-/blob/main/README.md>AWS components README</a>.</p><h3 id=test-the-component>Test the component</h3><p>Testing CI/CD components as part of the development workflow is strongly recommended
and helps ensure consistent behavior.</p><p>Test changes in a CI/CD pipeline (like any other project) by creating a <code>.gitlab-ci.yml</code>
in the root directory. Make sure to test both the behavior and potential side-effects
of the component. You can use the <a href=/api/rest/>GitLab API</a> if needed.</p><p>For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># include the component located in the current project from the current SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>component</span><span class=p>:</span><span class=w> </span><span class=l>$CI_SERVER_FQDN/$CI_PROJECT_PATH/my-component@$CI_COMMIT_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stages</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>build, test, release]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Check if `component job of my-component` is added.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># This example job could also test that the included component works as expected.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># You can inspect data generated by the component, use GitLab API endpoints, or third-party tools.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>ensure-job-added</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>badouralix/curl-jq</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Replace &#34;component job of my-component&#34; with the job name in your component.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      route=&#34;${CI_API_V4_URL}/projects/${CI_PROJECT_ID}/pipelines/${CI_PIPELINE_ID}/jobs&#34;
</span></span></span><span class=line><span class=cl><span class=sd>      count=`curl --silent --header &#34;JOB-TOKEN: ${CI_JOB_TOKEN}&#34; &#34;$route&#34; | jq &#39;map(select(.name | contains(&#34;component job of my-component&#34;))) | length&#39;`
</span></span></span><span class=line><span class=cl><span class=sd>      if [ &#34;$count&#34; != &#34;1&#34; ]; then
</span></span></span><span class=line><span class=cl><span class=sd>        exit 1; else
</span></span></span><span class=line><span class=cl><span class=sd>        echo &#34;Component Job present&#34;
</span></span></span><span class=line><span class=cl><span class=sd>      fi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># If the pipeline is for a new tag with a semantic version, and all previous jobs succeed,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># create the release.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>create-release</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>release</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>registry.gitlab.com/gitlab-org/cli:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;Creating release $CI_COMMIT_TAG&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>$CI_COMMIT_TAG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>release</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tag_name</span><span class=p>:</span><span class=w> </span><span class=l>$CI_COMMIT_TAG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Release $CI_COMMIT_TAG of components repository $CI_PROJECT_PATH&#34;</span></span></span></code></pre></div></div><p>After committing and pushing changes, the pipeline tests the component, then creates
a release if the earlier jobs pass.</p><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>Authentication is necessary if the project is private.</p></div></div><h4 id=test-a-component-against-sample-files>Test a component against sample files</h4><p>In some cases, components require source files to interact with. For example, a component
that builds Go source code likely needs some samples of Go to test against. Alternatively,
a component that builds Docker images likely needs some sample Dockerfiles to test against.</p><p>You can include sample files like these directly in the component project, to be used
during component testing.</p><p>You can learn more in <a href=/ci/components/examples/#test-a-component>examples for testing a component</a>.</p><h3 id=avoid-hard-coding-instance-or-project-specific-values>Avoid hard-coding instance or project-specific values</h3><p>When <a href=/ci/components/#use-a-component>using another component</a> in your component, use <code>$CI_SERVER_FQDN</code>
instead of your instance&rsquo;s Fully Qualified Domain Name (like <code>gitlab.com</code>).</p><p>When accessing the GitLab API in your component, use the <code>$CI_API_V4_URL</code> instead of the
full URL and path for your instance (like <code>https://gitlab.com/api/v4</code>).</p><p>These <a href=/ci/variables/predefined_variables/>predefined variables</a>
ensure that your component also works when used on another instance, for example when using
<a href=/ci/components/#use-a-gitlabcom-component-on-gitlab-self-managed>a GitLab.com component on a GitLab Self-Managed instance</a>.</p><h3 id=do-not-assume-api-resources-are-always-public>Do not assume API resources are always public</h3><p>Ensure that the component and its testing pipeline work also <a href=/ci/components/#use-a-gitlabcom-component-on-gitlab-self-managed>on GitLab Self-Managed</a>.
While some API resources of public projects on GitLab.com could be accessed via unauthenticated requests
on a GitLab Self-Managed instance a component project could be mirrored as private or internal project.</p><p>It&rsquo;s important that an access token can optionally be provided via inputs or variables to
authenticate requests on GitLab Self-Managed instances.</p><h3 id=avoid-using-global-keywords>Avoid using global keywords</h3><p>Avoid using <a href=/ci/yaml/#global-keywords>global keywords</a> in a component.
Using these keywords in a component affects all jobs in a pipeline, including jobs
directly defined in the main <code>.gitlab-ci.yml</code> or in other included components.</p><p>As an alternative to global keywords:</p><ul><li>Add the configuration directly to each job, even if it creates some duplication
in the component configuration.</li><li>Use the <a href=/ci/yaml/#extends><code>extends</code></a> keyword in the component, but use
unique names that reduce the risk of naming conflicts when the component is merged
into the configuration.</li></ul><p>For example, avoid using the <code>default</code> global keyword:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Not recommended</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>default</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ruby:3.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rspec-1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>bundle exec rspec dir1/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rspec-2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>bundle exec rspec dir2/</span></span></span></code></pre></div></div><p>Instead, you can:</p><ul><li><p>Add the configuration to each job explicitly:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>rspec-1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ruby:3.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>bundle exec rspec dir1/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rspec-2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ruby:3.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>bundle exec rspec dir2/</span></span></span></code></pre></div></div></li><li><p>Use <code>extends</code> to reuse configuration:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>.rspec-image</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ruby:3.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rspec-1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extends</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>.rspec-image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>bundle exec rspec dir1/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rspec-2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extends</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>.rspec-image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>bundle exec rspec dir2/</span></span></span></code></pre></div></div></li></ul><h3 id=replace-hardcoded-values-with-inputs>Replace hardcoded values with inputs</h3><p>Avoid using hardcoded values in CI/CD components. Hardcoded values might force
component users to need to review the component&rsquo;s internal details and adapt their pipeline
to work with the component.</p><p>A common keyword with problematic hard-coded values is <code>stage</code>. If a component job&rsquo;s
stage is hardcoded, all pipelines using the component <strong>must</strong> either define
the exact same stage, or <a href=/ci/yaml/includes/#override-included-configuration-values>override</a>
the configuration.</p><p>The preferred method is to use the <a href=/ci/inputs/><code>input</code> keyword</a> for dynamic
component configuration. The component user can specify the exact value they need.</p><p>For example, to create a component with <code>stage</code> configuration that can be defined by users:</p><ul><li><p>In the component configuration:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>stage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>unit-test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>$[[ inputs.stage ]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo unit tests</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>integration-test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>$[[ inputs.stage ]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo integration tests</span></span></span></code></pre></div></div></li><li><p>In a project using the component:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>stages</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>verify, release]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>component</span><span class=p>:</span><span class=w> </span><span class=l>$CI_SERVER_FQDN/myorg/ruby/test@1.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>verify</span></span></span></code></pre></div></div></li></ul><h4 id=define-job-names-with-inputs>Define job names with inputs</h4><p>Similar to the values for the <code>stage</code> keyword, you should avoid hard-coding job names
in CI/CD components. When your component&rsquo;s users can customize job names, they can prevent conflicts
with the existing names in their pipelines. Users could also include a component
multiple times with different input options by using different names.</p><p>Use <code>inputs</code> to allow your component&rsquo;s users to define a specific job name, or a prefix for the
job name. For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>job-prefix</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Define a prefix for the job name&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>job-name</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Alternatively, define the job&#39;s name&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>job-stage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s2>&#34;$[[ inputs.job-prefix ]]-scan-website&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>$[[ inputs.job-stage ]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>scan-website-1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s2>&#34;$[[ inputs.job-name ]]&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>$[[ inputs.job-stage ]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>scan-website-2</span></span></span></code></pre></div></div><h3 id=replace-custom-cicd-variables-with-inputs>Replace custom CI/CD variables with inputs</h3><p>When using CI/CD variables in a component, evaluate if the <code>inputs</code> keyword
should be used instead. Avoid asking users to define custom variables to configure
components when <code>inputs</code> is a better solution.</p><p>Inputs are explicitly defined in the component&rsquo;s <code>spec</code> section, and have better validation than variables.
For example, if a required input is not passed to the component, GitLab returns a pipeline error.
By contrast, if a variable is not defined, its value is empty, and there is no error.</p><p>For example, use <code>inputs</code> instead of variables to configure a scanner&rsquo;s output format:</p><ul><li><p>In the component configuration:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scanner-output</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=l>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>my-scanner</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>my-scan --output $[[ inputs.scanner-output ]]</span></span></span></code></pre></div></div></li><li><p>In the project using the component:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>component</span><span class=p>:</span><span class=w> </span><span class=l>$CI_SERVER_FQDN/path/to/project/my-scanner@1.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scanner-output</span><span class=p>:</span><span class=w> </span><span class=l>yaml</span></span></span></code></pre></div></div></li></ul><p>In other cases, CI/CD variables might still be preferred. For example:</p><ul><li>Use <a href=/ci/variables/predefined_variables/>predefined variables</a> to automatically configure
a component to match a user&rsquo;s project.</li><li>Ask users to store sensitive values as <a href=/ci/variables/#define-a-cicd-variable-in-the-ui>masked or protected CI/CD variables in project settings</a>.</li></ul><h2 id=cicd-catalog>CI/CD Catalog</h2><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Free, Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li></ul></div><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-9 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-9>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-9 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/407249>Introduced</a> as an <a href=/policy/development_stages_support/#experiment>experiment</a> in GitLab 16.1.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/432045>Moved</a> to <a href=/policy/development_stages_support/#beta>beta</a> in GitLab 16.7.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/454306>Made Generally Available</a> in GitLab 17.0.</li></ul></div></div><p>The <a href=https://gitlab.com/explore/catalog>CI/CD Catalog</a> is a list of projects with published CI/CD components you can use
to extend your CI/CD workflow.</p><p>Anyone can <a href=/ci/components/#create-a-component-project>create a component project</a> and add it to
the CI/CD Catalog, or contribute to an existing project to improve the available components.</p><p>For a click-through demo, see <a href=https://gitlab.navattic.com/cicd-catalog>the CI/CD Catalog beta Product Tour</a>.</p><h3 id=view-the-cicd-catalog>View the CI/CD Catalog</h3><p>To access the CI/CD Catalog and view the published components that are available to you:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong>. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Explore</strong>.</li><li>Select <strong>CI/CD Catalog</strong>.</li></ol><p>Alternatively, if you are already in the <a href=/ci/pipeline_editor/>pipeline editor</a>
in your project, you can select <strong>CI/CD Catalog</strong>.</p><p>Visibility of components in the CI/CD catalog follows the component source project&rsquo;s
<a href=/user/public_access/>visibility setting</a>. Components with source projects set to:</p><ul><li>Private are visible only to users assigned at least the Guest role for the source component project. To use a component, you must have at least the Reporter role.</li><li>Internal are visible only to users logged into the GitLab instance.</li><li>Public are visible to anyone with access to the GitLab instance.</li></ul><h3 id=publish-a-component-project>Publish a component project</h3><p>To publish a component project in the CI/CD catalog, you must:</p><ol><li>Set the project as a catalog project.</li><li>Publish a new release.</li></ol><h4 id=set-a-component-project-as-a-catalog-project>Set a component project as a catalog project</h4><p>To make published versions of a component project visible in the CI/CD catalog,
you must set the project as a catalog project.</p><p>Prerequisites:</p><ul><li>You must have the Owner role for the project.</li></ul><p>To set the project as a catalog project:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Settings</strong> > <strong>General</strong>.</li><li>Expand <strong>Visibility, project features, permissions</strong>.</li><li>Turn on the <strong>CI/CD Catalog project</strong> toggle.</li></ol><p>The project only becomes findable in the catalog after you publish a new release.</p><p>To use automation to enable this setting, you can use the <a href=/api/graphql/reference/#mutationcatalogresourcescreate><code>mutationcatalogresourcescreate</code></a>
GraphQL endpoint. <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/463043>Issue 463043</a>
proposes to expose this in the REST API as well.</p><h4 id=publish-a-new-release>Publish a new release</h4><p>CI/CD components can be <a href=/ci/components/#use-a-component>used</a> without being listed in the CI/CD catalog.
However, publishing a component&rsquo;s releases in the catalog makes it discoverable to other users.</p><p>Prerequisites:</p><ul><li>You must have at least the Maintainer role for the project.</li><li>The project must:<ul><li>Be set as a <a href=/ci/components/#set-a-component-project-as-a-catalog-project>catalog project</a>.</li><li>Have a <a href=/user/project/working_with_projects/#edit-a-project>project description</a> defined.</li><li>Have a <code>README.md</code> file in the root directory for the commit SHA of the tag being released.</li><li>Have at least one <a href=/ci/components/#directory-structure>CI/CD component in the <code>templates/</code> directory</a>
for the commit SHA of the tag being released.</li></ul></li><li>You must use the <a href=/ci/yaml/#release><code>release</code> keyword</a> in a CI/CD job to create the release,
not the <a href=/api/releases/#create-a-release>Releases API</a>.</li></ul><p>To publish a new version of the component to the catalog:</p><ol><li><p>Add a job to the project&rsquo;s <code>.gitlab-ci.yml</code> file that uses the <code>release</code>
keyword to create the new release when a tag is created.
You should configure the tag pipeline to <a href=/ci/components/#test-the-component>test the components</a> before
running the release job. For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>create-release</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>release</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>registry.gitlab.com/gitlab-org/cli:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;Creating release $CI_COMMIT_TAG&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>$CI_COMMIT_TAG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>release</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tag_name</span><span class=p>:</span><span class=w> </span><span class=l>$CI_COMMIT_TAG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Release $CI_COMMIT_TAG of components in $CI_PROJECT_PATH&#34;</span></span></span></code></pre></div></div></li><li><p>Create a <a href=/user/project/repository/tags/#create-a-tag>new tag</a> for the release,
which should trigger a tag pipeline that contains the job responsible for creating the release.
The tag must use <a href=/ci/components/#semantic-versioning>semantic versioning</a>.</p></li></ol><p>After the release job completes successfully, the release is created and the new version
is published to the CI/CD catalog.</p><h4 id=semantic-versioning>Semantic versioning</h4><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-10 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-10>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-10 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/427286>Introduced</a> in GitLab 16.10.</li></ul></div></div><p>When tagging and <a href=/ci/components/#publish-a-new-release>releasing new versions</a> of components to the Catalog,
you must use <a href=https://semver.org>semantic versioning</a>. Semantic versioning is the standard
for communicating that a change is a major, minor, patch, or other kind of change.</p><p>For example, <code>1.0.0</code>, <code>2.3.4</code>, and <code>1.0.0-alpha</code> are all valid semantic versions.</p><h3 id=unpublish-a-component-project>Unpublish a component project</h3><p>To remove a component project from the catalog, turn off the <a href=/ci/components/#set-a-component-project-as-a-catalog-project><strong>CI/CD Catalog resource</strong></a>
toggle in the project settings.</p><div class="alert alert-type-warning gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>This action destroys the metadata about the component project and its versions published
in the catalog. The project and its repository still exist, but are not visible in the catalog.</p></div></div><p>To publish the component project in the catalog again, you need to <a href=/ci/components/#publish-a-new-release>publish a new release</a>.</p><h3 id=verified-component-creators>Verified component creators</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-12 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-12>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-12 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/433443>Introduced for GitLab.com</a> in GitLab 16.11</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/460125>Introduced for GitLab Self-Managed and GitLab Dedicated</a> in GitLab 18.1</li></ul></div></div><p>Some CI/CD components are badged with an icon to show that the component was created
and is maintained by users verified by GitLab or the instance administrator:</p><ul><li><p>GitLab-maintained (<span> <svg role="img" aria-label="tanuki-verified" class="gl-icon s16"><use href="/gitlab_ui/svgs-latest/icons.svg#tanuki-verified"/><title>tanuki-verified</title></svg> </span>): GitLab.com components that are created and maintained by GitLab.</p></li><li><p>GitLab Partner (<span> <svg role="img" aria-label="partner-verified" class="gl-icon s16"><use href="/gitlab_ui/svgs-latest/icons.svg#partner-verified"/><title>partner-verified</title></svg> </span>): GitLab.com components that are independently created
and maintained by a GitLab-verified partner.</p><p>GitLab partners can contact a member of the GitLab Partner Alliance to have their
namespace on GitLab.com flagged as GitLab-verified. Then any CI/CD components located in the
namespace are badged as GitLab Partner components. The Partner Alliance member
creates an <a href="https://gitlab.com/gitlab-com/support/internal-requests/-/issues/new?issuable_template=CI%20Catalog%20Badge%20Request">internal request issue (GitLab team members only)</a>
on behalf of the verified partner.</p><div class="alert alert-type-warning gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>GitLab Partner-created components are provided <strong>as-is</strong>, without warranty of any kind.
An end user&rsquo;s use of a GitLab Partner-created component is at their own risk and
GitLab shall have no indemnification obligations nor any liability of any type
with respect to the end user&rsquo;s use of the component. The end user&rsquo;s use of such content
and any liability related thereto shall be between the publisher of the content and the end user.</p></div></div></li><li><p>Verified creator (<span> <svg role="img" aria-label="check-sm" class="gl-icon s16"><use href="/gitlab_ui/svgs-latest/icons.svg#check-sm"/><title>check-sm</title></svg> </span>): Components created and maintained by
a user verified by an administrator.</p></li></ul><h4 id=set-a-component-as-maintained-by-a-verified-creator>Set a component as maintained by a verified creator</h4><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Free, Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab Self-Managed, GitLab Dedicated</li></ul></div><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-18 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-18>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-18 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/460125>Introduced for GitLab Self-Managed and GitLab Dedicated</a> in GitLab 18.1</li></ul></div></div><p>A GitLab administrator can set a CI/CD component as created and maintained by a verified creator:</p><ol><li><p>Open GraphiQL in the instance with your administrator account, for example at: <code>https://gitlab.example.com/-/graphql-explorer</code>.</p></li><li><p>Run this query, replacing <code>root-level-group</code> with the root namespace of the component to verify:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=graphql class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=kd>mutation</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nc>verifiedNamespaceCreate</span><span class=p>(</span><span class=kd>input</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nc>namespacePath</span><span class=p>:</span><span class=w> </span><span class=s>&#34;root-level-group&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nc>verificationLevel</span><span class=p>:</span><span class=w> </span><span class=nc>VERIFIED_CREATOR_SELF_MANAGED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nc>errors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></div></li></ol><p>After the query completes, all components in projects in the root namespace are verified.
The <strong>Verified creator</strong> badge displays next to the component names in the CI/CD catalog.</p><p>To remove the badge from a component, repeat the query with <code>UNVERIFIED</code> for <code>verificationLevel</code>.</p><h2 id=convert-a-cicd-template-to-a-component>Convert a CI/CD template to a component</h2><p>Any existing CI/CD template that you use in projects by using the <code>include:</code> syntax
can be converted to a CI/CD component:</p><ol><li>Decide if you want the component to be grouped with other components as part of
an existing <a href=/ci/components/#component-project>component project</a>, or <a href=/ci/components/#create-a-component-project>create a new component project</a>.</li><li>Create a YAML file in the component project according to the <a href=/ci/components/#directory-structure>directory structure</a>.</li><li>Copy the content of the original template YAML file into the new component YAML file.</li><li>Refactor the new component&rsquo;s configuration to:<ul><li>Follow the guidance on <a href=/ci/components/#write-a-component>writing a component</a>.</li><li>Improve the configuration, for example by enabling <a href=/ci/pipelines/merge_request_pipelines/>merge request pipelines</a>
or making it <a href=/ci/pipelines/pipeline_efficiency/>more efficient</a>.</li></ul></li><li>Leverage the <code>.gitlab-ci.yml</code> in the components repository to <a href=/ci/components/#test-the-component>test changes to the component</a>.</li><li>Tag and <a href=/ci/components/#publish-a-new-release>release the component</a>.</li></ol><p>You can learn more by following a practical example for <a href=/ci/components/examples/#cicd-component-migration-example-go>migrating the Go CI/CD template to CI/CD component</a>.</p><h2 id=use-a-gitlabcom-component-on-gitlab-self-managed>Use a GitLab.com component on GitLab Self-Managed</h2><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab Self-Managed, GitLab Dedicated</li></ul></div><p>The CI/CD catalog of a fresh install of a GitLab instance starts with no published CI/CD components.
To populate your instance&rsquo;s catalog, you can:</p><ul><li><a href=/ci/components/#publish-a-component-project>Publish your own components</a>.</li><li>Mirror components from GitLab.com in your GitLab Self-Managed instance.</li></ul><p>To mirror a GitLab.com component in your GitLab Self-Managed instance:</p><ol><li>Make sure that <a href=/security/webhooks/>network outbound requests</a> are allowed for <code>gitlab.com</code>.</li><li><a href=/user/group/#create-a-group>Create a group</a> to host the component projects (recommended group: <code>components</code>).</li><li><a href=/user/project/repository/mirror/pull/>Create a mirror of the component project</a> in the new group.</li><li>Write a <a href=/user/project/working_with_projects/#edit-a-project>project description</a>
for the component project mirror because mirroring repositories does not copy the description.</li><li><a href=/ci/components/#set-a-component-project-as-a-catalog-project>Set the self-hosted component project as a catalog resource</a>.</li><li>Publish <a href=/user/project/releases/>a new release</a> in the self-hosted component project by
<a href=/ci/pipelines/#run-a-pipeline-manually>running a pipeline</a> for a tag (usually the latest tag).</li></ol><h2 id=cicd-component-security-best-practices>CI/CD component security best practices</h2><h3 id=for-component-users>For component users</h3><p>As anyone can publish components to the catalog, you should carefully review components before using them in your project.
Use of GitLab CI/CD components is at your own risk and GitLab cannot guarantee the security of third-party components.</p><p>When using third-party CI/CD components, consider the following security best practices:</p><ul><li><strong>Audit and review component source code</strong>: Carefully examine the code to ensure it&rsquo;s free of malicious content.</li><li><strong>Minimize access to credentials and tokens</strong>:<ul><li>Audit the component&rsquo;s source code to verify that any credentials or tokens are only used
to perform actions that you expect and authorize.</li><li>Use minimally scoped access tokens.</li><li>Avoid using long-lived access tokens or credentials.</li><li>Audit use of credentials and tokens used by CI/CD components.</li></ul></li><li><strong>Use pinned versions</strong>: Pin CI/CD components to a specific commit SHA (preferred)
or release version tag to ensure the integrity of the component used in a pipeline.
Only use release tags if you trust the component maintainer. Avoid using <code>latest</code>.</li><li><strong>Store secrets securely</strong>: Do not store secrets in CI/CD configuration files.
Avoid storing secrets and credentials in project settings if you can use an external secret management
solution instead.</li><li><strong>Use ephemeral, isolated runner environments</strong>: Run component jobs in temporary,
isolated environments when possible. Be aware of <a href=https://docs.gitlab.com/runner/security>security risks</a>
with self-managed runners.</li><li><strong>Securely handle cache and artifacts</strong>: Do not pass cache or artifacts from other jobs
in your pipeline to CI/CD component jobs unless absolutely necessary.</li><li><strong>Limit CI_JOB_TOKEN access</strong>: Restrict <a href=/ci/jobs/ci_job_token/#control-job-token-access-to-your-project>CI/CD job token (<code>CI_JOB_TOKEN</code>) project access and permissions</a>
for projects using CI/CD components.</li><li><strong>Review CI/CD component changes</strong>: Carefully review all changes to the CI/CD component configuration
before changing to use an updated commit SHA or release tag for the component.</li><li><strong>Audit custom container images</strong>: Carefully review any custom container images used by the CI/CD component
to ensure they are free of malicious content.</li></ul><h3 id=for-component-maintainers>For component maintainers</h3><p>To maintain secure and trustworthy CI/CD components and ensure the integrity of the pipeline configuration
you deliver to users, follow these best practices:</p><ul><li><strong>Use two-factor authentication (2FA)</strong>: Ensure all CI/CD component project maintainers
and owners have <a href=/user/profile/account/two_factor_authentication/#enable-two-factor-authentication>2FA enabled</a>,
or enforce <a href=/security/two_factor_authentication/#enforce-2fa-for-all-users-in-a-group>2FA for all users in the group</a>.</li><li><strong>Use protected branches</strong>:<ul><li>Use <a href=/user/project/repository/branches/protected/>protected branches</a>
for component project releases.</li><li>Protect the default branch, and protect all release branches <a href=/user/project/repository/branches/protected/#use-wildcard-rules>using wildcard rules</a>.</li><li>Require everyone submit merge requests for changes to protected branches. Set the
<strong>Allowed to push and merge</strong> option to <code>No one</code> for protected branches.</li><li>Block force pushes to protected branches.</li></ul></li><li><strong>Sign all commits</strong>: <a href=/user/project/repository/signed_commits/>Sign all commits</a> to the component project.</li><li><strong>Discourage using <code>latest</code></strong>: Avoid including examples in your <code>README.md</code> that use <code>@latest</code>.</li><li><strong>Limit dependency on caches and artifacts from other jobs</strong>: Only use cache and artifacts
from other jobs in CI/CD components if absolutely necessary</li><li><strong>Update CI/CD component dependencies</strong>: Check for and apply updates to dependencies regularly.</li><li><strong>Review changes carefully</strong>:<ul><li>Carefully review all changes to the CI/CD component pipeline configuration before
merging into default or release branches.</li><li>Use <a href=/user/project/merge_requests/approvals/>merge request approvals</a>
for all user-facing changes to CI/CD component catalog projects.</li></ul></li></ul><h2 id=troubleshooting>Troubleshooting</h2><h3 id=content-not-found-message><code>content not found</code> message</h3><p>You might receive an error message similar to the following when using the <code>~latest</code> or a partial semantic
version qualifier to reference a component hosted by a <a href=/ci/components/#set-a-component-project-as-a-catalog-project>catalog project</a>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=plaintext class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>This GitLab CI configuration is invalid: Component &#39;gitlab.com/my-namespace/my-project/my-component@~latest&#39; - content not found</span></span></code></pre></div></div><p>The <code>~latest</code> behavior <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/442238>was updated</a>
in GitLab 16.10. It now refers to the latest semantic version of the catalog resource. To resolve this issue, <a href=/ci/components/#publish-a-new-release>create a new release</a>.</p><h3 id=error-build-component-error-spec-must-be-a-valid-json-schema>Error: <code>Build component error: Spec must be a valid json schema</code></h3><p>If a component has invalid formatting, you might not be able to create a release
and could receive an error like <code>Build component error: Spec must be a valid json schema</code>.</p><p>This error can be caused by an empty <code>spec:inputs</code> section. If your configuration
does not use any inputs, you can make the <code>spec</code> section empty instead. For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>my-component</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo</span></span></span></code></pre></div></div></div><div data-vue-app=back-to-top-button></div></div><div class="feedback gl-min-h-8" data-ga-section=feedback data-elastic-exclude><div data-component=docs-feedback></div></div></div><aside class=sidebar-right><div data-ga-section=toc data-vue-app=toc></div></aside></div></main><footer data-ga-section=footer><section data-ga-section=footer><div id=footer class="footer-section container gl-grid gl-grid-cols-2 gl-grid-rows-3 gl-grid-rows-auto gl-gap-8 lg:gl-grid-cols-5 lg:gl-grid-rows-1 lg:gl-justify-items-center gl-px-8 gl-py-8 lg:gl-py-10"><div class="gl-col-span-2 lg:gl-col-span-1 gl-row-start-1"><div class="docs-title gl-flex gl-items-center"><a href=/><img src=/gitlab-logo-footer.svg alt="GitLab Docs logo" class=logo width=176 height=24></a></div><ul class="docs-social gl-list-none gl-flex"><li><a href=https://www.facebook.com/gitlab class=facebook><span class=gl-sr-only>Facebook</span></a></li><li><a href=https://www.linkedin.com/company/gitlab-com class=linkedin><span class=gl-sr-only>LinkedIn</span></a></li><li><a href=https://twitter.com/gitlab class=twitter><span class=gl-sr-only>Twitter</span></a></li><li><a href=https://www.youtube.com/channel/UCnMGQ8QHMAnVIsI3xJrihhg class=youtube><span class=gl-sr-only>YouTube</span></a></li></ul><a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="license noopener noreferrer" class=gl-mt-0><img src=/by-sa.svg alt="Creative Commons License" width=80 height=15></a></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Company</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/company/>About GitLab</a></li><li><a href=https://about.gitlab.com/pricing/>View pricing</a></li><li><a href=https://about.gitlab.com/free-trial/>Try GitLab for free</a></li></ul></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Feedback</div><ul class="gl-list-none gl-p-0"><li><a href=https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/ci/components/_index.md>View page source</a></li><li><a href=https://gitlab.com/-/ide/project/gitlab-org/gitlab/edit/master/-/doc/ci/components/_index.md>Edit in web IDE</a></li><li><a href=https://about.gitlab.com/community/contribute/>Contribute to GitLab</a></li><li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Documentation">Suggest updates</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Help & Community</div><ul class="gl-list-none gl-p-0"><li><a href=https://university.gitlab.com/pages/certifications>Get certified</a></li><li><a href=https://about.gitlab.com/support/>Get support</a></li><li><a href="https://forum.gitlab.com/new-topic?title=topic%20title&amp;body=topic%20body&amp;tags=docs-feedback">Post on the GitLab forum</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Resources</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/terms/>Terms</a></li><li><a href=https://about.gitlab.com/privacy/>Privacy statement</a></li><li><a href=/legal/use_generative_ai/>Use of generative AI</a></li><li><a href=/legal/licensing_policy/>Acceptable use of user licenses</a></li><li><button id=ot-sdk-btn class=ot-sdk-show-settings></button></li></ul></div></div></section></footer><script type=module src=/vite/main.js></script><script async>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NJXWQL")</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJXWQL" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script async>(function(){var e,t=!1;function n(){t===!1&&(t=!0,Munchkin.init("194-VVC-221",{useBeaconAPI:!0}))}e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src="https://munchkin.marketo.net/munchkin.js",e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&n()},e.onload=n,document.getElementsByTagName("head")[0].appendChild(e)})()</script><script async src=https://cdn.bizible.com/scripts/bizible.js></script><script async>_linkedin_partner_id="30694",window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[],window._linkedin_data_partner_ids.push(_linkedin_partner_id),function(){var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",t.parentNode.insertBefore(e,t)}()</script><noscript><img height=1 width=1 style=display:none alt src="https://dc.ads.linkedin.com/collect/?pid=30694&fmt=gif"></noscript></body></html>