<!doctype html><html lang=en-us dir=ltr><head><script src=https://cdn.cookielaw.org/consent/7f944245-c5cd-4eed-a90e-dd955adfdd08/OtAutoBlock.js></script><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js data-domain-script=7f944245-c5cd-4eed-a90e-dd955adfdd08></script><script type=text/javascript>function OptanonWrapper(){}</script><script>const callback=(e)=>{for(const t of e)t.type==="childList"&&t.addedNodes.forEach(e=>{e.nodeName==="IMG"&&document.querySelectorAll('img:not([src^="http"]):not([data-ot-ignore])').forEach(e=>{e.setAttribute("data-ot-ignore","")})})},config={attributes:!0,childList:!0,subtree:!0,attributeFilter:["src"]},observer=new MutationObserver(callback);observer.observe(document.documentElement,config)</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","GTM-NJXWQL"),gtag("consent","default",{analytics_storage:"granted",ad_storage:"granted",functionality_storage:"granted",wait_for_update:500}),gtag("consent","default",{analytics_storage:"denied",ad_storage:"denied",functionality_storage:"denied",region:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","GB","PE","RU"],wait_for_update:500}),window.geofeed=e=>{dataLayer.push({event:"OneTrustCountryLoad",oneTrustCountryId:e.country.toString()})};const json=document.createElement("script");json.setAttribute("src","https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed"),document.head.appendChild(json)</script><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Environments | GitLab Docs</title><link rel=icon href=/favicon.ico sizes=any><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=manifest href=/manifests/manifest.webmanifest><meta name=theme-color content="#FC6D26"><link rel=canonical href=https://docs.gitlab.com/ci/environments/><meta name=description content="Environments, variables, dashboards, and review apps."><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"GitLab Docs","url":"https://docs.gitlab.com/"}</script><link rel=preload href=/gitlab_ui/fonts/GitLabSans.woff2 type=font/woff2 as=font crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabSans-Italic.woff2 crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabMono.woff2 crossorigin><link rel=stylesheet href=/gitlab_ui/ui/index.css><link rel=stylesheet href=/vite/main.css><link rel=stylesheet href=/css/syntax-dark.min.css id=syntax-dark-theme><link rel=stylesheet href=/css/syntax-light.min.css id=syntax-light-theme><script>(function(){const p="gitlab-docs-theme",g="gitlab-docs-layout",e={LIGHT:"light",DARK:"dark",AUTO:"auto"},i={FIXED:"fixed",FLUID:"fluid"},d="light",f="fixed";let r=!1;const t=localStorage?.getItem(p),m=localStorage?.getItem(g),l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.DARK:e.LIGHT;function h(){return t&&(t===e.LIGHT||t===e.DARK)?t:(t===e.AUTO&&(r=!0),l||d)}function u(){return m===i.FLUID?i.FLUID:f}const s=h(),c=u(),n=document.documentElement;n.classList.remove("gl-dark","gl-light"),n.classList.add(s===e.DARK?"gl-dark":"gl-light"),c===i.FLUID&&(n.classList.add("fluid"),n.classList.remove("fixed"));const a=document.getElementById("syntax-dark-theme"),o=document.getElementById("syntax-light-theme");a&&o&&(s===e.DARK?(a.disabled=!1,o.disabled=!0):(a.disabled=!0,o.disabled=!1)),window.__initialTheme=r?e.AUTO:s,window.__initialLayout=c})()</script><meta name=gitlab_docs_base_url content="/"><meta name=gitlab_docs_page_owner data-stage=Deploy data-group=Environments><meta class=elastic name=gitlab_docs_version content="18.6"><meta class=elastic name=gitlab_docs_section content="use_gitlab"><meta class=elastic name=gitlab_docs_breadcrumbs content="Use GitLab › Deploy and release your application"><script>window.pageMetadata={trail:[{path:"user/",title:"Use GitLab"},{path:"topics/release_your_application/",title:"Deploy and release your application"},{path:"ci/environments/",title:"Environments"}]}</script><meta name=gitlab_docs_legacy_path content="/ee/ci/environments/index.html"><meta name=gitlab_docs_hugo_launch_version content="17.9"><script>const ELASTIC_CLOUD_ID="gitlab-docs-website:dXMtY2VudHJhbDEuZ2NwLmNsb3VkLmVzLmlvJDQwZTQyYTQzMTJiZjQyMzNiMzBiZTg0MTU5YjlkNmE1JGMxODg4Y2U5OTY0YzQzZjc5ZjQ1YTk5NDZmMjI0ODg0",ELASTIC_KEY="cDFpLWJaSUJXVHBqWWI4VGZKN3M6eENBSjl4WDRSRnlCUW94ajRQazhLQQ==",ELASTIC_INDEX="search-gitlab-docs-hugo"</script><script type=module src=/vite/elastic_search.js></script><script type=module src=/vite/history.js></script><script>const FS_IDENTIFIER="AIzaSyCLdi3jHHjkmLji9D8uj_RNPMHcdrYoIW4",RECAPTCHA_PUBLIC_KEY="6Le4R3UrAAAAALsIlK_siq0_UhPD-0rD-ImF1gfO"</script><meta name=google-site-verification content="AcGSBNaKDWnLgcYotlVibGy6STm2Y6_KJSaRxrA90xY"><meta name=google-site-verification content="6eFQOFLxYAer08ROqc3I-SAi44F9NmvH7PrUUBR3oCI"><meta name=google-site-verification content="xAUTWp3CDg-tU1LVVwsM9OrVhLR7L3SmiyKzkOuPNos"><meta name=google-site-verification content="F0zzwaMpiyWFcPQ1Lqu18qN3EnuQsqFXbySl_29yvHs"><meta name=google-site-verification content="nwo1bVaU0t9TZxZyM-aOI6-CofaH9GRL-uBPbdREWgc"><meta name=google-site-verification content="rWoHrtHEmIX0t28oOb1ZEDMYZb_EZA6rr6ZOl5otEPI"><meta name=google-site-verification content="fSxr8-uslxcuFL0N-oECp3Tm0RPNEGX97wbdayKOEL8"><meta name=google-site-verification content="ISxyLVnZqU8oY3jwrK7EO9o-2DOTvLJwPse7bZz6yhs"><meta name=google-site-verification content="x1WspIvz3ZHqS0gezfX_P-qiRDOeP2Oyrd68zrU2ErI"><meta name=google-site-verification content="DfXB2Za52GT3zs_vuLIAL4Mi3M3K4qxXcg7MAs0CUqo"><meta name=google-site-verification content="BCEBC2LC7A1NzO9Com1oBrWK88tV_QXfUL0i9mwXPL0"><meta name=google-site-verification content="a2lNcHMorfS43aoISjZt5_BBPo-H1UaTKMQdBgZO9iY"><meta name=google-site-verification content="0s16pP9MelY6wDHRf-izXb5pwLU01IogP-Uc_e8f3GU"><meta name=google-site-verification content="H474RNof35Xp8fLg02fZbg9Dzxdtfch6vtcjzpmUraU"><meta name=google-site-verification content="E0FlhpgBGeE7d1pQ6amdcIWPMDLDeu15-HLQVoDTguE"><meta name=google-site-verification content="opQd7_rXtPy-pX5CO_XZiztzeQEsXnB3j6Y1_dZAizA"><meta name=google-site-verification content="06Kq4AoXdmBOjOAkbPvnYGtSxnn4Q9QBqEO55PLlw5c"><meta name=google-site-verification content="djBBokRFSWV_VRlSE51V5TZSPzMC6hml5l-Sb22WglE"><meta name=google-site-verification content="UOW6nOsvbyMeIySuamzbws4kNC_WqehamWfoxxtKjZ8"><meta name=google-site-verification content="hXU1Gsdba74DUbvbdUHRl9o0cQeiwXIhAdIllOG6p8E"><meta name=google-site-verification content="YFeHIAPk9lE76ubVMeq4P0sQVnzo2-a4k1oU_bPY8yE"><meta name=google-site-verification content="h8ICI4eDkvXmYaGDuLTLoWuXnLn-KUkChqYB-roMRsw"><meta name=google-site-verification content="9QW7feFNlCpMLPm7vAWEU-v14vdzb0Bb3RAk-8e_a18"><meta name=google-site-verification content="26kXLBOjaYRb2UwzWTDl1I1nzA2NxMunhp7SUtxGV6E"><meta name=google-site-verification content="jr3C8t6vKGPyN9GV3esdHY_xGYyQaUNznIl-Un2RObA"><meta name=google-site-verification content="WdlBpRU0ec1ieKqrTY_772OhG23FY45VQ4Lv9DyLJ_Y"><meta name=google-site-verification content="n9i6B9q4Xjr_etK2nQGZH1msoo7vIv9SXV8SQLOUA7c"><meta name=zd-site-verification content="ony3w7hk1vs6tfyrc51mld"><meta name=zd-site-verification content="gtuq65qdzt6n31viazi6hj"></head><body data-elastic-exclude><nav data-ga-section=header data-elastic-exclude><div class="header-wrapper gl-w-full gl-fixed gl-z-4"><div class=header><div class="header-top gl-flex gl-items-center"><a href=#skipTarget class="gl-sr-only skip-link">Skip to main content</a>
<a class=navbar-logo href=/><span class=gl-sr-only>Go to GitLab Docs homepage</span></a><div class="mobile-header gl-w-full gl-text-base"><div class=mobile-header-overlay></div><div class="header-right collapse gl-z-4 gl-border-t lg:gl-border-0"><div class="search-wrapper lg:gl-ml-4 lg:gl-grow"><div class="js-elastic-search-form gl-spinner-container"><span role=status aria-label=Loading class="gl-ml-3 gl-align-text-bottom! gl-spinner gl-spinner gl-spinner-sm"></span></div></div><div class="gl-flex gl-flex-col gl-gap-3 gl-mt-5 lg:gl-mt-0 lg:gl-flex-row lg:gl-items-center gl-ml-auto"><a class="whats-new gl-button btn-default btn-default-tertiary gl-hidden lg:gl-block" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a><div data-vue-app=versions-menu></div><div data-vue-app=appearance-toggle class="gl-hidden lg:gl-block"></div><div class="gl-flex gl-justify-evenly lg:gl-justify-normal gl-items-center gl-gap-5"><a class="whats-new gl-button btn-default btn-default-tertiary gl-w-full lg:gl-hidden hover:gl-no-underline" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a>
<a class="free-trial-btn cta-button gl-button btn-confirm gl-w-full hover:gl-no-underline" href="https://gitlab.com/-/trial_registrations/new?glm_source=docs.gitlab.com&amp;amp;glm_content=navigation-cta-docs" target=_blank rel="noopener noreferrer" role=button>Get free trial</a></div></div></div></div><button class="navbar-toggle gl-button btn-default lg:gl-hidden" data-toggle=collapse data-target=.header-right>
<span class=navbar-toggle-icon></span>
<span class=gl-sr-only>Toggle menu</span></button></div><div class="header-bottom gl-border-t lg:gl-border-b"><ul class="subheader-menu gl-hidden lg:gl-flex gl-list-none gl-text-base gl-space-x-5 gl-py-4 gl-pl-0 gl-mb-0"><li><a href=/user/ class=active>Use GitLab</a></li><li><a href=/user/gitlab_duo/>GitLab Duo</a></li><li><a href=/api/>Extend</a></li><li><a href=/install/>Install</a></li><li><a href=/administration/>Administer</a></li><li><a href=/subscriptions/>Subscribe</a></li><li><a href=/development/>Contribute</a></li><li><a href=/solutions/>Solutions</a></li></ul></div></div></div></nav><main data-ga-section=content-body><div id=js-version-banner></div><div class="template-single gl-flex gl-h-full"><div class=side-nav data-ga-section=side-nav data-vue-app=sidebar-menu></div><div data-pagefind-body class=main-content><div class=docs-content><div class="gl-flex gl-h-5 gl-items-center gl-my-6"><div data-vue-app=open-sidebar></div><div data-vue-app=breadcrumb-nav></div></div><hr class="gl-border-t gl-px-5 lg:gl-hidden"><div class="gl-pt-4 gl-mt-4 lg:gl-pt-0 lg:gl-mt-0 lg:gl-border-t-0"><h1 id=skipTarget class=gl-mb-6>Environments</h1></div><div data-elastic-include><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Free, Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li></ul></div><p>A GitLab environment represents a specific deployment target for your application, like development, staging, or production. Use it to manage different configurations and deploy code during various stages of your software lifecycle.</p><p>With environments, you:</p><ul><li>Keep your deployment process consistent and repeatable</li><li>Track what code is deployed where</li><li>Roll back to previous versions when problems occur</li><li>Protect sensitive environments from unauthorized changes</li><li>Control deployment variables per environment to maintain security boundaries</li><li>Monitor environment health and get alerts if something goes wrong</li></ul><h2 id=view-environments-and-deployments>View environments and deployments</h2><p>Prerequisites:</p><ul><li>In a private project, you must have at least the Reporter role. See <a href=/ci/environments/#environment-permissions>Environment permissions</a>.</li></ul><p>There are a few ways to view a list of environments for a given project:</p><ul><li><p>On the project&rsquo;s overview page, if at least one environment is available (that is, not stopped).</p><p><a href=/ci/environments/img/environments_project_home_v15_9.png target=_blank rel="noopener noreferrer"><img alt="A project overview page displaying the number of available environments as an incremental counter." height=411 src=/ci/environments/img/environments_project_home_v15_9.png width=1008></a></p></li><li><p>On the left sidebar, select <strong>Operate</strong> > <strong>Environments</strong>. The environments are displayed.</p><p><a href=/ci/environments/img/environments_list_v14_8.png target=_blank rel="noopener noreferrer"><img alt="A list of available environments in a GitLab project, showing environment names, statuses, and other relevant details." height=1002 src=/ci/environments/img/environments_list_v14_8.png width=2550></a></p></li><li><p>To view a list of deployments for an environment, select the environment name,
for example, <code>staging</code>. Deployments show up in this list only after a deployment job has created them.</p><p><a href=/ci/environments/img/deployments_list_v13_10.png target=_blank rel="noopener noreferrer"><img alt="A list of deployments for a selected environment, displaying deployment history and related details." height=246 src=/ci/environments/img/deployments_list_v13_10.png width=1190></a></p></li><li><p>To view a list of all manual jobs in a deployment pipeline, select the <strong>Run</strong> (<span> <svg role="img" aria-label="play" class="gl-icon s16"><use href="/gitlab_ui/svgs-latest/icons.svg#play"/><title>play</title></svg> </span>) dropdown list.</p><p><a href=/ci/environments/img/view_manual_jobs_v17_10.png target=_blank rel="noopener noreferrer"><img alt="Viewing a manual job in a deployment pipeline" height=290 src=/ci/environments/img/view_manual_jobs_v17_10.png width=1336></a></p></li></ul><h3 id=environment-url>Environment URL</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-2 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-2>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-2 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/337417>Changed</a> to persist arbitrary URLs in GitLab 15.2 <a href=/administration/feature_flags/>with a flag</a> named <code>soft_validation_on_external_url</code>. Disabled by default.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/337417>Generally available</a> in GitLab 15.3. <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/367206>Feature flag <code>soft_validation_on_external_url</code></a> removed.</li></ul></div></div><p>The <a href=/ci/yaml/#environmenturl>environment URL</a> is displayed in a few
places in GitLab:</p><ul><li><p>In a merge request as a link:</p><p><a href=/ci/environments/img/environments_mr_review_app_v11_10.png target=_blank rel="noopener noreferrer"><img alt="Environment URL in merge request" height=279 src=/ci/environments/img/environments_mr_review_app_v11_10.png width=958></a></p></li><li><p>In the Environments view as a button:</p><p><a href=/ci/environments/img/environments_open_live_environment_v14_8.png target=_blank rel="noopener noreferrer"><img alt="Open live environment from environments view" height=560 src=/ci/environments/img/environments_open_live_environment_v14_8.png width=2504></a></p></li><li><p>In the Deployments view as a button:</p><p><a href=/ci/environments/img/deployments_view_v11_10.png target=_blank rel="noopener noreferrer"><img alt="Environment URL in deployments" height=183 src=/ci/environments/img/deployments_view_v11_10.png width=1190></a></p></li></ul><p>You can see this information in a merge request if:</p><ul><li>The merge request is eventually merged to the default branch (usually <code>main</code>).</li><li>That branch also deploys to an environment (for example, <code>staging</code> or <code>production</code>).</li></ul><p>For example:</p><p><a href=/ci/environments/img/environments_link_url_mr_v10_1.png target=_blank rel="noopener noreferrer"><img alt="Environment URLs in merge request" height=362 src=/ci/environments/img/environments_link_url_mr_v10_1.png width=671></a></p><h4 id=go-from-source-files-to-public-pages>Go from source files to public pages</h4><p>With GitLab <a href=/ci/review_apps/#route-maps>Route Maps</a>, you can go directly
from source files to public pages in the environment set for review apps.</p><h2 id=types-of-environments>Types of environments</h2><p>An environment is either static or dynamic.</p><p>Static environments:</p><ul><li>Are usually reused by successive deployments.</li><li>Have static names. For example, <code>staging</code> or <code>production</code>.</li><li>Are created manually or as part of a CI/CD pipeline.</li></ul><p>Dynamic environments:</p><ul><li>Are usually created in a CI/CD pipeline and are used by only a single deployment, then either stopped or deleted.</li><li>Have dynamic names, usually based on the value of a CI/CD variable.</li><li>Are a feature of <a href=/ci/review_apps/>review apps</a>.</li></ul><p>An environment has one of three states, depending on whether its <a href=/ci/yaml/#environmenton_stop>stop job</a> has run:</p><ul><li><code>available</code>: The environment exists. There might be a deployment.</li><li><code>stopping</code>: The <em>on stop job</em> has started. This state does not apply when there is no on stop job defined.</li><li><code>stopped</code>: Either the <em>on stop job</em> has run, or a user manually stopped the job.</li></ul><h2 id=create-a-static-environment>Create a static environment</h2><p>You can create a static environment in the UI or in your <code>.gitlab-ci.yml</code> file.</p><h3 id=in-the-ui>In the UI</h3><p>Prerequisites:</p><ul><li>You must have at least the Developer role.</li></ul><p>To create a static environment in the UI:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Operate</strong> > <strong>Environments</strong>.</li><li>Select <strong>Create an environment</strong>.</li><li>Complete the fields.</li><li>Select <strong>Save</strong>.</li></ol><h3 id=in-your-gitlab-ciyml-file>In your <code>.gitlab-ci.yml</code> file</h3><p>Prerequisites:</p><ul><li>You must have at least the Developer role.</li></ul><p>To create a static environment, in your <code>.gitlab-ci.yml</code> file:</p><ol><li>Define a job in the <code>deploy</code> stage.</li><li>In the job, define the environment <code>name</code> and <code>url</code>. If an
environment of that name doesn&rsquo;t exist when the pipeline runs, it is created.</li></ol><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>Some characters cannot be used in environment names. For more information about the
<code>environment</code> keywords, see the <a href=/ci/yaml/#environment><code>.gitlab-ci.yml</code> keyword reference</a>.</p></div></div><p>For example, to create an environment named <code>staging</code>, with URL <code>https://staging.example.com</code>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy_staging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Deploy to staging server&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>staging</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://staging.example.com</span></span></span></code></pre></div></div><h2 id=create-a-dynamic-environment>Create a dynamic environment</h2><p>To create a dynamic environment, you use <a href=/ci/environments/#cicd-variables>CI/CD variables</a> that are
unique to each pipeline.</p><p>Prerequisites:</p><ul><li>You must have at least the Developer role.</li></ul><p>To create a dynamic environment, in your <code>.gitlab-ci.yml</code> file:</p><ol><li>Define a job in the <code>deploy</code> stage.</li><li>In the job, define the following environment attributes:<ul><li><code>name</code>: Use a related CI/CD variable like <code>$CI_COMMIT_REF_SLUG</code>. Optionally, add a static
prefix to the environment&rsquo;s name, which <a href=/ci/environments/#group-similar-environments>groups in the UI</a> all
environments with the same prefix.</li><li><code>url</code>: Optional. Prefix the hostname with a related CI/CD variable like <code>$CI_ENVIRONMENT_SLUG</code>.</li></ul></li></ol><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>Some characters cannot be used in environment names. For more information about the
<code>environment</code> keywords, see the <a href=/ci/yaml/#environment><code>.gitlab-ci.yml</code> keyword reference</a>.</p></div></div><p>In the following example, every time the <code>deploy_review_app</code> job runs the environment&rsquo;s name and
URL are defined using unique values.</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy_review_app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>make deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://$CI_ENVIRONMENT_SLUG.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>$CI_COMMIT_BRANCH == &#34;main&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>never</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>$CI_COMMIT_BRANCH</span></span></span></code></pre></div></div><h3 id=set-a-dynamic-environment-url>Set a dynamic environment URL</h3><p>Some external hosting platforms generate a random URL for each deployment, for example:
<code>https://94dd65b.amazonaws.com/qa-lambda-1234567</code>. That makes it difficult to reference the URL in
the <code>.gitlab-ci.yml</code> file.</p><p>To address this problem, you can configure a deployment job to report back a set of
variables. These variables include the URL that was dynamically generated by the external service.
GitLab supports the <a href=https://github.com/bkeepers/dotenv>dotenv (<code>.env</code>)</a> file format,
and expands the <code>environment:url</code> value with variables defined in the <code>.env</code> file.</p><p>To use this feature, specify the
<a href=/ci/yaml/artifacts_reports/#artifactsreportsdotenv><code>artifacts:reports:dotenv</code></a> keyword in <code>.gitlab-ci.yml</code>.</p><p>You can also specify a static part of the URL at <code>environment:url</code>, such as
<code>https://$DYNAMIC_ENVIRONMENT_URL</code>. If the value of <code>DYNAMIC_ENVIRONMENT_URL</code> is <code>example.com</code>, the
final result is <code>https://example.com</code>.</p><p>The assigned URL for the <code>review/your-branch-name</code> environment is visible in the UI.</p><p><i class="fa fa-youtube-play youtube" aria-hidden=true></i>
For an overview, see <a href=https://youtu.be/70jDXtOf4Ig>Set dynamic URLs after a job finished</a>.</p><p>In the following example a review app creates a new environment for each merge request:</p><ul><li>The <code>review</code> job is triggered by every push, and creates or updates an environment named
<code>review/your-branch-name</code>. The environment URL is set to <code>$DYNAMIC_ENVIRONMENT_URL</code>.</li><li>When the <code>review</code> job finishes, GitLab updates the <code>review/your-branch-name</code> environment&rsquo;s URL.
It parses the <code>deploy.env</code> report artifact, registers a list of variables as runtime-created,
expands the <code>environment:url: $DYNAMIC_ENVIRONMENT_URL</code> and sets it to the environment
URL.</li></ul><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>DYNAMIC_ENVIRONMENT_URL=$(deploy-script)                                </span><span class=w> </span><span class=c># In script, get the environment URL.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;DYNAMIC_ENVIRONMENT_URL=$DYNAMIC_ENVIRONMENT_URL&#34; &gt;&gt; deploy.env   </span><span class=w> </span><span class=c># Add the value to a dotenv file.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dotenv</span><span class=p>:</span><span class=w> </span><span class=l>deploy.env                                                      </span><span class=w> </span><span class=c># Report back dotenv file to rails.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>$DYNAMIC_ENVIRONMENT_URL                                             </span><span class=w> </span><span class=c># and set the variable produced in script to `environment:url`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>stop_review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stop_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>./teardown-environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span></span></span></code></pre></div></div><p>Note the following:</p><ul><li><code>stop_review</code> doesn&rsquo;t generate a dotenv report artifact, so it doesn&rsquo;t recognize the
<code>DYNAMIC_ENVIRONMENT_URL</code> environment variable. Therefore you shouldn&rsquo;t set <code>environment:url</code> in the
<code>stop_review</code> job.</li><li>If the environment URL isn&rsquo;t valid (for example, the URL is malformed), the system doesn&rsquo;t update
the environment URL.</li><li>If the script that runs in <code>stop_review</code> exists only in your repository and therefore can&rsquo;t use
<code>GIT_STRATEGY: none</code> or <code>GIT_STRATEGY: empty</code>, configure <a href=/ci/pipelines/merge_request_pipelines/>merge request pipelines</a>
for these jobs. This ensures that runners can fetch the repository even after a feature branch is
deleted. For more information, see <a href=/ci/pipelines/#ref-specs-for-runners>Ref Specs for Runners</a>.</li></ul><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>For Windows runners, you should use the PowerShell <code>Add-Content</code> command to write to <code>.env</code> files.</p></div></div><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=powershell class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nb>Add-Content</span> <span class=n>-Path</span> <span class=n>deploy</span><span class=p>.</span><span class=py>env</span> <span class=n>-Value</span> <span class=s2>&#34;DYNAMIC_ENVIRONMENT_URL=</span><span class=nv>$DYNAMIC_ENVIRONMENT_URL</span><span class=s2>&#34;</span></span></span></code></pre></div></div><h2 id=deployment-tier-of-environments>Deployment tier of environments</h2><p>Sometimes, instead of using an <a href=https://en.wikipedia.org/wiki/Deployment_environment>industry standard</a>
environment name, like <code>production</code>, you might want to use a code name, like <code>customer-portal</code>.
While there is no technical reason not to use a name like <code>customer-portal</code>, the name
no longer indicates that the environment is used for production. This can affect how metrics
like <a href=/user/analytics/dora_metrics/#how-deployment-frequency-is-calculated>deployment frequency</a>
are calculated.</p><p>To indicate that a specific environment is for a specific use,
you can use tiers:</p><table><thead><tr><th>Environment tier</th><th>Environment name examples</th></tr></thead><tbody><tr><td><code>production</code></td><td>Production, Live</td></tr><tr><td><code>staging</code></td><td>Staging, Model, Demo</td></tr><tr><td><code>testing</code></td><td>Test, QC</td></tr><tr><td><code>development</code></td><td>Dev, <a href=/ci/review_apps/>Review apps</a>, Trunk</td></tr><tr><td><code>other</code></td><td></td></tr></tbody></table><p>By default, GitLab assumes a tier based on <a href=/ci/yaml/#environmentname>the environment name</a>.
You cannot set an environment tier using the UI.
Instead, you can use the <a href=/ci/yaml/#environmentdeployment_tier><code>deployment_tier</code> keyword</a> to specify a tier.</p><h3 id=rename-an-environment>Rename an environment</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-6 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-6>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-6 class="collapsible-list collapse" aria-hidden=true><ul><li>Renaming an environment by using the API was <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/338897>deprecated</a> in GitLab 15.9.</li><li>Renaming an environment with the API <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/338897>removed</a> in GitLab 16.0.</li></ul></div></div><p>You cannot rename an environment.</p><p>To achieve the same result as renaming an environment:</p><ol><li><a href=/ci/environments/#stop-an-environment-by-using-the-ui>Stop the existing environment</a>.</li><li><a href=/ci/environments/#delete-an-environment>Delete the existing environment</a>.</li><li><a href=/ci/environments/#create-a-static-environment>Create a new environment</a> with the desired name.</li></ol><h2 id=cicd-variables>CI/CD variables</h2><p>To customize your environments and deployments, you can use any of the
<a href=/ci/variables/predefined_variables/>predefined CI/CD variables</a>,
and define custom CI/CD variables.</p><h3 id=limit-the-environment-scope-of-a-cicd-variable>Limit the environment scope of a CI/CD variable</h3><p>By default, all <a href=/ci/variables/>CI/CD variables</a> are available to all jobs in a pipeline.
If a test tool in a job becomes compromised, the tool could attempt to retrieve all
CI/CD variables available to the job. To help mitigate this kind of supply chain attack,
you should limit the environment scope of sensitive variables to only the jobs that require them.</p><p>Limit the environment scope of a CI/CD variable by defining which environments it
can be available for. The default environment scope is the <code>*</code> wildcard, so any job
can access the variable.</p><p>You can use specific matching to select a particular environment. For example, set
the variable&rsquo;s environment scope to <code>production</code> to only allow jobs with an <a href=/ci/yaml/#environment>environment</a>
of <code>production</code> to access the variable.</p><p>You can also use wildcard matching (<code>*</code>) to select a particular environment group,
like all <a href=/ci/review_apps/>review apps</a> with <code>review/*</code>.</p><p>For example, with these four environments:</p><ul><li><code>production</code></li><li><code>staging</code></li><li><code>review/feature-1</code></li><li><code>review/feature-2</code></li></ul><p>These environment scopes match as follows:</p><table><thead><tr><th style=text-align:left>↓ Scope / Environment →</th><th style=text-align:left><code>production</code></th><th style=text-align:left><code>staging</code></th><th style=text-align:left><code>review/feature-1</code></th><th style=text-align:left><code>review/feature-2</code></th></tr></thead><tbody><tr><td style=text-align:left><code>*</code></td><td style=text-align:left>Match</td><td style=text-align:left>Match</td><td style=text-align:left>Match</td><td style=text-align:left>Match</td></tr><tr><td style=text-align:left><code>production</code></td><td style=text-align:left>Match</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left><code>staging</code></td><td style=text-align:left></td><td style=text-align:left>Match</td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left><code>review/*</code></td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left>Match</td><td style=text-align:left>Match</td></tr><tr><td style=text-align:left><code>review/feature-1</code></td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left>Match</td><td style=text-align:left></td></tr></tbody></table><p>You should not use environment-scoped variables with <a href=/ci/yaml/#rules><code>rules</code></a>
or <a href=/ci/yaml/#include><code>include</code></a>. The variables might not be defined when
GitLab validates the pipeline configuration at pipeline creation.</p><h2 id=search-environments>Search environments</h2><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-7 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-7>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-7 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/10754>Introduced</a> in GitLab 15.5.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/373850>Searching environments within a folder</a> was introduced in GitLab 15.7 with <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/382108>Feature flag <code>enable_environments_search_within_folder</code></a>. Enabled by default.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/382108>Generally available</a> in GitLab 17.4. Feature flag <code>enable_environments_search_within_folder</code> removed.</li></ul></div></div><p>To search environments by name:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Operate</strong> > <strong>Environments</strong>.</li><li>In the search bar, enter your search term.<ul><li>The length of your <strong>search term should be 3 or more characters</strong>.</li><li>Matching applies from the beginning of the environment name.<ul><li>For example, <code>devel</code> matches the environment name <code>development</code>, but <code>elop</code> does not.</li></ul></li><li>For environments with a folder name format, matching applies after the base folder name.<ul><li>For example when the name is <code>review/test-app</code>, search term <code>test</code> matches <code>review/test-app</code>.</li><li>Also searching with the folder name prefixed like <code>review/test</code> matches <code>review/test-app</code>.</li></ul></li></ul></li></ol><h2 id=group-similar-environments>Group similar environments</h2><p>You can group environments into collapsible sections in the UI.</p><p>For example, if all of your environments start with the name <code>review</code>,
then in the UI, the environments are grouped under that heading:</p><p><a href=/ci/environments/img/environments_dynamic_groups_v13_10.png target=_blank rel="noopener noreferrer"><img alt="Environment groups" height=337 src=/ci/environments/img/environments_dynamic_groups_v13_10.png width=592></a></p><p>The following example shows how to start your environment names with <code>review</code>.
The <code>$CI_COMMIT_REF_SLUG</code> variable is populated with the branch name at runtime:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Deploy a review app&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span></span></span></code></pre></div></div><h2 id=stopping-an-environment>Stopping an environment</h2><p>Stopping an environment means its deployments are not accessible on the target server. You must stop
an environment before it can be deleted.</p><p>When using the <code>on_stop</code> action to stop an environment, the job runs if it&rsquo;s not <a href=/administration/settings/continuous_integration/#archive-pipelines>archived</a>.</p><h3 id=stop-an-environment-by-using-the-ui>Stop an environment by using the UI</h3><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>To trigger an <code>on_stop</code> action and manually stop an environment from the
Environments view, the stop and deploy jobs must be in the same
<a href=/ci/yaml/#resource_group><code>resource_group</code></a>.</p></div></div><p>To stop an environment in the GitLab UI:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Operate</strong> > <strong>Environments</strong>.</li><li>Next to the environment you want to stop, select <strong>Stop</strong>.</li><li>On the confirmation dialog, select <strong>Stop environment</strong>.</li></ol><h3 id=default-stopping-behavior>Default stopping behavior</h3><p>GitLab automatically stops environments when the associated branch is deleted or merged.
This behavior persists even if no explicit <code>on_stop</code> CI/CD job is defined.</p><p>However, <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/428625>issue 428625</a> proposes to change this behavior
so that production and staging environments stop only if an explicit <code>on_stop</code> CI/CD job is defined.</p><p>You can configure an environment&rsquo;s stopping behavior with the
<a href=/api/environments/#update-an-existing-environment><code>auto_stop_setting</code></a>
parameter in the Environments API.</p><h3 id=stop-an-environment-when-a-branch-is-deleted>Stop an environment when a branch is deleted</h3><p>You can configure environments to stop when a branch is deleted.</p><p>In the following example, a <code>deploy_review</code> job calls a <code>stop_review</code> job to clean up and stop the
environment.</p><ul><li>Both jobs must have the same <a href=/ci/yaml/#rules><code>rules</code></a>
or <a href=/ci/yaml/deprecated_keywords/#only--except><code>only/except</code></a> configuration. Otherwise,
the <code>stop_review</code> job might not be included in all pipelines that include the
<code>deploy_review</code> job, and you cannot trigger <code>action: stop</code> to stop the environment automatically.</li><li>The job with <a href=/ci/environments/#the-job-with-action-stop-doesnt-run><code>action: stop</code> might not run</a>
if it&rsquo;s in a later stage than the job that started the environment.</li><li>If you can&rsquo;t use <a href=/ci/pipelines/merge_request_pipelines/>merge request pipelines</a>,
set <a href=/ci/runners/configure_runners/#git-strategy><code>GIT_STRATEGY</code></a> to <code>none</code> or <code>empty</code>
in the <code>stop_review</code> job. Then, the <a href=https://docs.gitlab.com/runner/>runner</a> doesn&rsquo;t
try to check out the code after the branch is deleted.</li></ul><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Deploy a review app&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://$CI_ENVIRONMENT_SLUG.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>stop_review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stop_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Remove review app&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span></span></span></code></pre></div></div><h3 id=stop-an-environment-when-a-merge-request-is-merged-or-closed>Stop an environment when a merge request is merged or closed</h3><p>When you use the <a href=/ci/pipelines/merge_request_pipelines/>merge request pipelines</a> configuration,
the <code>stop</code> trigger is automatically enabled.</p><p>In the following example, the <code>deploy_review</code> job calls a <code>stop_review</code> job to clean up and stop
the environment.</p><ul><li>When the <a href=/user/project/merge_requests/auto_merge/#require-a-successful-pipeline-for-merge><strong>Pipelines must succeed</strong></a> setting is turned on,
you can configure the <a href=/ci/yaml/#allow_failure><code>allow_failure: true</code></a>
keyword on the <code>stop_review</code> job to prevent it from
blocking your pipelines and merge requests.</li></ul><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Deploy a review app&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>stop_review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>$CI_MERGE_REQUEST_ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stop_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Remove review app&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>$CI_MERGE_REQUEST_ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span></span></span></code></pre></div></div><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>When using this functionality together with merge trains, the <code>stop</code> job triggers only if <a href=/ci/jobs/job_rules/#avoid-duplicate-pipelines>duplicate pipelines are avoided</a>.</p></div></div><h3 id=stop-an-environment-after-a-certain-time-period>Stop an environment after a certain time period</h3><p>You can set an environment to stop automatically after a certain time period.</p><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>Due to resource limitations, a background worker for stopping environments runs only once every
hour. This means that environments may not be stopped after the exact time period specified, but are
instead stopped when the background worker detects expired environments.</p></div></div><p>In your <code>.gitlab-ci.yml</code> file, specify the <a href=/ci/yaml/#environmentauto_stop_in><code>environment:auto_stop_in</code></a>
keyword. Specify the time period in natural language, such as <code>1 hour and 30 minutes</code> or <code>1 day</code>.
After the time period passes, GitLab automatically triggers a job to stop the environment.</p><p>In the following example:</p><ul><li>Each commit on a merge request triggers a <code>review_app</code> job that deploys the latest change to the
environment and resets its expiry period.</li><li>If the environment is inactive for more than a week, GitLab automatically triggers the
<code>stop_review_app</code> job to stop the environment.</li></ul><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>review_app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>deploy-review-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>stop_review_app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>auto_stop_in</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=l>week</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>$CI_MERGE_REQUEST_ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stop_review_app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>stop-review-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>$CI_MERGE_REQUEST_ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span></span></span></code></pre></div></div><p>The <a href=/ci/yaml/#environmentaction><code>environment:action</code></a> keyword can be used to reset the time
that an environment is scheduled to stop. For more information, see
<a href=/ci/environments/#access-an-environment-for-preparation-or-verification-purposes>Access an environment for preparation or verification purposes</a>.</p><h4 id=view-an-environments-scheduled-stop-date-and-time>View an environment&rsquo;s scheduled stop date and time</h4><p>When a environment has been <a href=/ci/environments/#stop-an-environment-after-a-certain-time-period>scheduled to stop after a specified time period</a>,
you can view its expiration date and time.</p><p>To view an environment&rsquo;s expiration date and time:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Operate</strong> > <strong>Environments</strong>.</li><li>Select the name of the environment.</li></ol><p>The expiration date and time is displayed in the upper-left corner, next to the environment&rsquo;s name.</p><h4 id=override-an-environments-scheduled-stop-date-and-time>Override an environment&rsquo;s scheduled stop date and time</h4><p>When a environment has been <a href=/ci/environments/#stop-an-environment-after-a-certain-time-period>scheduled to stop after a specified time period</a>,
you can override its expiration.</p><p>To override an environment&rsquo;s expiration in the UI:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Operate</strong> > <strong>Environments</strong>.</li><li>Select the environment name.</li><li>in the upper-right corner, select the thumbtack (<span> <svg role="img" aria-label="thumbtack" class="gl-icon s16"><use href="/gitlab_ui/svgs-latest/icons.svg#thumbtack"/><title>thumbtack</title></svg> </span>).</li></ol><p>To override an environment&rsquo;s expiration in the <code>.gitlab-ci.yml</code>:</p><ol><li>Open the project&rsquo;s <code>.gitlab-ci.yml</code>.</li><li>Update the <code>auto_stop_in</code> setting of the corresponding deploy job to <code>auto_stop_in: never</code>.</li></ol><p>The <code>auto_stop_in</code> setting is overridden and the environment remains active until it&rsquo;s stopped
manually.</p><h3 id=clean-up-stale-environments>Clean up stale environments</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-12 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-12>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-12 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/merge_requests/108616>Introduced</a> in GitLab 15.8 <a href=/administration/feature_flags/>with a flag</a> named <code>stop_stale_environments</code>. Disabled by default.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/merge_requests/112098>Generally available</a> in GitLab 15.10. Feature flag <code>stop_stale_environments</code> removed.</li></ul></div></div><p>Clean up stale environments when you want to stop old environments in a project.</p><p>Prerequisites:</p><ul><li>You must have at least the Maintainer role.</li></ul><p>To clean up stale environments:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Operate</strong> > <strong>Environments</strong>.</li><li>Select <strong>Clean up environments</strong>.</li><li>Select the date to use for determining which environments to consider stale.</li><li>Select <strong>Clean up</strong>.</li></ol><p>Active environments that haven&rsquo;t been updated after the specified date are stopped.
Protected environments are ignored and not stopped.</p><h3 id=run-a-pipeline-job-when-environment-is-stopped>Run a pipeline job when environment is stopped</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-13 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-13>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-13 class="collapsible-list collapse" aria-hidden=true><ul><li>Feature flag <code>environment_stop_actions_include_all_finished_deployments</code> <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/435128>introduced</a> in GitLab 16.9. Disabled by default.</li><li>Feature flag <code>environment_stop_actions_include_all_finished_deployments</code> <a href=https://gitlab.com/gitlab-org/gitlab/-/merge_requests/150932>removed</a> in GitLab 17.0.</li></ul></div></div><p>You can define a stop job for the environment with an <a href=/ci/yaml/#environmenton_stop><code>on_stop</code> action</a> in the environment&rsquo;s deploy job.</p><p>The stop jobs of finished deployments in the latest finished pipeline are run when an environment is stopped. A deployment or pipeline is finished if it has the successful, canceled, or failed status.</p><p>Prerequisites:</p><ul><li>Both the deploy and stop jobs must have the same rules or only/except configuration.</li><li>The stop job must have the following keywords defined:<ul><li><code>when</code>, defined at either:<ul><li><a href=/ci/yaml/#when>The job level</a>.</li><li><a href=/ci/yaml/#rules>In a rules clause</a>. If you use <code>rules</code> and <code>when: manual</code>, you should
also set <a href=/ci/yaml/#allow_failure><code>allow_failure: true</code></a> so the pipeline can complete
even if the job doesn&rsquo;t run.</li></ul></li><li><code>environment:name</code></li><li><code>environment:action</code></li></ul></li></ul><p>In the following example:</p><ul><li>A <code>review_app</code> job calls a <code>stop_review_app</code> job after the first job is finished.</li><li>The <code>stop_review_app</code> is triggered based on what is defined under <code>when</code>. In this
case, it is set to <code>manual</code>, so it needs a
<a href=/ci/jobs/job_control/#create-a-job-that-must-be-run-manually>manual action</a>
from the GitLab UI to run.</li><li>The <code>GIT_STRATEGY</code> is set to <code>none</code>. If the <code>stop_review_app</code> job is
<a href=/ci/environments/#stopping-an-environment>automatically triggered</a>,
the runner doesn&rsquo;t try to check out the code after the branch is deleted.</li></ul><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>review_app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>make deploy-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://$CI_ENVIRONMENT_SLUG.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>stop_review_app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stop_review_app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>GIT_STRATEGY</span><span class=p>:</span><span class=w> </span><span class=l>none</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>make delete-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span></span></span></code></pre></div></div><h3 id=multiple-stop-actions-for-an-environment>Multiple stop actions for an environment</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-14 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-14>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-14 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/358911>Generally available</a> in GitLab 15.0. <a href=https://gitlab.com/gitlab-org/gitlab/-/merge_requests/86685>Feature flag <code>environment_multiple_stop_actions</code></a> removed.</li></ul></div></div><p>To configure multiple <strong>parallel</strong> stop actions on an environment, specify the
<a href=/ci/yaml/#environmenton_stop><code>on_stop</code></a> keyword across multiple
<a href=/ci/jobs/#deployment-jobs>deployment jobs</a> for the same <code>environment</code>, as defined in the
<code>.gitlab-ci.yml</code> file.</p><p>When an environment is stopped, the matching <code>on_stop</code> actions from only successful deployment jobs are run in parallel, in no particular order.</p><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>All <code>on_stop</code> actions for an environment must belong to the same pipeline. To use multiple <code>on_stop</code> actions in
<a href=/ci/pipelines/downstream_pipelines/>downstream pipelines</a>, you must configure the environment actions in
the parent pipeline. For more information, see <a href=/ci/pipelines/downstream_pipelines/#advanced-example>downstream pipelines for deployments</a>.</p></div></div><p>In the following example, for the <code>test</code> environment there are two deployment jobs:</p><ul><li><code>deploy-to-cloud-a</code></li><li><code>deploy-to-cloud-b</code></li></ul><p>When the environment is stopped, the system runs <code>on_stop</code> actions <code>teardown-cloud-a</code> and
<code>teardown-cloud-b</code> in parallel.</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy-to-cloud-a</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;Deploy to cloud a&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>teardown-cloud-a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>deploy-to-cloud-b</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;Deploy to cloud b&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>teardown-cloud-b</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>teardown-cloud-a</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;Delete the resources in cloud a&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>teardown-cloud-b</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;Delete the resources in cloud b&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span></span></span></code></pre></div></div><h3 id=stop-an-environment-without-running-the-on_stop-action>Stop an environment without running the <code>on_stop</code> action</h3><p>There may be times when you want to stop an environment without running the defined
<a href=/ci/yaml/#environmenton_stop><code>on_stop</code></a> action. For example, you want to delete many
environments without using <a href=/ci/pipelines/compute_minutes/>compute quota</a>.</p><p>To stop an environment without running the defined <code>on_stop</code> action, execute the
<a href=/api/environments/#stop-an-environment>Stop an environment API</a> with the parameter
<code>force=true</code>.</p><h3 id=delete-an-environment>Delete an environment</h3><p>Delete an environment when you want to remove it and all its deployments.</p><p>Prerequisites:</p><ul><li>You must have at least the Developer role.</li><li>You must <a href=/ci/environments/#stopping-an-environment>stop</a> the environment before it can be deleted.</li></ul><p>To delete an environment:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Operate</strong> > <strong>Environments</strong>.</li><li>Select the <strong>Stopped</strong> tab.</li><li>Next to the environment you want to delete, select <strong>Delete environment</strong>.</li><li>On the confirmation dialog, select <strong>Delete environment</strong>.</li></ol><h2 id=access-an-environment-for-preparation-or-verification-purposes>Access an environment for preparation or verification purposes</h2><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-16 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-16>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-16 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/437133>Updated</a> to reset <code>auto_stop_in</code> for <code>prepare</code> and <code>access</code> actions in GitLab 17.7.</li></ul></div></div><p>You can define a job that accesses an environment for various purposes, such as verification or preparation. This
effectively bypasses deployment creation, so that you can adjust your CD workflow more accurately.</p><p>To do so, add either <code>action: prepare</code>, <code>action: verify</code>, or <code>action: access</code> to the <code>environment</code> section of your job:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Building the app&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>staging</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>prepare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://staging.example.com</span></span></span></code></pre></div></div><p>This gives you access to environment-scoped variables, and can be used to protect builds from unauthorized access. Also,
it&rsquo;s effective to avoid the <a href=/ci/environments/deployment_safety/#prevent-outdated-deployment-jobs>prevent outdated deployment jobs</a> feature.</p><p>If an environment is configured to stop after a certain time period, jobs with the <code>access</code> or <code>prepare</code>
action will reset the scheduled stop time. The <a href=/ci/yaml/#environmentauto_stop_in><code>environment:auto_stop_in</code></a>
from the most recent successful deployment job to the environment is used when resetting the scheduled time.
For example, if the most recent deployment used <code>auto_stop_in: 1 week</code> and is later accessed by a job with
<code>action: access</code>, the environment will be rescheduled to stop one week from the completion of the accessing job.</p><p>To access an environment without changing the scheduled stop time, use the <code>verify</code> action.</p><h2 id=environment-incident-management>Environment incident management</h2><p>Production environments can go down unexpectedly, including for reasons outside
of your control. For example, issues with external dependencies, infrastructure,
or human error can cause major issues with an environment. Things like:</p><ul><li>A dependent cloud service goes down.</li><li>A 3rd party library is updated and it&rsquo;s not compatible with your application.</li><li>Someone performs a DDoS attack to a vulnerable endpoint in your server.</li><li>An operator misconfigures infrastructure.</li><li>A bug is introduced into the production application code.</li></ul><p>You can use <a href=/operations/incident_management/>incident management</a>
to get alerts when there are critical issues that need immediate attention.</p><h3 id=view-the-latest-alerts-for-environments>View the latest alerts for environments</h3><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li></ul></div><p>If you <a href=/operations/incident_management/integrations/#configuration>set up an alert integration</a>,
alerts for environments are shown on the environments page. The alert with the highest
severity is shown, so you can identify which environments need immediate attention.</p><p><a href=/ci/environments/img/alert_for_environment_v13_4.png target=_blank rel="noopener noreferrer"><img alt="Environment alert" height=115 src=/ci/environments/img/alert_for_environment_v13_4.png width=881></a></p><p>When the issue that triggered the alert is resolved, it is removed and is no
longer visible on the environments page.</p><p>If the alert requires a <a href=/ci/environments/deployments/#retry-or-roll-back-a-deployment>rollback</a>, you can select the
deployment tab from the environment page and select which deployment to roll back to.</p><h3 id=auto-rollback>Auto Rollback</h3><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li></ul></div><p>In a typical Continuous Deployment workflow, the CI pipeline tests every commit before deploying to
production. However, problematic code can still make it to production. For example, inefficient code
that is logically correct can pass tests even though it causes severe performance degradation.
Operators and SREs monitor the system to catch these problems as soon as possible. If they find a
problematic deployment, they can roll back to a previous stable version.</p><p>GitLab Auto Rollback eases this workflow by automatically triggering a rollback when a
<a href=/operations/incident_management/alerts/>critical alert</a>
is detected.
For GitLab to select the appropriate environment for the rollback, the alert should contain a <code>gitlab_environment_name</code> key with the name of the environment.
GitLab selects and redeploys the most recent successful deployment.</p><p>Limitations of GitLab Auto Rollback:</p><ul><li>The rollback is skipped if a deployment is running when the alert is detected.</li><li>A rollback can happen only once in three minutes. If multiple alerts are detected at once, only
one rollback is performed.</li></ul><p>GitLab Auto Rollback is turned off by default. To turn it on:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Automatic deployment rollbacks</strong>.</li><li>Select the checkbox for <strong>Enable automatic rollbacks</strong>.</li><li>Select <strong>Save changes</strong>.</li></ol><h2 id=environment-permissions>Environment permissions</h2><p>Depending on your role, you can interact with environments in public
and private projects.</p><h3 id=view-environments>View environments</h3><ul><li>In public projects, anyone can view a list of environments, including non-members.</li><li>In private projects, you must have at least the Reporter role to view a list of environments.</li></ul><h3 id=create-and-update-environments>Create and update environments</h3><ul><li>You must have at least the Developer role to create a new environment, or update an existing unprotected environment.</li><li>If an existing environment is protected and you don&rsquo;t have access to it, you cannot update the environment.</li></ul><h3 id=stop-and-delete-environments>Stop and delete environments</h3><ul><li>You must have at least the Developer role to stop or delete an unprotected environment.</li><li>If an environment is protected and you don&rsquo;t have access to it, you cannot stop or delete the environment.</li></ul><h3 id=run-deployment-jobs-in-protected-environments>Run deployment jobs in protected environments</h3><p>If you can push or merge to the protected branch:</p><ul><li>You must have at least the Reporter role.</li></ul><p>If you can&rsquo;t push to the protected branch:</p><ul><li>You must be a part of a group with the Reporter role.</li></ul><p>See <a href=/ci/environments/protected_environments/#deployment-only-access-to-protected-environments>Deployment-only access to protected environments</a>.</p><h2 id=web-terminals-deprecated>Web terminals (deprecated)</h2><div class="alert alert-type-warning gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>This feature was <a href=https://gitlab.com/groups/gitlab-org/configure/-/epics/8>deprecated</a> in GitLab 14.5.</p></div></div><p>If you deploy to your environments with the help of a deployment service (for example,
the <a href=/user/infrastructure/clusters/>Kubernetes integration</a>), GitLab can open
a terminal session to your environment. You can then debug issues without leaving your web browser.</p><p>The Web terminal is a container-based deployment, which often lacks basic tools (like an editor),
and can be stopped or restarted at any time. If this happens, you lose all your
changes. Treat the Web terminal as a debugging tool, not a comprehensive online IDE.</p><p>Web terminals:</p><ul><li>Are available to project Maintainers and Owners only.</li><li>Must <a href=/administration/integration/terminal/>be enabled</a>.</li></ul><p>In the UI, to view the Web terminal, either:</p><ul><li><p>From the <strong>Actions</strong> menu, select <strong>Terminal</strong>:</p><p><a href=/ci/environments/img/environments_terminal_button_on_index_v14_3.png target=_blank rel="noopener noreferrer"><img alt="Terminal button on environment index" height=178 src=/ci/environments/img/environments_terminal_button_on_index_v14_3.png width=1262></a></p></li><li><p>On the page for a specific environment, on the right, select <strong>Terminal</strong> (<span> <svg role="img" aria-label="terminal" class="gl-icon s16"><use href="/gitlab_ui/svgs-latest/icons.svg#terminal"/><title>terminal</title></svg> </span>).</p></li></ul><p>Select the button to establish the terminal session.
It works like any other terminal. You&rsquo;re in the container created
by your deployment so you can:</p><ul><li>Run shell commands and get responses in real time.</li><li>Check the logs.</li><li>Try out configuration or code tweaks.</li></ul><p>You can open multiple terminals to the same environment. They each get their own shell
session and even a multiplexer like <code>screen</code> or <code>tmux</code>.</p><h2 id=related-topics>Related topics</h2><ul><li><a href=/ci/environments/kubernetes_dashboard/>Dashboard for Kubernetes</a></li><li><a href=/ci/environments/deployments/>Deployments</a></li><li><a href=/ci/environments/protected_environments/>Protected environments</a></li><li><a href=/ci/environments/environments_dashboard/>Environments Dashboard</a></li><li><a href=/ci/environments/deployment_safety/#restrict-write-access-to-a-critical-environment>Deployment safety</a></li></ul><h2 id=troubleshooting>Troubleshooting</h2><h3 id=the-job-with-action-stop-doesnt-run>The job with <code>action: stop</code> doesn&rsquo;t run</h3><p>In some cases, environments do not stop despite an <code>on_stop</code> job being configured. This happens when the job
with the <code>action: stop</code> is not in a runnable state due to its <code>stages:</code> or <code>needs:</code> configuration.</p><p>For example:</p><ul><li>The environment might start in a stage that also has a job that failed.
Then the jobs in later stages job don&rsquo;t start. If the job with the <code>action: stop</code>
for the environment is also in a later stage, it can&rsquo;t start and the environment isn&rsquo;t deleted.</li><li>The job with the <code>action: stop</code> might have a dependency on a job that has not yet completed.</li></ul><p>To ensure the <code>action: stop</code> can always run when needed, you can:</p><ul><li><p>Put both jobs in the same stage:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>stages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>deploy_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://$CI_ENVIRONMENT_SLUG.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>stop_review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stop_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span></span></span></code></pre></div></div></li><li><p>Add a <a href=/ci/yaml/#needs><code>needs</code></a> entry to the <code>action: stop</code> job so the
job can start out of stage order:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>stages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>cleanup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>deploy_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://$CI_ENVIRONMENT_SLUG.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>on_stop</span><span class=p>:</span><span class=w> </span><span class=l>stop_review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stop_review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>cleanup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>needs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>deploy_review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>stop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>manual</span></span></span></code></pre></div></div></li></ul><h3 id=error-job-would-create-an-environment-with-an-invalid-parameter>Error: job <code>would create an environment with an invalid parameter</code></h3><p>If your project is configured to <a href=/ci/environments/#create-a-dynamic-environment>create a dynamic environment</a>,
you might encounter this error in a deployment job because the dynamically generated parameter can&rsquo;t be used for creating an environment:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=plaintext class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>This job could not be executed because it would create an environment with an invalid parameter.</span></span></code></pre></div></div><p>For example, your project has the following <code>.gitlab-ci.yml</code>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>echo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w> </span><span class=l>production/$ENVIRONMENT</span></span></span></code></pre></div></div><p>Because the <code>$ENVIRONMENT</code> variable does not exist in the pipeline, GitLab tries to
create an environment with a name <code>production/</code>, which is invalid in
<a href=/ci/yaml/#environmentname>the environment name constraint</a>.</p><p>To fix this, use one of the following solutions:</p><ul><li>Remove <code>environment</code> keyword from the deployment job. GitLab has already been
ignoring the invalid keyword, therefore your deployment pipelines stay intact
even after the keyword removal.</li><li>Ensure the variable exists in the pipeline. Review the
<a href=/ci/variables/where_variables_can_be_used/#gitlab-ciyml-file>limitation on supported variables</a>.</li><li>If you have <code>environment:deployment_tier</code> in your <code>.gitlab-ci.yml</code>, ensure the value is one of the
supported tiers: <code>production</code>, <code>staging</code>, <code>testing</code>, <code>development</code>, or <code>other</code>.</li></ul><h4 id=if-you-get-this-error-on-review-apps>If you get this error on review apps</h4><p>For example, if you have the following in your <code>.gitlab-ci.yml</code>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>deploy review app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_NAME</span></span></span></code></pre></div></div><p>When you create a new merge request with a branch name <code>bug-fix!</code>,
the <code>review</code> job tries to create an environment with <code>review/bug-fix!</code>.
However, the <code>!</code> is an invalid character for environments, so the
deployment job fails because it was about to run without an environment.</p><p>To fix this, use one of the following solutions:</p><ul><li><p>Re-create your feature branch without the invalid characters,
such as <code>bug-fix</code>.</p></li><li><p>Replace the <code>CI_COMMIT_REF_NAME</code>
<a href=/ci/variables/predefined_variables/>predefined variable</a> with
<code>CI_COMMIT_REF_SLUG</code> which strips any invalid characters:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w> </span><span class=l>deploy review app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w> </span><span class=l>review/$CI_COMMIT_REF_SLUG</span></span></span></code></pre></div></div></li></ul></div><div data-vue-app=back-to-top-button></div></div><div class="feedback gl-min-h-8" data-ga-section=feedback data-elastic-exclude><div data-component=docs-feedback></div></div></div><aside class=sidebar-right><div data-ga-section=toc data-vue-app=toc></div></aside></div></main><footer data-ga-section=footer><section data-ga-section=footer><div id=footer class="footer-section container gl-grid gl-grid-cols-2 gl-grid-rows-3 gl-grid-rows-auto gl-gap-8 lg:gl-grid-cols-5 lg:gl-grid-rows-1 lg:gl-justify-items-center gl-px-8 gl-py-8 lg:gl-py-10"><div class="gl-col-span-2 lg:gl-col-span-1 gl-row-start-1"><div class="docs-title gl-flex gl-items-center"><a href=/><img src=/gitlab-logo-footer.svg alt="GitLab Docs logo" class=logo width=176 height=24></a></div><ul class="docs-social gl-list-none gl-flex"><li><a href=https://www.facebook.com/gitlab class=facebook><span class=gl-sr-only>Facebook</span></a></li><li><a href=https://www.linkedin.com/company/gitlab-com class=linkedin><span class=gl-sr-only>LinkedIn</span></a></li><li><a href=https://twitter.com/gitlab class=twitter><span class=gl-sr-only>Twitter</span></a></li><li><a href=https://www.youtube.com/channel/UCnMGQ8QHMAnVIsI3xJrihhg class=youtube><span class=gl-sr-only>YouTube</span></a></li></ul><a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="license noopener noreferrer" class=gl-mt-0><img src=/by-sa.svg alt="Creative Commons License" width=80 height=15></a></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Company</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/company/>About GitLab</a></li><li><a href=https://about.gitlab.com/pricing/>View pricing</a></li><li><a href=https://about.gitlab.com/free-trial/>Try GitLab for free</a></li></ul></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Feedback</div><ul class="gl-list-none gl-p-0"><li><a href=https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/ci/environments/_index.md>View page source</a></li><li><a href=https://gitlab.com/-/ide/project/gitlab-org/gitlab/edit/master/-/doc/ci/environments/_index.md>Edit in web IDE</a></li><li><a href=https://about.gitlab.com/community/contribute/>Contribute to GitLab</a></li><li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Documentation">Suggest updates</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Help & Community</div><ul class="gl-list-none gl-p-0"><li><a href=https://university.gitlab.com/pages/certifications>Get certified</a></li><li><a href=https://about.gitlab.com/support/>Get support</a></li><li><a href="https://forum.gitlab.com/new-topic?title=topic%20title&amp;body=topic%20body&amp;tags=docs-feedback">Post on the GitLab forum</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Resources</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/terms/>Terms</a></li><li><a href=https://about.gitlab.com/privacy/>Privacy statement</a></li><li><a href=/legal/use_generative_ai/>Use of generative AI</a></li><li><a href=/legal/licensing_policy/>Acceptable use of user licenses</a></li><li><button id=ot-sdk-btn class=ot-sdk-show-settings></button></li></ul></div></div></section></footer><script type=module src=/vite/main.js></script><script async>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NJXWQL")</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJXWQL" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script async>(function(){var e,t=!1;function n(){t===!1&&(t=!0,Munchkin.init("194-VVC-221",{useBeaconAPI:!0}))}e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src="https://munchkin.marketo.net/munchkin.js",e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&n()},e.onload=n,document.getElementsByTagName("head")[0].appendChild(e)})()</script><script async src=https://cdn.bizible.com/scripts/bizible.js></script><script async>_linkedin_partner_id="30694",window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[],window._linkedin_data_partner_ids.push(_linkedin_partner_id),function(){var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",t.parentNode.insertBefore(e,t)}()</script><noscript><img height=1 width=1 style=display:none alt src="https://dc.ads.linkedin.com/collect/?pid=30694&fmt=gif"></noscript></body></html>